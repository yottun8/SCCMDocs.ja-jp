---
title: デバイス コンプライアンス ポリシーを作成して展開する
titleSuffix: Configuration Manager
description: 作成して、Configuration Manager でデバイス コンプライアンス ポリシーをデプロイする方法について説明します。
ms.date: 03/22/2018
ms.prod: configuration-manager
ms.technology: configmgr-hybrid
ms.topic: conceptual
ms.assetid: 0fd76043-d7ee-423d-8c5f-aa7e9ed58ce0
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: b0179de8cc96f885236178c70b7e834672ee1d5b
ms.sourcegitcommit: ef3fdf21180e43afd7af6c8264524711435e426e
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2019
ms.locfileid: "54898581"
---
# <a name="create-and-deploy-a-device-compliance-policy"></a>デバイス コンプライアンス ポリシーを作成して展開する

「オブジェクトの*適用対象: System Center Configuration Manager (Current Branch)*


## <a name="create-a-compliance-policy"></a>コンプライアンス ポリシーの作成

1. Configuration Manager コンソールで、**[資産とコンプライアンス]** を選択します。  

2. **[資産とコンプライアンス]** ワークスペースで **[コンプライアンス設定]** を展開して、**[コンプライアンス ポリシー]** を選択します。  

3. **[ホーム]** タブの **[作成]** グループで、**[コンプライアンス ポリシーの作成]** を選択します。  

4. **[コンプライアンス ポリシーの作成] ウィザード** の [全般] ページで、次の情報を指定します。  

    - **名前**:コンプライアンス ポリシーの一意の名前を入力します。 256 文字まで使用できます。  

    - **説明**:Configuration Manager コンソールで、VPN プロファイルを区別しやすくするために簡単な説明を入力します。 256 文字まで使用できます。  

    - **コンプライアンス ポリシーの種類**:デバイスが Configuration Manager によって管理されるかどうかに応じて、作成するポリシーの種類を選びます。  
    
    Intune で管理されるデバイスの場合は、**[Compliance rules for devices managed without configuration manager client]** (Configuration Manager のクライアントなしで管理されるデバイスのコンプライアンス規則) オプションを選びます。 このオプションを選択するときには、このポリシーの適用対象プラットフォームの種類を選択することもできます。  

    - **レポートするコンプライアンス非対応の重要度**: このコンプライアンス ポリシーが非対応として評価される場合に報告する重要度のレベルを指定します。 重要度レベルは次のとおりです。  

        - **なし**: このコンプライアンス規則に失敗したデバイスは、Configuration Manager レポート用の失敗の重要度を報告しません。  

        - **情報**: このコンプライアンス規則を満たしていないデバイスは、Configuration Manager レポート用に**情報**というレベルで非準拠重要度を報告します。  

        - **警告**: このコンプライアンス規則を満たしていないデバイスは、Configuration Manager レポート用に**警告**というレベルで非準拠重要度を報告します。  

        - **重大**: このコンプライアンス規則を満たしていないデバイスは、Configuration Manager レポート用に**重大**というレベルで非準拠重要度を報告します。  

        - **重大 (イベント)**: このコンプライアンス規則を満たしていないデバイスは、Configuration Manager レポート用に**重大**というレベルで非準拠重要度を報告します。 **重大 (イベント)** 重大度レベルは、アプリケーションのイベント ログに Windows のイベントとしても記録されます。  

5. **[サポートされているプラットフォーム]** ページで、このコンプライアンス ポリシーが評価されるデバイス プラットフォームを選択します。 **[すべてを選択]** をクリックして、すべてのデバイス プラットフォームを選択することもできます。 サポートされているプラットフォームは次のとおりです。Windows 7、Windows 8.1、および Windows 10。Windows Server 2008 R2、Windows Server 2012、Windows Server 2012 R2、および Windows Server 2016。  

6. **[ルール]** ページで、デバイスが "準拠している" と見なされるために必要な構成を定義するルールを定義します。 コンプライアンス ポリシーを作成すると、既定でいくつかのルールが有効になりますが、これらルールは編集したり削除したりすることができます。 すべてのルールの完全なリストは、この記事で後述する「コンプライアンス ポリシー ルール」セクションをご覧ください。  

    > [!NOTE]  
    > Windows Pc では、Windows 8.1 のバージョンは 6.3 として報告されます。 OS バージョンのルールが Windows 8.1 に設定されている場合は、デバイスに Windows 8.1 がインストールされている場合でもそのデバイスは非準拠として報告されます。 最小 OS ルールと最大 OS ルールに Windows の適切な *報告* バージョンを設定していることを確認してください。 バージョン番号は、**winver** コマンドが返すバージョンと一致する必要があります。 Windows Mobile; この問題はありません。バージョンは期待どおり 8.1 として報告されます。  
    > 
    > Windows 10 と Windows Pc の場合、バージョンを設定する必要があります**10.0** plus OS ビルド番号を**winver**コマンドを返します。  

7. ウィザードの **[概要]** ページで、作成した設定を確認してから、ウィザードを終了します。  

    **[資産とコンプライアンス]** ワークスペースの **[コンプライアンス ポリシー]** ノードに新しいポリシーが表示されます。  


## <a name="deploy-a-compliance-policy"></a>コンプライアンス ポリシーの展開

1. Configuration Manager コンソールで、**[資産とコンプライアンス]** を選択します。  

2. **[資産とコンプライアンス]** ワークスペースで **[コンプライアンス設定]** を展開して、**[コンプライアンス ポリシー]** を選択します。  

3. **[ホーム]** タブの **[展開]** グループで、**[展開]** を選択します。  

4. **[コンプライアンス ポリシーの展開]** ダイアログ ボックスで、**[参照]** をクリックし、ポリシーを展開するユーザー コレクションを選択します。  

    さらに、ポリシーが準拠していない場合にアラートを生成するオプションや、ポリシーのコンプライアンスを評価するスケジュールを設定するオプションを選択できます。  

5. 終了したら、**[OK]** をクリックします。  



## <a name="monitor-the-compliance-policy"></a>コンプライアンス ポリシーの監視

#### <a name="to-view-compliance-results-in-the-configuration-manager-console"></a>Configuration Manager コンソールでコンプライアンス結果を表示するには

1. Configuration Manager コンソールで、**[監視]** をクリックします。  

2. **[監視]** ワークスペースで、**[展開]** を選択します。  

3. **[展開]** 一覧で、コンプライアンス情報を確認するコンプライアンス ポリシーの展開を選択します。  

4. メイン ページで、ポリシーの展開のコンプライアンスに関する概要情報を確認できます。 詳細情報を表示するには、展開を選択してから、**[ホーム]** タブの **[展開]** グループで **[ステータスの表示]** を選択して、**[展開ステータス]** ページを開きます。  

    **[展開ステータス]** ページには次のタブがあります。  

    - **対応**: 影響を受けた資産の数に基づいて、ポリシーのコンプライアンスを表示します。 ルールを選択して、そのルールに準拠したすべてのユーザーとデバイスを含む **[資産とコンプライアンス]** ワークスペースの **[ユーザー]** または **[デバイス]** のノードの下に、一時ノードを作成できます。 **[資産の詳細]** ウィンドウに、そのポリシーに準拠するユーザーやデバイスが表示されます。 追加の情報を表示するには、一覧のユーザーまたはデバイスをダブルクリックします。  

    - **エラー**: 影響を受けた資産の数に基づいて、選択したポリシーの展開におけるすべてのエラーの一覧が表示されます。 ルールを選択して、そのルールでエラーとなったすべてのユーザーとデバイスを含む **[資産とコンプライアンス]** ワークスペースの **[ユーザー]** または **[デバイス]** のノードの下に、一時ノードを作成できます。 ユーザーまたはデバイスを選択すると、**[資産の詳細]** ウィンドウに、問題によって影響を受けるユーザーやデバイスが表示されます。 その問題についての追加の情報を表示するには、一覧のユーザーまたはデバイスをダブルクリックします。  

    - **非対応**: 影響を受けた資産の数に基づいて、そのポリシー内のすべての非準拠のルールの一覧が表示されます。 ルールを選択して、そのルールに準拠していないすべてのユーザーとデバイスを含む **[資産とコンプライアンス]** ワークスペースの **[ユーザー]** または **[デバイス]** のノードの下に、一時ノードを作成できます。 ユーザーまたはデバイスを選択すると、**[資産の詳細]** ウィンドウに、問題によって影響を受けるユーザーやデバイスが表示されます。 その問題についての追加の情報を表示するには、一覧のユーザーまたはデバイスをダブルクリックします。  

    - **不明**: 選択したポリシーの展開に対するコンプライアンスが報告されなかったすべてのユーザーとデバイスの一覧が、現在のデバイスのクライアント ステータスと共に表示されます。  

#### <a name="to-monitor-the-compliance-status-of-an-individual-device"></a>個々のデバイスのコンプライアンス ステータスを監視するには

1. Configuration Manager コンソールで、**[資産とコンプライアンス]** ワークスペースを選択します。  

2. **[デバイス]** を選択します。  

3. さらに多くの列を有効にするには、列の 1 つを右クリックします。 次の列を追加できます。  

    > [!Note]  
    > 既定では、これらの列は表示されません。  

    - **Azure Active Directory デバイス ID**:Azure Active Directory でのデバイスの一意の識別子です。  

    - **コンプライアンス エラーの詳細**:エラー メッセージの詳細とプロセスに問題が発生します。 この列が空白の場合は、エラーが検出されず、コンプライアンス ステータスが正常に報告されたことを示します。  

    - **コンプライアンス エラーの場所**:コンプライアンスに問題があった場所についての詳細です。 この列が空白の場合は、エラーが検出されず、コンプライアンス ステータスが正常に報告されたことを示します。 コンプライアンス プロセスが失敗する可能性がある場所の例:  

        - ConfigMgr クライアント  
        - 管理ポイント  
        - Intune  
        - Azure Active Directory  

    - **コンプライアンスの評価時間**:コンプライアンスが最後にチェックされた日時です。  

    - **コンプライアンスの設定時間**:最後にコンプライアンスが Azure Active Directory に更新された日時です。  

    - **条件付きアクセス準拠**:コンピューターが条件付きアクセス ポリシーに準拠しているかどうかを示します。  

#### <a name="to-view-intune-compliance-policies-charts"></a>Intune のコンプライアンス ポリシー グラフを表示するには
1. Configuration Manager コンソールで、**[監視]** をクリックします。 

2. **[監視]** ワークスペースで、**[概要]** > **[コンプライアンス設定]** > **[コンプライアンス ポリシー]** の順に移動します。 次のチャートが表示されます。  

    - **デバイスの全体的なコンプライアンス**:すべてのコンプライアンス ポリシーに対するデバイスの全体の準拠が表示されます。  

    - **コンプライアンス非対応の主な理由**:非準拠のデバイスに対する主なポリシーが表示されます。  

3. いずれかのチャートのセクションを選択し、そのカテゴリ内のデバイスのリストまでドリル ダウンします。  

#### <a name="to-view-a-health-attestation-report"></a>正常性構成レポートを表示するには

1. Configuration Manager コンソールで、**[監視]** をクリックします。  

2. デバイスのコンプライアンス ステータスに基づいて現在の状態の概要レポートを表示するには、**[セキュリティ]** 選択して、**[正常性構成]** を選択します。  

3. すべてのデバイスと正常性構成のすべての属性を一覧表示するレポートを表示するには、**[セキュリティ]** 選択して、**[正常性構成]** を選択します。  



## <a name="compliance-policy-rules"></a>コンプライアンス ポリシー ルール

- **モバイル デバイスのパスワードの設定を必要と**:デバイスにアクセスする際にパスワードを入力するよう、ユーザーに要求できます。  

    **サポートされている**:  
    - Windows Phone 8+  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **アイドル状態のデバイスのロックを解除するパスワードを要求する**:ロックされているデバイスにアクセスする際にパスワードを入力するよう、ユーザーに要求できます。  

    **サポートされている**:  
    - Windows Phone 8+  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **パスワードが要求されるまで非アクティブ状態の分**:ユーザーがパスワードを再入力しなければならなくなるまでのアイドル時間を指定できます。 使用可能なオプションのいずれかに値を設定します。**1 分**、 **5 分**、 **15 分**、 **30 分**、 **1 時間**します。  

    この規則は **[アイドル状態のデバイスのロックを解除する際にパスワードを要求する]** と併用される必要があります。 ここで設定した値は、デバイスがアイドル状態と見なされてロックされる時間を決定します。 **[アイドル状態のデバイスのロックを解除する際にパスワードを要求する]** を **True** に設定した場合、ユーザーはロックされたデバイスにアクセスするためにパスワードを入力する必要があります。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows RT/8.1  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **自動更新を必須**:Windows 8.1 以降のデバイスへの更新プログラムの自動インストールを必須にして、更新プログラムのクラスを指定できます。  

    自動インストールを防止するには、値を **None** に設定する必要があります。 すべての推奨される更新プログラムを自動的にインストールするには、**[推奨]** に設定します。 重要として分類された更新プログラムのみをインストールするには、**[重要]** に設定します。  

    **サポートされている**:  
    - Windows Phone 8+  

- **単純なパスワードを許可する**:ユーザーは単純なパスワード ("1234"、"1111" など) を作成できます。 この設定は既定で無効になっています。  

    **サポートされている**:  
    - Windows Phone 8+  
    - iOS 6+  

- **パスワードの最小長**:ユーザーのパスワードに含まれている必要がある数字または文字の最小数を指定します (既定は 6)。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows 8.1  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

    > [!NOTE]  
    > Windows を実行し Microsoft アカウントでセキュリティ保護されるデバイスについては、**[パスワードの最小文字数]** が 8 文字より長い場合、または **[文字セットの最小数]** が 2 よりも大きい場合、コンプライアンス ポリシーは正しく評価を行うことができません。  

- **モバイル デバイスのファイルの暗号化**:リソースに接続するためにデバイスを暗号化できます。 Windows Phone 8 を実行するデバイスは自動的に暗号化されます。 iOS を実行するデバイスは、設定 **[モバイル デバイスのパスワードの設定が必要]** を構成すると、暗号化されます。 既定では、この設定は有効になっています。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows 8.1  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **デバイスが脱獄必要がありますまたは root 化**:この設定を有効にした場合、脱獄 (iOS) または root 化 (Android) デバイスは準拠です。 この設定は既定で無効になっています。  

    **サポートされている**:  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **Intune で電子メール プロファイルを管理する必要があります**:このオプションが **[はい]** に設定されている場合、デバイスはそのデバイスに展開された電子メール プロファイルを使用する必要があります。 メール プロファイルが、コンプライアンス ポリシーの対象ユーザー グループと同じユーザー グループに展開されていない場合、デバイスは非準拠であると見なされます。  

    ユーザーは、デバイスに展開されている Intune 電子メール プロファイルと一致するデバイスで電子メール アカウントを既に設定している場合にも準拠していないです。 この場合、Intune では、ユーザーがプロビジョニングしたプロファイルを上書きできないので、結果としてそのプロファイルを管理できません。 既存の電子メール設定を削除すれば Intune は管理対象の電子メール プロファイルをインストールできるようになって、ユーザーはデバイスを準拠させることができます。  

    電子メール プロファイルの詳細については、次を参照してください。 [Microsoft Intune で電子メール プロファイルを使用して会社の電子メールへのアクセスを有効にする](https://docs.microsoft.com/intune/email-settings-configure)します。 この設定は既定で無効になっています。  

    **サポートされている**:  
    - iOS 6+  

- **電子メール プロファイル**:**[電子メール アカウントを Intune で管理する必要がある]** が選択されている場合は、**[選択]** を選択して、デバイスの管理に使用する電子メール プロファイルを選択します。 電子メール プロファイルは、デバイス上に存在する必要があります。  

    **サポートされている**:  
    - iOS 6+  

- **必要な最小 OS**:デバイスでは、指定した最小 OS バージョンの要件を満たしていない場合は、非準拠として報告されます。 アップグレードする方法に関する情報へのリンクが表示されます。 ユーザーは、デバイスのアップグレードを行うことを選択できます。アップグレード後は、会社のリソースにアクセスできるようになります。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows 8.1  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **許可される最大 OS バージョン**:ルールに指定した OS バージョンより新しいバージョンの OS がデバイスで使用されている場合、会社のリソースへのアクセスがブロックされ、IT 管理者に問い合わせることをユーザーに促すメッセージが表示されます。対象の OS バージョンを許可するようにルールを変更するまでは、このデバイスを使用して会社のリソースへアクセスすることはできません。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows 8.1  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **デバイス正常として報告する必要がある**:新規または既存のコンプライアンス ポリシーで、Windows 10 デバイスが健全であると報告されることを必須とする規則を設定できます。 この設定を有効にした場合、Windows 10 デバイスは、次のデータ ポイントの正常性構成証明サービスを使用して評価されます。  

    - **BitLocker が有効になっている**:BitLocker がオンのときに、デバイスは、システムがオフまたは休止状態になるときに、未承認のアクセスからドライブに格納されているデータを保護できます。  

        BitLocker ドライブ暗号化は、Windows オペレーティング システムのボリュームに格納されているすべてのデータを暗号化します。 BitLocker は、Windows オペレーティング システムとユーザー データの保護のために TPM を使用します。 TMP は、コンピューターのそばに人がいなかった場合や、コンピューターを紛失したり、盗難されたりした場合でも、改ざんされていないことを確認するために役立ちます。  

        コンピューターに互換性のある TPM がインストールされている場合は、BitLocker は TPM を使用してデータを保護する暗号化キーをロックします。 その結果、TPM がコンピューターの状態を確認するまで、キーはアクセスできません。  

    - **コードの整合性が有効になっている**:コードの整合性は、メモリに読み込まれるたびに、ドライバーまたはシステム ファイルの整合性を検証する機能です。 コードの整合性により、未署名のドライバーまたはシステム ファイルがカーネルに読み込まれているかどうかが検出されます。 また、管理者権限を持つユーザー アカウントが実行している悪意のあるソフトウェアによってシステム ファイルが変更されたかどうかを検出します。  

    - **セキュア ブートが有効になっている**:セキュア ブートが有効である場合は、システムは強制的に工場出荷時の信頼された状態で起動します。 また、セキュア ブートが有効である場合は、マシンの起動に使用するコア コンポーネントには、デバイスの製造者が信頼している適切な暗号署名が必要です。 マシンの開始前に、UEFI ファームウェアはこれを確認します。 すべてのファイルが改ざんされて場合、その署名が破損、システムは起動しません。  

    - **-起動時マルウェア対策が有効になっている**:この設定は PC にのみ適用されます。 起動時マルウェア対策 (ELAM) は、ネットワーク内のコンピューターの起動時にサードパーティ製のドライバーが初期化する前に、コンピューターを保護します。  

        この規則は既定でオフになっています。  

    詳細については、次を参照してください。 [Healthattestation CSP](https://msdn.microsoft.com/library/dn934876.aspx)します。  

    **サポートされている**:  
    - Windows 10 および Windows 10 Mobile  

    > [!NOTE]  
    > デバイスが準拠してでは以降 Configuration Manager 1802 以降ではソフトウェア センターには、正常性構成証明の項目が表示されます。 <!--1235616-->   
    > ![ソフトウェア センターでのデバイス正常性構成証明のデバイス コンプライアンス](./media/Software-Center-noncompliant.PNG)  

- **デバイスにインストールできないアプリ**:ユーザーが管理非準拠のアプリ リストからアプリをインストールした場合、ユーザーは、会社の電子メールや、条件付きアクセスをサポートする他の会社のリソースにアクセスを試みても、ブロックされます。 この規則では、管理者によって定義された非準拠リストにアプリを追加する場合、アプリ名とアプリ ID が必要です。アプリの発行元を追加することもできますが、必須ではありません。  

    **サポートされている**:  
    - iOS 6+  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **パスワードの種類に必要な**:ユーザーが英数字のパスワードまたは数字のパスワードのどちらを使用する必要があるかを指定します。 英数字のパスワードの場合、パスワードに最低限必要な文字セットの数も指定します。 文字セットには、小文字、大文字、記号、および数字の 4 種類があります。  

    **サポートされている**:  
    - Windows Phone 8+  
    - Windows 8.1+  
    - iOS 6+  

- **デバイスでのブロックの USB デバッグ**:USB デバッグは既に無効になっている android for Work デバイスは、この設定を構成する必要はありません。  

    **サポートされている**:  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **不明なソースからアプリをブロックする**:デバイスが不明なソースからのアプリのインストールを許可しないことが必要です。 Android for Work デバイスが常に不明なソースからのインストールを制限するように、この設定を構成する必要はありません。  

    **サポートされている**:  
    - Android 4.0 以降  
    - Samsung KNOX Standard 4.0+  

- **アプリの脅威のスキャンを必要と**:この設定は、デバイスでアプリの確認機能が有効になっていることを指定します。  

    **サポートされている**:  
    - Android 4.2 から 4.4  
    - Samsung KNOX Standard 4.0+  


### <a name="find-an-app-id"></a>アプリ ID を検索する

アプリ ID は、Apple および Google のアプリケーション サービス内でアプリを一意に識別する識別子です。 例としては、`com.contoso.myapp`します。 アプリ ID を検索するには：

- **Android**:ID、Google play ストアのアプリを作成するために使用された URL、アプリを検索します。 アプリ ID の例を示します。 `...?id=com.companyname.appname&hl=en`  

- **iOS**  
    1. ITunes ストアの URL の ID 番号を検索します。 例: `/id875948587?mt=8`  

    2. Web ブラウザーでは、番号をさきほど検索した ID 番号に置き換えて、次の URL に移動します。 たとえば、`https://itunes.apple.com/lookup?id=875948587` などです。  

    3. テキスト ファイルをダウンロードして開きます。  

    4. ”**bundleid**" というテキストを検索します。 例: `"bundleId":"com.companyname.appname"`  

