---
title: グローバル条件を作成する
titleSuffix: Configuration Manager
description: アプリケーションの提供方法とクライアント デバイスへの展開方法を指定するグローバル条件を作成します。
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.technology: configmgr-app
ms.topic: conceptual
ms.assetid: 2d5f871a-19dc-4bd3-a3ad-4230c7a69f1b
author: aczechowski
manager: dougeby
ms.author: aaroncz
ms.openlocfilehash: a7f6ffa85fd82118ca093454b2dec6249fe7b3e2
ms.sourcegitcommit: 48098f9fb2f447672bf36d50c9f58a3d26acb9ed
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/14/2018
ms.locfileid: "53421894"
---
# <a name="how-to-create-global-conditions-in-system-center-configuration-manager"></a>System Center Configuration Manager でグローバル条件を作成する方法

*適用対象:System Center Configuration Manager (Current Branch)*

System Center Configuration Manager のグローバル条件は、クライアント デバイスへのアプリケーションの提供方法と展開方法を決めるために使用できるビジネス条件または技術条件の規則です。 グローバル条件は、展開の種類の作成ウィザードの **[要件]** ページからアクセスします。  

> [!NOTE]  
>  グローバル条件は、それを作成したサイトからのみ編集することができます。  

 Configuration Manager のグローバル条件を作成するには、次の手順に従います。  

## <a name="provide-basic-information-about-the-global-condition"></a>グローバル条件についての基本的な情報の提供  
 さまざまな種類のグローバル条件を使用できます。 グローバル条件の種類によって、関連付けられるオプションは異なります。 特定のグローバル条件の種類を選択すると、Configuration Manager には、その選択内容に適用されるオプションが表示されます。  

1.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** > **[アプリケーション管理]** > **[グローバル条件]** の順に選択します。  

3.  **[ホーム]** タブの **[作成]** グループで、**[グローバル条件の作成]** を選択します。  

4.  **[グローバル条件の作成]** ダイアログ ボックスで、グローバル条件の名前とオプションとして説明を入力します。  

5.  **[デバイスの種類]** ドロップダウン リストで、グローバル条件が **[Windows]** コンピューター用か **[Windows Mobile]** デバイス用かを選択します。  

6.  **[条件の種類]** ドロップダウン リストで次のオプションのいずれかを選択します。  

    -   **設定** – このオプションはクライアントのデバイスに 1 つ以上の項目が存在するかどうかを確認します。 たとえば、ファイル、フォルダー、またはレジストリ キー値がクライアント デバイスに存在するかどうかを確認できます。  

    -   **式** – このオプションでは、条件がクライアント デバイスで満たされているかどうかを確認するより複雑な規則をセットアップすることができます。 たとえば、コンピューターの物理メモリが 2 GB から 4 GB の範囲内であるかどうかや、モバイル デバイスがタッチ スクリーン入力を使用しているかどうかを確認できます。  

## <a name="set-up-rules-for-the-global-condition"></a>グローバル条件向け規則のセットアップ  
 グローバル条件の規則を定義するための手順は、設定を構成するのか、式を構成するのかによって異なります。 ここで適用可能な手順を使用して、グローバル条件の設定または式をセットアップします。  

### <a name="to-set-up-a-setting-for-the-global-condition"></a>グローバル条件の設定をセットアップするには  

1. **[条件の種類]** ドロップダウン リストで、**[設定]** を選択します。  

2. **[設定の種類]** ドロップダウン リストで、確認する要件が含まれている条件を選択します。 次の設定の種類と条件を利用できます。  

   - **Active Directory クエリ**  

     -   **[LDAP プレフィックス]** - クライアント コンピューターでコンプライアンス対応を評価するための Active Directory ドメイン サービス クエリの有効な LDAP プレフィックスを指定します。 **LDAP://** または **GC://** を使用できます。  

     -   **識別名 (DN)** - クライアント コンピューターのコンプライアンスを評価する Active Directory Domain Services オブジェクトの識別名を指定します。  

     -   **[検索フィルター]** - クライアント コンピューターでコンプライアンス対応を評価するための Active Directory ドメイン サービス クエリの結果を絞り込む、オプションの LDAP フィルターを指定します。  

     -   **[検索範囲]** - Active Directory ドメイン サービスにおける検索範囲を指定します。  

         -   **ベース** - 指定したオブジェクトのみを対象としてクエリを実行します。  

         -   **1 つのレベル** - このバージョンの Configuration Managerでは使用されていないオプションです。  

         -   **サブツリー** - 指定したオブジェクトおよびディレクトリの完全なサブツリーに対してクエリを実行します。  

     -   **プロパティ** - クライアント コンピューターでコンプライアンスを評価するために使用する Active Directory ドメイン サービス オブジェクトのプロパティを指定します。  

     -   **クエリ** - **[LDAP プレフィックス]**、**[識別名 (DN)]**、**[検索フィルター]** (指定されている場合)、**[プロパティ]** のエントリから構成された LDAP クエリが表示されます。 このクエリは、クライアント コンピューターのコンプライアンス評価に使用されます。  

   - **アセンブリ**  

     -   **アセンブリ名** - 検索対象のアセンブリ オブジェクトの名前を指定します。 名前は、同じ種類の他のアセンブリ オブジェクトと同じにすることはできません。また、名前をグローバル アセンブリ キャッシュに登録する必要があります。 アセンブリ名は 256 文字以内で指定できます。  

     > [!NOTE]  
     >  アセンブリは、アプリケーション間で共有可能なコードの断片です。 アセンブリのファイル名拡張子として、.dll または .exe を使用できます。 グローバル アセンブリ キャッシュは、クライアント コンピューター上の *%systemroot%\assembly* という名前のフォルダーであり、すべての共有アセンブリが保存されます。  

   - **ファイル システム**  

     - **種類** – ドロップダウン リストから、**[ファイル]** または **[フォルダー]** のどちらを検索するかを選択します。  

     - **パス** - クライアント コンピューターの指定したファイルまたはフォルダーへのパスを指定します。 パスには、システム環境変数と *%USERPROFILE%* 環境変数を指定できます。  

       > [!NOTE]  
       >  *パス* あるいは **ファイルまたはフォルダー名** フィールドで **%userprofile%** 環境変数を使用する場合、クライアント コンピューター上のすべてのユーザー プロファイルが検索されます。 その結果、複数インスタンスのファイルまたはフォルダーが検出される可能性があります。  

     - **ファイル名またはフォルダー名** - 検索するファイルまたはフォルダー オブジェクトの名前を指定します。 ファイル名またはフォルダー名には、システム環境変数と *%USERPROFILE%* 環境変数を指定できます。 ファイル名にワイルドカードとして * と ? を 使用することもできます。  

       > [!NOTE]  
       >  ファイル名またはフォルダー名を指定しワイルドカードを使用すると、多数の結果が返されることがあります。 これにより、クライアント コンピューターのリソース使用率が高くなり、Configuration Manager に結果をレポートするときにネットワーク トラフィックが増える場合があります。  

     - **[サブフォルダーを含める]** - このオプションは、指定したパス内のサブフォルダーも検索する場合に有効にします。  

     - **このファイルまたはフォルダーは 64 ビット アプリケーションに関連付けられている** - 64 ビット バージョンの Windows を実行する Configuration Manager クライアントで、32 ビット システム ファイルの場所 (*%windir%* \system32) に加えて 64 ビット システム ファイルの場所 (*%windir%* \syswow64) も検索する必要があるかどうかを選択します。  

       > [!NOTE]  
       >  64 ビットコンピューターの 64 ビット および 32 ビット システム ファイルの場所に同じファイルまたはフォルダーが存在する場合は、グローバル条件によって複数のファイルが検知されます。  

       **[ファイル システム]** 設定の種類では、**[パス]** フィールドで UNC パスのネットワーク共有への指定はサポートされていません。  

   - **IIS メタベース**  

     -   **メタベース パス** - IIS メタベースへの有効なパスを指定します。  

     -   **[プロパティ ID]** - IIS メタベース設定の数値プロパティを指定します。  

   - **レジストリ キー**  

     -   **ハイブ** – ドロップダウン リストから、検索するレジストリ ハイブを選択します。  

     -   **[キー]** - 検索対象のレジストリ キーの名前を指定します。 *キー\サブキー*という形式を使用する必要があります。  

     -   **このレジストリ キーを 64 ビット アプリケーションに関連付ける** - 64 ビット版の Windows を実行するクライアントで 32 ビット レジストリ キーだけでなく 64 ビット レジストリ キーも検索するかどうかを指定します。  

         > [!NOTE]  
         >  64 ビットコンピューターの 64 ビット および 32 ビット システム ファイルの場所に同じレジストリ キーが存在する場合は、グローバル条件によって両方のレジストリ キーが検知されます。  

   - **レジストリ値**  

     -   **ハイブ** – ドロップダウン リストから、検索するレジストリ ハイブを選択します。  

     -   **[キー]** - 検索対象のレジストリ キーの名前を指定します。 *キー\サブキー*という形式を使用する必要があります。  

     -   **値** – 指定されたレジストリ キーに含まれている必要がある値を指定します。  

     -   **このレジストリ キーを 64 ビット アプリケーションに関連付ける** - 64 ビット版の Windows を実行するクライアントで 32 ビット レジストリ キーだけでなく 64 ビット レジストリ キーも検索するかどうかを指定します。  

         > [!NOTE]  
         >  64 ビットコンピューターの 64 ビット および 32 ビット システム ファイルの場所に同じレジストリ キーが存在する場合は、グローバル条件によって両方のレジストリ キーが検知されます。  

   - **スクリプト**  

     -   **検出スクリプト** – **[追加]** を選択して入力するか、使用するスクリプトを参照します。 Windows PowerShell、VBScript、または JScript のスクリプトが使用できます。  

     -   **ログオンしたユーザーの資格情報を使用してスクリプトを実行する** – このオプションを有効にすると、サインインしているユーザーの資格情報を使用してクライアント コンピューターでスクリプトが実行されます。  

         > [!NOTE]  
         >  スクリプトによって返された値は、グローバル条件のコンプライアンスを評価するのに使用されます。 たとえば、VBScript を使用する場合、**WScript.Echo Result** コマンドを使用して、結果の変数値をグローバル条件に返すことができます。  
         >   
         >  スクリプトによって複数の値が返される場合は、それらの値をセミコロンで区切り、1 つの行にまとめる必要があります。 各値が個別の行に分かれている場合は、評価に失敗します。  

   - **SQL クエリ**  

     -   **SQL Serverインスタンス** – 既定のインスタンス、すべてのインスタンス、または特定のデータベースのインスタンス名のどれで SQL クエリを実行するかを選択します。  

         > [!NOTE]  
         >  インスタンス名は、SQL Server のローカル インスタンスを参照する必要があります。 クラスター化された SQL Server インスタンスを参照するには、スクリプト設定を使用する必要があります。  

     -   **データベース** - SQL クエリを実行する対象となる Microsoft SQL Server データベースの名前を指定します。  

     -   **列** - Transact-SQL ステートメントから返され、グローバル条件のコンプライアンス評価に使用する列の名前を指定します。  

     -   **Transact-SQL ステートメント** – グローバル条件に使用する完全な SQL クエリを指定します。 また、**[開く]** を選択して、既存の SQL クエリを開くこともできます。  

   - **WQL クエリ**  

     -   **名前空間** - クライアント コンピューターのコンプライアンスを評価する WQL クエリに使用する WMI 名前空間を指定します。 既定値は、Root\cimv2 です。  

     -   **クラス** - クライアント コンピューターのコンプライアンスを評価する WQL クエリに使用する WMI クラスを指定します。  

     -   **プロパティ** - クライアント コンピューターのコンプライアンスを評価する WQL クエリに使用する WMI プロパティを指定します。  

     -   **WQL クエリの WHERE 句** - **WQL クエリの WHERE 句** 項目を使用して、クライアント コンピューター上の指定された名前空間、クラス、およびプロパティに適用される WHERE 句を指定できます。  

   - **XPath クエリ**  

     -   **パス** - コンプライアンスの評価で使用されるクライアント コンピューターの XML ファイルへのパスを指定します。 Configuration Manager では、パス名にすべての Windows システム環境変数と *%USERPROFILE%* ユーザー変数の使用がサポートされています。  

     -   **XML ファイル名** - クライアント コンピューターのコンプライアンス評価に使用する XML クエリを含むファイルの名前を指定します。  

     -   **サブフォルダーも含める** – 指定したパスの下にあるサブフォルダーも検索する場合は、このオプションをオンにします。  

     -   **このファイルは 64 ビット アプリケーションに関連付けられている** - 64 ビット バージョンの Windows を実行する Configuration Manager クライアントで、32 ビット システム ファイルの場所 (*%windir%* \system32) に加えて 64 ビット システム ファイルの場所 (*%windir%* \syswow64) も検索する必要があるかどうかを選択します。  

     -   **XPath クエリ** - クライアント コンピューターのコンプライアンス評価に使用する有効な XML Path Language (XPath) クエリを完全な形式で指定します。  

     -   **名前空間** - **[XML 名前空間]** ダイアログ ボックスを開き、XPath クエリの中で使用する名前空間およびプレフィックスを識別します。  

3. **[データの種類]** ドロップダウン リストで、要件を確認するために使用される前に、条件によって返されるデータの形式を選択します。  

   > [!NOTE]  
   >  **[データの種類]** ドロップダウン リストは、設定の種類によっては表示されません。  

4. **[設定の種類]** ドロップダウン リストで、この設定の詳細をセットアップします。 セットアップできる項目は、選択した設定の種類によって異なります。  

5. **[OK]** を選択して規則を保存し、**[グローバル条件の作成]** ダイアログ ボックスを閉じます。  

### <a name="set-up-an-expression-for-the-global-condition"></a>グローバル条件の式をセットアップする  

1.  **[条件の種類]** ドロップダウン リストで、**[式]** を選択します。  

2.  **[句の追加]** を選択して **[句の追加]** ダイアログ ボックスを開きます。  

3.  **[カテゴリの選択]** ドロップダウン リストから、デバイス用の式かユーザー用の式かを選択します。 または、**[カスタム]** を選択して構成済みのグローバル条件を使用します。  

4.  **[条件の選択]** ドロップダウン リストから、ユーザーまたはデバイスが規則の要件を満たしているかどうかの評価に使用する条件を選択します。 この一覧の内容は、選択したカテゴリによって異なります。  

5.  **[演算子の選択]** ドロップダウン リストから、ユーザーまたはデバイスが要件となる規則を満たしているかを評価するために、選択された条件を指定された値と比較するのに使用される演算子を選択します。 利用可能な演算子は選択された条件によって異なります。  

6.  **[値]** フィールドには、ユーザーまたはデバイスが規則の要件を満たしているかどうかを評価する際に、選択した条件や演算子と共に使用する値を指定します。 利用可能な値は選択された条件および選択された演算子によって異なります。  

7.  **[OK]** を選択して式を保存し、**[句の追加]** ダイアログ ボックスを閉じます。  

8.  グローバル条件に句を追加し終わったら、**[OK]** を選択して **[グローバル条件の作成]** ダイアログ ボックスを閉じ、グローバル条件を保存します。  
