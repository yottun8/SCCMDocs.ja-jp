---
title: ソフトウェアの更新ポイントのインストールと構成
titleSuffix: Configuration Manager
description: プライマリ サイトでは、ソフトウェア更新プログラムのコンプライアンス対応状態を評価するためとソフトウェア更新プログラムをクライアントに展開するために、中央管理サイト上にソフトウェアの更新ポイントが必要になります。
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.date: 05/30/2017
ms.topic: conceptual
ms.prod: configuration-manager
ms.technology: configmgr-sum
ms.assetid: b099a645-6434-498f-a408-1d438e394396
ms.openlocfilehash: 2c6c397b7b790b2cecada7fc5a7811ff77ae2d07
ms.sourcegitcommit: 48098f9fb2f447672bf36d50c9f58a3d26acb9ed
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/14/2018
ms.locfileid: "53422982"
---
# <a name="install-and-configure-a-software-update-point"></a>ソフトウェアの更新ポイントのインストールと構成  

*適用対象:System Center Configuration Manager (Current Branch)*


> [!IMPORTANT]  
>  ソフトウェアの更新ポイント サイト システムの役割 (SUP) をインストールする前に、サーバーが必要な依存関係を満たしていることを確認し、サイトのソフトウェアの更新ポイントのインフラストラクチャを決定する必要があります。 ソフトウェア更新プログラムを計画する方法およびソフトウェアの更新ポイントのインフラストラクチャを決定する方法については、「[ソフトウェア更新プログラムの計画](../plan-design/plan-for-software-updates.md)」を参照してください。  

 ソフトウェア更新プログラムのコンプライアンス対応評価を有効にし、ソフトウェア更新プログラムをクライアントに展開するには、中央管理サイトとプライマリ サイトにソフトウェアの更新ポイントが必要です。 セカンダリ サイトのソフトウェアの更新ポイントは、オプションです。 ソフトウェアの更新ポイント サイト システムの役割は、WSUS がインストールされているサーバーに作成する必要があります。 ソフトウェアの更新ポイントは、ソフトウェアの更新設定を構成し、ソフトウェア更新プログラムのメタデータの同期を要求するために、WSUS サービスと通信します。 Configuration Manager 階層がある場合は、まず中央管理サイトでソフトウェアの更新ポイントのインストールと構成を行い、次に子プライマリ サイトでインストールと構成を行ってから、必要に応じてセカンダリ サイトでインストールと構成を行います。 中央管理サイトではなく、スタンドアロン プライマリ サイトがある場合は、まずプライマリ サイトでソフトウェアの更新ポイントをインストールして構成してから、オプションでセカンダリ サイトでインストールと構成を行います。 一部の設定は、ソフトウェアの更新ポイントを最上位サイトに構成するときにのみ使用できます。 ソフトウェアの更新ポイントをインストールする場所に応じて、さまざまなオプションを検討する必要があります。  

> [!IMPORTANT]  
>  1 つのサイトに複数のソフトウェアの更新ポイントをインストールできます。 インストールする最初のソフトウェアの更新ポイントは同期ソースとして構成され、更新プログラムを Microsoft Update またはアップストリームの同期ソースと同期します。 サイトの他のソフトウェアの更新ポイントは、最初のソフトウェアの更新ポイントのレプリカとして構成されます。 そのため、最初のソフトウェアの更新ポイントをインストールして構成した後で、一部の設定が使用できなくなります。  

> [!IMPORTANT]  
>  スタンドアロン WSUS サーバーとして構成され、使用されているサーバーにソフトウェアの更新ポイント サイト システムの役割をインストールすること、またはソフトウェアの更新ポイントを使用して WSUS クライアントを直接管理することは、サポートされていません。 既存の WSUS サーバーは、アクティブなソフトウェアの更新ポイントのアップストリーム同期ソースとしてのみサポートされています。 「[アップストリームのデータ ソースの場所から同期する](#BKMK_wsussync)」を参照してください。

 既存のサイト システム サーバーにソフトウェアの更新ポイント サイト システムの役割を追加できます。また、新しい役割を作成することもできます。 サイト システムの役割を追加するサイト サーバーが新規であるか既存であるかに応じて、**サイト システム サーバーの作成ウィザード**または<strong>サイト システムの役割の追加ウィザード</strong>の **[システムの役割の選択]** ページで、**[ソフトウェアの更新ポイント] を選択し、ウィザードでソフトウェア更新ポイントの設定を構成します。 設定は、使用する Configuration Manager のバージョンによって異なります。 サイト システムの役割のインストール方法の詳細については、「[サイト システムの役割のインストール](../../core/servers/deploy/configure/install-site-system-roles.md)」を参照してください。  

 サイトのソフトウェアの更新ポイントの設定の詳細については、以下のセクションを参照してください。  

## <a name="proxy-server-settings"></a>プロキシ サーバーの設定  
 使用する Configuration Manager のバージョンによって、**サイト システム サーバーの作成ウィザード** または **サイト システムの役割の追加ウィザード** のさまざまなページで、プロキシ サーバー設定を構成できます。  

-   プロキシ サーバーを構成してから、プロキシ サーバーをソフトウェア更新プログラムにいつ使用するのかを指定する必要があります。 次の設定を構成します。  

    -   ウィザードの **[プロキシ]** ページまたはサイト システムのプロパティの **[プロキシ]** タブでプロキシ サーバー設定を構成します。 プロキシ サーバー設定はサイト システムに固有のものです。つまり、指定したプロキシ サーバー設定がすべてのサイト システムの役割で使用されます。  

    -   Configuration Manager でソフトウェア更新プログラムを同期するとき、および自動展開規則に従ってコンテンツをダウンロードするときに、プロキシ サーバーを使用するかどうかを指定します。 ウィザードの **[プロキシとアカウントの設定]** ページまたは、ソフトウェアの更新ポイントのプロパティの **[プロキシとアカウントの設定]** タブで、ソフトウェア更新ポイントのプロキシ サーバー設定を構成します。  

        > [!NOTE]  
        >  [自動展開規則を使用してコンテンツをダウンロードするときにプロキシ サーバーを使用する] 設定を使用できますが、この設定はセカンダリ サイトのソフトウェアの更新ポイントには使用されません。 **** 中央管理サイトとプライマリ サイトのソフトウェアの更新ポイントのみ、Microsoft Update ページからコンテンツをダウンロードします。  

> [!IMPORTANT]  
>  既定では、自動展開ルールを実行する際、インターネットへの接続およびソフトウェア更新プログラムのダウンロードに、自動展開ルールが作成されたサーバーの **ローカル システム** アカウントを使用します。 このアカウントがインターネットにアクセスできない場合は、ソフトウェア更新はダウンロードできず、次のエントリが ruleengine.log に記録されます。**インターネットから更新プログラムをダウンロードできませんでした。Error = 12007**. ローカル システム アカウントでインターネットにアクセスできないときにプロキシ サーバーに接続するための資格情報を構成します。  


## <a name="wsus-settings"></a>WSUS の設定  
 使用する Configuration Manager のバージョンに応じて、**サイト システム サーバーの作成ウィザード** または **サイト システムの役割の追加ウィザード** のさまざまなページで、WSUS の設定を構成する必要があります。ソフトウェア更新ポイントのプロパティ ([ソフトウェアの更新ポイント コンポーネントのプロパティ]) のみで構成が必要になる場合もあります。 WSUS の設定を構成するときに、以下のセクションの情報を参照してください。  

### <a name="BKMK_wsusport"></a>WSUS ポート設定  
 ウィザードの [ソフトウェアの更新ポイント] ページまたはソフトウェアの更新ポイントのプロパティで、WSUS ポート設定を構成する必要があります。 WSUS が使用するポート設定を特定するには、次の手順に従います。  

#### <a name="to-determine-the-port-settings-used-in-iis"></a>IIS で使用されるポート設定を特定するには  

 1.  WSUS サーバーで、インターネット インフォメーション サービス (IIS) マネージャーを起動します。  

 2.  **[サイト]** を展開し、WSUS サーバーの Web サイトを右クリックして **[バインディングの編集]** をクリックします。 [サイト バインド] ダイアログ ボックスで、HTTP および HTTPS ポート値がポートコラムに表示されます。 ****


### <a name="configure-ssl-communications-to-wsus"></a>WSUS への SSL 通信の構成  
 SSL 通信の構成は、ウィザードの **[全般]** ページまたはソフトウェアの更新ポイントのプロパティの **[全般]** タブで行うことができます。  

 SSL の使用方法の詳細については、「 [SSL を使うように WSUS を構成するかどうかを決定する](../plan-design/plan-for-software-updates.md#BKMK_WSUSandSSL)」を参照してください。  

### <a name="wsus-server-connection-account"></a>WSUS サーバー接続アカウント  
 ソフトウェアの更新ポイントで実行されている WSUS にサイト サーバーが接続するときにサイト サーバーで使用するアカウントを構成できます。 このアカウントを構成しない場合は、Configuration Manager によって、サイト サーバーが WSUS に接続するときにコンピューター アカウントが使用されます。 WSUS サーバー接続アカウントの構成は、ウィザードの **[プロキシとアカウントの設定]** ページまたはソフトウェアの更新ポイントのプロパティの **[プロキシとアカウントの設定]** タブで行います。  使用する Configuration Manager のバージョンに応じて、ウィザードのさまざまな場所でこのアカウントを構成できます。  

 Configuration Manager アカウントの詳細については、「[System Center Configuration Manager で使用されるアカウント](../../core/plan-design/hierarchy/accounts.md)」を参照してください。  

## <a name="synchronization-source"></a>同期ソース  
 ソフトウェア更新プログラムの同期のアップ ストリームの同期ソースは、ウィザードの **[同期ソース]** ページ、またはソフトウェアの更新ポイント コンポーネントのプロパティの **[同期設定]** タブで構成できます。 同期ソースのオプションは、サイトによって異なります。  

 次の表に、サイトにソフトウェアの更新ポイントを構成するときに使用できるオプションを示します。  

|サイト|使用できる同期ソース オプション|  
|----------|----------------------------------------------|  
|- 中央管理サイト<br />- スタンドアロン プライマリ サイト|- Microsoft Update と同期する<br />- アップストリームのデータ ソースの場所から同期する<br />- Microsoft Update またはアップストリームのデータ ソースから同期しない|  
|- サイトの追加のソフトウェアの更新ポイント<br />- 子プライマリ サイト<br />- セカンダリ サイト|- アップストリームのデータ ソースの場所から同期する|  

 次の一覧に、同期ソースとして使用できる各オプションの詳細を示します。  

-   **Microsoft Update と同期する**:ソフトウェア更新プログラムのメタデータを Microsoft Update と同期するには、この設定を使用します。 中央管理サイトがインターネットにアクセスできる必要があります。インターネットにアクセスできない場合、同期は失敗します。 この設定は、ソフトウェアの更新ポイントを最上位サイトに構成するときにのみ使用できます。  

    > [!NOTE]  
    >  ソフトウェアの更新ポイントとインターネットの間にファイアウォールがある場合は、WSUS Web サイトに使用する HTTP ポートと HTTPS ポートを受け入れるようにファイアウォールを構成することが必要になる可能性があります。 また、ファイアウォールでのアクセスを一部のドメインに制限することもできます。 ソフトウェア更新プログラムをサポートするファイアウォールを計画する方法の詳細については、「 [Configure firewalls](../plan-design/plan-for-software-updates.md#BKMK_ConfigureFirewalls)」を参照してください。  

-   **<a name="BKMK_wsussync"></a>アップストリームのデータ ソースの場所から同期する**:ソフトウェア更新プログラムのメタデータをアップストリームの同期ソースと同期するには、この設定を使用します。 子プライマリ サイトとセカンダリ サイトは、この設定に親サイトの URL を使用するように自動的に構成されます。 ソフトウェア更新プログラムを既存の WSUS サーバーと同期することができます。 https://WSUSServer:8531 などの URL を指定します。ここで、8531 は WSUS サーバーへの接続に使用されるポートです。  

-   **Microsoft Update またはアップストリームのデータ ソースから同期しない**:最上位サイトのソフトウェアの更新ポイントがインターネットから切断されているときに、ソフトウェア更新プログラムを手動で同期するには、この設定を使用します。 詳細については、「[切断されているソフトウェアの更新ポイントからのソフトウェア更新プログラムの同期](synchronize-software-updates-disconnected.md)」を参照してください。  

> [!NOTE]  
>  ソフトウェアの更新ポイントとインターネットの間にファイアウォールがある場合は、WSUS Web サイトに使用する HTTP ポートと HTTPS ポートを受け入れるようにファイアウォールを構成することが必要になる可能性があります。 また、ファイアウォールでのアクセスを一部のドメインに制限することもできます。 ソフトウェア更新プログラムをサポートするファイアウォールを計画する方法の詳細については、「 [Configure firewalls](../plan-design/plan-for-software-updates.md#BKMK_ConfigureFirewalls)」を参照してください。  

 ウィザードの **[同期ソース]** ページまたはソフトウェアの更新ポイント コンポーネントのプロパティの **[同期設定]** タブで、WSUS レポート イベントを作成するかどうかを構成することもできます。 Configuration Manager はこれらのイベントを使用しません。したがって、通常は既定の設定、**[WSUS レポート イベントを作成しない]** を選択します。  

## <a name="synchronization-schedule"></a>同期スケジュール  
 同期スケジュールは、ウィザードの [同期スケジュール] ページまたは [ソフトウェアの更新ポイント コンポーネントのプロパティ] で構成します。 **** この設定は、最上位サイトのソフトウェアの更新ポイントにのみ構成します。  

 スケジュールを有効にすると、定期的な簡易スケジュールまたはカスタムの同期スケジュールを構成することができます。 簡易スケジュールを構成する場合、開始時刻は、Configuration Manager コンソールを実行するコンピューターのスケジュール作成時におけるローカル時刻に基づいて設定されます。 カスタム スケジュールの開始時刻を構成する場合、Configuration Manager コンソールを実行するコンピューターのローカル時刻に基づいて設定されます。  

> [!TIP]  
>  環境に合ったタイムフレームを使用して、ソフトウェア更新プログラムの同期を実行するスケジュールを設定します。 典型的なシナリオとして、毎月第 2 火曜日に実施される Microsoft のセキュリティ更新プログラムの定期リリース直後に実行されるように、ソフトウェア更新プログラムの同期スケジュールを設定するというものがあります (これは、一般的に月例パッチと呼ばれます)。 もう 1 つの典型的なシナリオは、ソフトウェア更新プログラムを使って Endpoint Protection 定義とエンジンの更新プログラムを送信するときに毎日実行されるように、ソフトウェア更新プログラムの同期スケジュールを設定するというものです。  

> [!NOTE]  
>  スケジュールに基づくソフトウェア更新プログラムの同期を有効にしない場合は、[ソフトウェア ライブラリ] ワークスペースで [すべてのソフトウェアの更新 **** ] ノードまたは [ソフトウェア更新プログラム グループ **** ] ノードを使用して、ソフトウェア更新プログラムを手動で同期させることができます。 詳細については、「[ソフトウェア更新プログラムの同期](synchronize-software-updates.md)」を参照してください。  

## <a name="supersedence-rules"></a>置き換え規則  
 ウィザードの **[置き換え規則]** ページまたはソフトウェアの更新ポイント コンポーネントのプロパティの **[置き換え規則]** タブで、置き換え設定を構成します。 置き換え規則は、最上位サイトでのみ構成できます。  

 このページで、置き換えられるソフトウェア更新プログラムが直ちに期限切れになるように指定することができます。その場合、これらのプログラムが新しい展開に含まれなくなり、また、既存の展開には、置き換えられるソフトウェア更新プログラムに期限切れのソフトウェア更新プログラムが 1 つまたは複数含まれていることを示すフラグが付けられます。 または、置き換えられるソフトウェア更新プログラムが期限切れになるまでの期間を指定することができます。その場合、これらのプログラムを引き続き展開することができます。 詳細については、「 [置き換え規則](../plan-design/plan-for-software-updates.md#BKMK_SupersedenceRules)」を参照してください。  

> [!NOTE]  
>  ウィザードの **[置き換え規則]** ページは、最初のソフトウェアの更新ポイントをサイトで構成するときにのみ使用できます。 追加のソフトウェアの更新ポイントをインストールするときには、このページは表示されません。  

## <a name="classifications"></a>分類  
 ウィザードの **[分類]** ページ、またはソフトウェアの更新ポイント コンポーネントのプロパティの **[分類]** タブで、分類設定を構成します。 ソフトウェア更新プログラムの分類の詳細については、「 [更新プログラムの分類](../plan-design/plan-for-software-updates.md#BKMK_UpdateClassifications)」を参照してください。  

> [!NOTE]  
>  ウィザードの **[分類]** ページは、最初のソフトウェアの更新ポイントをサイトで構成するときにのみ使用できます。 追加のソフトウェアの更新ポイントをインストールするときには、このページは表示されません。  

> [!TIP]  
>  最上位サイトにソフトウェアの更新ポイントを初めてインストールするときに、ソフトウェア更新プログラムのすべての分類をオフにします。 ソフトウェア更新プログラムの初回同期後に、更新された一覧から分類を構成してから、同期を再開します。 この設定は、最上位サイトのソフトウェアの更新ポイントにのみ構成します。  

## <a name="products"></a>製品  
 ウィザードの **[製品]** ページ、またはソフトウェアの更新ポイント コンポーネントのプロパティの **[製品]** タブで、製品設定を構成します。  

> [!NOTE]  
>  ウィザードの **[製品]** ページは、最初のソフトウェアの更新ポイントをサイトで構成するときにのみ使用できます。 追加のソフトウェアの更新ポイントをインストールするときには、このページは表示されません。  

> [!TIP]  
>  最上位サイトにソフトウェアの更新ポイントを初めてインストールするときに、すべての製品をオフにします。 ソフトウェア更新プログラムの初回同期後に、更新された一覧から製品を構成してから、同期を再開します。 この設定は、最上位サイトのソフトウェアの更新ポイントにのみ構成します。  

## <a name="languages"></a>言語  
 ウィザードの **[言語]** ページまたは、ソフトウェアの更新ポイント コンポーネントのプロパティの **[言語]** タブで、言語設定を構成します。 ソフトウェア更新ファイルと概要情報を同期する言語を指定します。 **[ソフトウェア更新ファイル]** 設定は、Configuration Manager 階層内の各ソフトウェアの更新ポイントで構成されます。 [概要情報] 設定は、最上位のソフトウェアの更新ポイントにのみ構成します。 **** 詳細については、「 [言語](../plan-design/plan-for-software-updates.md#BKMK_UpdateLanguages)」をご覧ください。  

> [!NOTE]  
>  ウィザードの **[言語]** ページは、ソフトウェアの更新ポイントを中央管理サイトにインストールする場合にのみ使用できます。 ソフトウェア更新ファイルの言語を子サイトで構成するには、[ソフトウェアの更新ポイント コンポーネントのプロパティ] の **[言語]** タブを使用します。  

## <a name="third-party-updates"></a>サードパーティの更新プログラム
Configuration Manager バージョン 1802 以降では、Configuration Manager クライアントのサードパーティの更新プログラムを有効にすることができます。 SUP コンポーネント プロパティでサードパーティ製のソフトウェア更新プログラムを有効にすると、SUP は、サードパーティの更新プログラムの WSUS で使用される署名証明書をダウンロードします。 このオプションをソフトウェアの更新ポイントのインストール中に利用することはできません。これは SUP のインストール後に構成する必要があります。 サードパーティの更新プログラムのクライアント設定を有効にする場合は、「[クライアント設定について](/sccm/core/clients/deploy/about-client-settings#Enable-third-party-software-updates)」の記事を参照してください。

## <a name="next-steps"></a>次のステップ
ソフトウェア更新ポイントをインストールしたとき、Configuration Manager 階層の一番上のサイトから始めました。 この記事の手順を繰り返し、子サイトでソフトウェア更新ポイントをインストールします。

ソフトウェア更新ポイントをインストールしたら、「[ソフトウェア更新プログラムの同期](synchronize-software-updates.md)」に進みます。
