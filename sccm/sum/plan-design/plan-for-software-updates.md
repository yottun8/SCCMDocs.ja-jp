---
title: ソフトウェア更新プログラムの計画
titleSuffix: Configuration Manager
description: Configuration Manager の運用環境でソフトウェア更新プログラムを使用する前に、ソフトウェアの更新ポイント インフラストラクチャを計画する必要があります。
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.date: 07/30/2018
ms.topic: conceptual
ms.prod: configuration-manager
ms.technology: configmgr-sum
ms.assetid: d071b0ec-e070-40a9-b7d4-564b92a5465f
ms.openlocfilehash: ea1225b1f7ec29d089e8991e397fbae64d5a38eb
ms.sourcegitcommit: 48098f9fb2f447672bf36d50c9f58a3d26acb9ed
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/14/2018
ms.locfileid: "53424189"
---
# <a name="plan-for-software-updates-in-configuration-manager"></a>Configuration Manager でソフトウェア更新プログラムを計画する

*適用対象:System Center Configuration Manager (Current Branch)*

Configuration Manager の運用環境でソフトウェア更新プログラムを使用する前に、計画の段階を経ることが重要です。 ソフトウェアの更新プログラムの実装を成功させるには、適切なソフトウェアの更新ポイント インフラストラクチャの計画があることが不可欠です。



## <a name="capacity-planning-recommendations-for-software-updates"></a>ソフトウェア更新プログラムの容量計画に関する推奨事項  

このセクションには次のサブトピックが含まれます。  
- [ソフトウェアの更新ポイントの容量計画](#BKMK_SUMCapacity)
- [ソフトウェア更新オブジェクトの容量計画](#bkmk_sum-capacity-obj)  


基準として次の推奨事項を使用します。 この基準は、組織に適したソフトウェア更新プログラムの容量計画の情報を特定するのに役立ちます。 実際の容量の要件は、次の条件により、この記事で挙げる推奨事項と異なる場合があります。 
- お使いの特定のネットワーク環境
- ソフトウェアの更新ポイント サイト システムをホストするために使用しているハードウェア
- 管理対象クライアントの数
- サーバーにインストールされている他のサイト システムの役割  


###  <a name="BKMK_SUMCapacity"></a> ソフトウェアの更新ポイントの容量計画  

サポートされるクライアントの数は、ソフトウェアの更新ポイントで実行されている Windows Server Update Services (WSUS) のバージョンに依存します。 また、ソフトウェアの更新ポイント サイト システムの役割が別のサイト システムの役割と共存しているかどうかによっても異なります。  

-   WSUS がソフトウェアの更新ポイント サーバー上で実行されていて、ソフトウェアの更新ポイントがその他のサイト システムの役割と共存している場合、ソフトウェアの更新ポイントは、最大で 25,000 のクライアントをサポートできます。  

-   リモート サーバーが WSUS の要件を満たしている場合、ソフトウェアの更新ポイントは最大クライアントを 150,000 までサポートできます。WSUS は Configuration Manager で使用し、次の設定を構成します。

    IIS アプリケーション プール:
    - WsusPool キューの長さを 2000 に増やす
    - WsusPool プライベート メモリの制限を 4 倍に増やすか、0 (無制限) に設定します。 たとえば、既定の制限が 1,843,200 KB の場合、7,372,800 に増やします。 詳しくは、[Configuration Manager サポート チームのブログ投稿](https://blogs.technet.microsoft.com/configurationmgr/2015/03/23/configmgr-2012-support-tip-wsus-sync-fails-with-http-503-errors/)をご覧ください。  

    ソフトウェアの更新ポイントのハードウェア要件について詳しくは、[サイト システムに推奨されるハードウェア](/sccm/core/plan-design/configs/recommended-hardware#a-namebkmkscalesiesystemsa-site-systems)に関するページをご覧ください。  


### <a name="bkmk_sum-capacity-obj"></a> ソフトウェア更新オブジェクトの容量計画  

次の容量情報を参照して、ソフトウェア更新オブジェクトの計画を立てます。  

#### <a name="limit-of-1000-software-updates-in-a-deployment"></a>展開内のソフトウェア更新プログラムの数を 1000 以下にする  
ソフトウェア更新プログラムの展開ごとのソフトウェア更新プログラムの数を 1000 以下にします。 自動展開規則 (ADR) を作成する場合、ソフトウェア更新プログラムの数を制限する条件を指定します。 指定した条件で返されるソフトウェア更新プログラムが 1,000 を超える場合、ADR は失敗します。 Configuration Manager コンソールの **[自動展開規則]** ノードで ADR の状態を確認します。 ソフトウェア更新プログラムを手動で展開する場合は、1000 を超える更新プログラムを展開対象として選択しないでください。  

また、構成基準でソフトウェア更新プログラムの数を 1000 に制限します。 詳細については、「[Create configuration baselines](/sccm/compliance/deploy-use/create-configuration-baselines)」 (構成基準を作成する) を参照してください。



##  <a name="BKMK_SUPInfrastructure"></a> ソフトウェアの更新ポイントのインフラストラクチャを決定する  

このセクションには次のサブトピックが含まれます。    
- [ソフトウェアの更新ポイントの一覧](#BKMK_SUPList)
- [ソフトウェアの更新ポイントの切り替え](#BKMK_SUPSwitching)
- [手動でのクライアントの新しいソフトウェアの更新ポイントへの切り替え](#BKMK_ManuallySwitchSUPs)
- [信頼されていないフォレストにあるソフトウェアの更新ポイント](#BKMK_SUP_CrossForest)
- [ 最上位のサイトで同期ソースとして既存の WSUS サーバーを使う](#BKMK_WSUSSyncSource)
- [セカンダリ サイト上のソフトウェアの更新ポイント](#BKMK_SUPSecSite)  
- [インターネット ベースのクライアントを計画する](#bkmk_internet-clients)  
- [ソフトウェア更新プログラムのコンテンツを計画する](#bkmk_content)  
- [サード パーティの更新プログラムを計画する](#bkmk_thirdparty)  


中央管理サイトおよびすべての子プライマリ サイトには、ソフトウェアの更新ポイントが必要です。 ソフトウェアの更新ポイントのインフラストラクチャを計画するときは、次の依存関係を決定します。
 - サイトのソフトウェアの更新ポイントをインストールする場所  
 - インター ネット ベースのクライアントからの通信を受け入れるソフトウェアの更新ポイントが必要なサイト
 - セカンダリ サイトでソフトウェア更新ポイントが必要かどうか  

> [!IMPORTANT]  
>  ソフトウェア更新プログラムに必要な内部依存関係と外部依存関係の詳細については、「[ソフトウェア更新プログラムの前提条件](prerequisites-for-software-updates.md)」を参照してください。  

フォールト トレランスを提供するには、Configuration Manager のプライマリ サイトに複数のソフトウェアの更新ポイントを追加します。 ソフトウェアの更新ポイントのフェールオーバー設計は、管理ポイントの設計で使用される純粋なランダム化モデルとは異なります。 管理ポイントの設計とは異なり、ソフトウェアの更新ポイントでは、クライアントが新しいソフトウェアの更新ポイントに切り替えるときに、クライアントとネットワーク パフォーマンスのコストが存在します。 クライアントがソフトウェア更新プログラムのスキャンのために新しい WSUS サーバーに切り替えると、結果として、カタログのサイズと、関連するクライアント側およびネットワークのパフォーマンス要求が増大します。 そのため、クライアントは、正常にスキャンした最後のソフトウェアの更新ポイントとのアフィニティを維持します。  

プライマリ サイトにインストールする最初のソフトウェアの更新ポイントは、プライマリ サイトに追加するすべての追加ソフトウェアの更新ポイントの同期ソースになります。 ソフトウェアの更新ポイントを追加して同期を開始した後、**[監視]** ワークスペースの **[ソフトウェアの更新ポイントの同期ステータス]** ノードから、ソフトウェアの更新ポイントのステータスと同期ソースを確認します。  

サイトの同期ソースとして構成されているソフトウェアの更新ポイントの障害がある場合は、障害が発生した役割を手動で削除します。 その後、同期ソースとして使用する新しいソフトウェアの更新ポイントを選択します。 詳しくは、「[ソフトウェアの更新ポイント サイト システムの役割を削除する](../get-started/remove-a-software-update-point.md)」をご覧ください。  


###  <a name="BKMK_SUPList"></a> ソフトウェアの更新ポイントの一覧  

Configuration Manager では、以下のシナリオでクライアントにソフトウェアの更新ポイントの一覧が提供されます。  

- 新しいクライアントがソフトウェア更新プログラムを有効にするポリシーを受け取るとき  

- クライアントが割り当てられているソフトウェアの更新ポイントに接続できず、別のソフトウェアの更新ポイントに切り替える必要があるとき  

クライアントは、一覧からソフトウェアの更新ポイントをランダムに選択します。 同じフォレスト内にあるソフトウェアの更新ポイントを優先します。 Configuration Manager は、クライアントの種類に応じて、異なる一覧をクライアントに提供します。  

-   **イントラネット ベースのクライアント**:イントラネットからの接続のみを受け入れるように構成できるソフトウェアの更新ポイントの一覧、または、インターネットとイントラネットのクライアントの接続を受け入れるソフトウェアの更新ポイントの一覧を受け取ります。  

-   **インターネット ベースのクライアント**:インターネットからの接続のみを受け入れるように構成したソフトウェアの更新ポイントの一覧、または、インターネットとイントラネットのクライアントの接続を受け入れるソフトウェアの更新ポイントの一覧を受け取ります。  


###  <a name="BKMK_SUPSwitching"></a> ソフトウェアの更新ポイントの切り替え  

> [!NOTE]  
> クライアントは境界グループを使用して新しいソフトウェア更新ポイントを見つけます。 現在のソフトウェアの更新ポイントにアクセスできなくなっている場合は、境界グループを使用してフォールバックし、新しい更新ポイントを検索します。 クライアントで検索できるサーバーを制御するには、ソフトウェアの更新ポイントをそれぞれ異なる境界グループに追加します。 詳しくは、「[ソフトウェアの更新ポイント](/sccm/core/servers/deploy/configure/boundary-groups#software-update-points)」をご覧ください。  

1 つのサイトに複数のソフトウェアの更新ポイントがあり、1 つでエラーが発生するか、使用不可になった場合、クライアントは、別のソフトウェアの更新ポイントに接続します。 この新しいサーバーで、クライアントは最新のソフトウェア更新プログラムのスキャンを継続します。 クライアントに最初にソフトウェアの更新ポイントが割り当てられると、スキャンが失敗しない限り、割り当てが維持されます。  

ソフトウェア更新プログラムのスキャンは、失敗して、さまざまな再試行および再試行なしのエラー コードが返されることがあります。 スキャンが失敗して、再試行エラー コードが返された場合、クライアントは、ソフトウェアの更新ポイントでソフトウェア更新プログラムをスキャンする再試行処理を開始します。 再試行エラー コードが返される状況の一般的な原因は、WSUS サーバーが利用できないか、一時的に過負荷状態になっていることです。 ソフトウェア更新プログラムのスキャンに失敗した場合、クライアントは次の処理を使用します。  

1.  クライアントはソフトウェア更新プログラムをスキャンします。  
    - スケジュールされた時刻
    - クライアントのコントロール パネルから手動で実行されたとき
    - クライアント通知アクションを使用して Configuration Manager コンソールから手動で実行されたとき
    - Configuration Manager SDK メソッドから実行されたとき  

2.  スキャンが失敗した場合、クライアントはスキャンの再試行を 30 分待機します。 同じソフトウェアの更新ポイントを使います。  

3.  クライアントは、30 分間隔で 4 回以上再試行します。 4 回目が失敗した場合、クライアントはさらに 2 分間待機して、一覧にある次のソフトウェアの更新ポイントに移動します。  

4.  クライアントは、新しいソフトウェアの更新ポイントでこの処理を繰り返します。 スキャンが成功すると、クライアントは引き続きソフトウェアの新しい更新ポイントへの接続を行います。  

ソフトウェアの更新ポイントの再試行と切り替えのシナリオで考慮する追加情報を、次の一覧に示します。  

-   クライアントがイントラネットから切断され、ソフトウェア更新プログラムのスキャンが失敗した場合、クライアントは別のソフトウェアの更新ポイントに切り替えません。 これは想定済みのエラーです。クライアントが、内部ネットワーク、または、イントラネットからの接続を受け入れるソフトウェアの更新ポイントに到達できないためです。 Configuration Manager クライアントは、イントラネットのソフトウェアの更新ポイントが利用できるかどうかを特定します。  

-   インターネット上でクライアントを管理していて、インターネット上のクライアントからの通信を受け入れるように複数のソフトウェアの更新ポイントを構成している場合、切り替え処理は前に説明した標準の再試行処理に従います。  

-   スキャン処理が開始されたが、スキャンが完了する前にクライアントの電源がオフになった場合、スキャンの失敗とは見なされず、4 回の再試行の 1 回としてカウントされません。  

Configuration Manager は、次に示す Windows Update エージェントのエラー コードのいずれかを受信すると、クライアントに接続を再試行するよう指示します。  

2149842970, 2147954429, 2149859352, 2149859362, 2149859338, 2149859344, 2147954430, 2147747475, 2149842974, 2149859342, 2149859372, 2149859341, 2149904388, 2149859371, 2149859367, 2149859366, 2149859364, 2149859363, 2149859361, 2149859360, 2149859359, 2149859358, 2149859357, 2149859356, 2149859354, 2149859353, 2149859350, 2149859349, 2149859340, 2149859339, 2149859332, 2149859333, 2149859334, 2149859337, 2149859336, 2149859335

エラー コードの意味を調べるには、10 進数のエラー コードを 16 進数のエラーコードに変換し、「[Windows Update Agent - Error Codes](https://social.technet.microsoft.com/wiki/contents/articles/15260.windows-update-agent-error-codes.aspx)」(Windows Update エージェント - エラー コード) Wiki などのサイトで 16 進数値を検索してください。たとえば、10 進数のエラー コード 2149842970 は 16 進数では 8024001A であり、WU_E_POLICY_NOT_SET (ポリシーの値が設定されていません) を意味します。  


###  <a name="BKMK_ManuallySwitchSUPs"></a> 手動でのクライアントの新しいソフトウェアの更新ポイントへの切り替え

アクティブなソフトウェアの更新ポイントに問題があるときは、構成マネージャー クライアントを新しいソフトウェアの更新ポイントに切り替えます。 この変更は、クライアントが管理ポイントから複数のソフトウェア更新ポイントを受信した場合にのみ行います。

> [!IMPORTANT]    
> 新しいサーバーを使用するようにデバイスを切り替えると、デバイスは、フォールバックを使用して、その新しいサーバーを検索します。 この変更を始める前に、境界グループ構成を調べて、ソフトウェアの更新ポイントが正しい境界グループにあることを確認します。 詳しくは、「[ソフトウェアの更新ポイント](/sccm/core/servers/deploy/configure/boundary-groups#software-update-points)」をご覧ください。  
>
> 新しいソフトウェアの更新ポイントへの切り替えにより、追加のネットワーク トラフィックが発生します。 トラフィックの量は、WSUS の構成設定 (同期の分類や製品など) または共有 WSUS データベースの使用に依存します。 複数のデバイスを切り替える場合は、メンテナンス期間中に行うようにしてください。 このタイミングであれば、クライアントが新しいソフトウェアの更新ポイントをスキャンするときのネットワークへの影響が軽減されます。  

#### <a name="process-to-switch-software-update-points"></a>ソフトウェアの更新ポイントを切り替えるプロセス  
デバイス コレクションでこの変更を開始します。 開始すると、クライアントは次のスキャンにおいて他のソフトウェア更新ポイントを探します。  

1.  Configuration Manager コンソールで、**[資産とコンプライアンス]** ワークスペースに移動して、**[デバイス コレクション]** ノードを選択します。  

2.  ターゲット コレクションを選択します。 リボンの **[ホーム]** タブの **[コレクション]** グループで、**[クライアント通知]** をクリックして、**[次のソフトウェアの更新ポイントに切り替える]** をクリックします。  


###  <a name="BKMK_SUP_CrossForest"></a> 信頼されていないフォレストにあるソフトウェアの更新ポイント  

信頼されないフォレストのクライアントをサポートする、1 つまたは複数のソフトウェアの更新ポイントをサイトに作成します。 別のフォレストにソフトウェアの更新ポイントを追加するには、最初にフォレストに WSUS サーバーをインストールして構成します。 次に、ウィザードを開始して、Configuration Manager サイト サーバーにソフトウェアの更新ポイントのサイト システムの役割を追加します。 ウィザードで、信頼されないフォレストの WSUS に正常に接続するには、次の設定を構成します。  

-   信頼されないフォレストの WSUS サーバーにアクセスできる**サイト システム インストール アカウント**を指定します。  

-   WSUS サーバーに接続するための **WSUS サーバー接続アカウント**を指定します。  

たとえば、2 つのソフトウェアの更新ポイント (SUP01 および SUP02) があるフォレスト A に、プライマリ サイトがあるとします。 また、同じプライマリ サイトのフォレスト B に、2 つのソフトウェアの更新ポイント (SUP03 および SUP04) があります。クライアントは、次のソフトウェアの更新ポイントに切り替えるとき、同じフォレストにあるサーバーを優先します。  


###  <a name="BKMK_WSUSSyncSource"></a> 最上位のサイトで同期ソースとして既存の WSUS サーバーを使う  

通常、階層内の最上位のサイトは、Microsoft Update とソフトウェア更新プログラムのメタデータを同期するように構成されています。 組織のセキュリティ ポリシーで、最上位サイトからインターネットへのアクセスが許可されていない場合は、既存の WSUS サーバーを使用するように最上位サイトの同期ソースを構成します。 この WSUS サーバーは、お使いの Configuration Manager 階層内のものではありません。 たとえば、WSUS サーバーはインターネットに接続されたネットワーク (境界ネットワーク) にあるのに対し、最上位のサイトはインターネットにアクセスできない内部ネットワークにあるものとします。 境界ネットワーク内の WSUS サーバーを、ソフトウェア更新プログラムのメタデータの同期ソースとして構成します。 Configuration Manager で必要な条件と同じ条件でソフトウェア更新プログラムを同期するように、境界ネットワーク内の WSUS サーバーを構成します。 そうしないと、最上位サイトが必要なソフトウェア更新プログラムを同期できないことがあります。 ソフトウェアの更新ポイントをインストールするときに、WSUS サーバー接続アカウントを構成します。 このアカウントは、境界ネットワーク内の WSUS サーバーにアクセスする必要があります。 また、ファイアウォールが適切なポートのトラフィックを許可することを確認します。 詳しくは、[ソフトウェアの更新ポイントから同期ソースへの接続に使うポート](/sccm/core/plan-design/hierarchy/ports#BKMK_PortsSUP-WSUS)に関する説明をご覧ください。  


###  <a name="BKMK_SUPSecSite"></a> セカンダリ サイト上のソフトウェアの更新ポイント  

セカンダリ サイトについては、ソフトウェアの更新ポイントを使用するかどうかは任意です。 セカンダリ サイトにソフトウェアの更新ポイントを 1 つだけインストールします。 ソフトウェアの更新ポイントがセカンダリ サイトにインストールされていない場合、セカンダリ サイトの境界内のデバイスは、割り当てられているプライマリ サイトのソフトウェアの更新ポイントを使います。 通常、セカンダリ サイト内のデバイスと親プライマリ サイトのソフトウェアの更新ポイントとの間のネットワーク帯域幅が限られている場合、ソフトウェアの更新ポイントをセカンダリ サイトにインストールします。 プライマリ サイトのソフトウェアの更新ポイントが容量制限に近づいているときも、この構成を使用できます。 セカンダリ サイトにソフトウェアの更新ポイントを正常にインストールして構成した後、クライアントに対してサイト全体のポリシーが更新され、新しいソフトウェアの更新ポイントの使用が開始されます。  


### <a name="bkmk_internet-clients"></a> インターネット ベースのクライアントを計画する

お使いのネットワークからインターネットにローミングするデバイスを管理する必要がある場合は、これらのデバイスでソフトウェア更新プログラムを管理する方法の計画を作成します。 Configuration Manager では、このシナリオのためにいくつかのテクノロジがサポートされています。 組織の要件を満たすように、必要に応じて 1 つまたは組み合わせを使用します。

#### <a name="cloud-management-gateway"></a>クラウド管理ゲートウェイ
Microsoft Azure でクラウド管理ゲートウェイを作成し、オンプレミスのソフトウェアの更新ポイントを 1 つ以上有効にして、インターネット ベースのクライアントからのトラフィックを許可します。 インターネットにローミングしたクライアントは、引き続きお使いのソフトウェアの更新ポイントをスキャンします。 すべてのインターネットベースのクライアントは常に、Microsoft Update クラウド サービスからコンテンツを取得します。 

詳しくは、「[クラウド管理ゲートウェイの計画](/sccm/core/clients/manage/cmg/plan-cloud-management-gateway)」をご覧ください。  

#### <a name="internet-based-client-management"></a>インターネット ベースのクライアント管理
ソフトウェアの更新ポイントをインターネットに接続するネットワークに配置し、インターネット ベースのクライアントからのトラフィックを許可するように有効にします。 インターネットにローミングしたクライアントは、このソフトウェアの更新ポイントにスキャンを切り替えます。 すべてのインターネットベースのクライアントは常に、Microsoft Update クラウド サービスからコンテンツを取得します。

インターネット ベースのクライアント管理の長所と短所について詳しくは、「[インターネット上のクライアントを管理する](/sccm/core/clients/manage/manage-clients-internet)」をご覧ください。

#### <a name="windows-update-for-business"></a>Windows Update for Business
Windows Update for Business を使用すると、最新の品質と機能の更新プログラムで Windows 10 デバイスを常に最新の状態に保つことができます。 これらのデバイスは、Windows Update クラウド サービスに直接接続します。 Configuration Manager では、WUfB を使用してソフトウェア更新プログラムを取得する Windows 10 コンピューターと、WSUS を使用して取得する Windows 10 コンピューターを区別することができます。

詳しくは、[Windows Update for Business との統合](/sccm/sum/deploy-use/integrate-windows-update-for-business-windows-10)に関するページをご覧ください。


### <a name="bkmk_content"></a> ソフトウェア更新プログラムのコンテンツを計画する

クライアントは、ソフトウェア更新プログラムをインストールするために、そのコンテンツ ファイルをダウンロードする必要があります。 Configuration Manager では、このコンテンツの管理と配信をサポートする複数のテクノロジが提供されています。 または、クライアントが Microsoft Update クラウド サービスからコンテンツを直接取得するのを許可または要求するように、ソフトウェア更新プログラムの展開を構成します。

#### <a name="download-and-distribute-content"></a>コンテンツをダウンロードして配布する 
既定では、Configuration Manager のソフトウェア更新プログラム管理プロセスでは、組み込みのコンテンツ管理機能が使用されます。 これらの機能には、集中管理された単一インスタンスのストア コンテンツ ライブラリと、配布ポイント サイト システムの役割の分散設計が含まれます。 ソフトウェア更新プログラムの展開パッケージをダウンロードして配布するときは、これらの機能を使用します。 

詳しくは、「[ソフトウェア更新プログラムのダウンロード](/sccm/sum/deploy-use/download-software-updates)」をご覧ください。

#### <a name="manage-express-installation-files-for-windows-10"></a>Windows 10 の高速インストール ファイルを管理する
Configuration Manager では Windows 10 更新プログラムに対する高速インストール ファイルの使用がサポートされています。 高速更新ファイルおよび配信の最適化などのサポート テクノロジは、大規模なコンテンツ ファイルのクライアントへのダウンロードがネットワークに与える影響を軽減するのに役立ちます。 

詳しくは、「[Windows 10 更新プログラムの配信の最適化](/sccm/sum/deploy-use/optimize-windows-10-update-delivery)」をご覧ください。

#### <a name="clients-download-content-from-the-internet"></a>クライアントがインターネットからコンテンツをダウンロードする
クライアントにソフトウェア更新プログラムを展開するときに、Microsoft Update クラウド サービスからコンテンツをダウンロードするようにクライアントに対する展開を構成します。 クライアントは、別のコンテンツ ソースからコンテンツをダウンロードできない場合でも、インターネットからコンテンツをダウンロードできます。 

バージョン 1806 以降では、ソフトウェア更新プログラムを展開するときに展開パッケージを作成する必要はありません。 **[展開パッケージなし]** オプションを選択した場合でも、クライアントは使用可能な場合はローカル ソースからコンテンツをダウンロードできますが、通常は、Microsoft Update サービスからダウンロードします。<!--1357933-->

インターネット ベースのクライアントは常に、Microsoft Update クラウド サービスからコンテンツをダウンロードします。 ソフトウェア更新プログラム展開パッケージを、クラウド配布ポイントに配布しないでください。 クラウド配布ポイントでストレージが課金されますが、クライアントはこれらのパッケージをダウンロードしません。 


### <a name="bkmk_thirdparty"></a> サード パーティの更新プログラムを計画する
Configuration Manager は WSUS と統合し、WSUS は Microsoft によって発行されたソフトウェア更新プログラムをネイティブにサポートします。 ほとんどのお客様は、やはり更新が必要な他のサード パーティ製アプリケーションを使用します。 サード パーティ製アプリケーションを最新の状態に保つために考慮すべきいくつかのオプションがあります。

#### <a name="supersede-applications-to-update"></a>アプリケーションを更新に置き換える
Configuration Manager のアプリケーション管理との置き換えリレーションシップを使用して、既存のアプリケーションのアップグレードまたは置き換えを行います。 アプリケーションを置き換える場合は、置換対象のアプリケーションの展開の種類を置き換える新しい展開の種類を指定します。 また、既存のものを置き換えるアプリケーションがインストールされる前に、新しいもので置き換えられるアプリケーションをアップグレードまたはアンインストールするかどうかを決定します。

詳しくは、「[アプリケーションを修正して置き換える](/sccm/apps/deploy-use/revise-and-supersede-applications)」をご覧ください。

#### <a name="third-party-software-updates"></a>サード パーティ製ソフトウェアの更新プログラム
バージョン 1806 以降では、Configuration Manager コンソールの **[サード パーティのソフトウェア更新プログラムのカタログ]** ノードを使用して、サード パーティのカタログをサブスクライブし、更新プログラムをソフトウェア更新ポイントに発行してからクライアントに展開します。<!--1352101-->

詳しくは、[サード パーティ製ソフトウェアの更新プログラム](/sccm/sum/deploy-use/third-party-software-updates)に関するページをご覧ください。

#### <a name="system-center-updates-publisher"></a>System Center Updates Publisher
System Center Updates Publisher (SCUP) は、独立系ソフトウェア ベンダーまたは基幹業務アプリケーション開発者によるカスタム更新プログラムの管理を可能にするスタンドアロン ツールです。 これには、ドライバーと更新プログラムのバンドルなどの依存関係のある更新プログラムが含まれています。

詳細については、「[System Center Updates Publisher](/sccm/sum/tools/updates-publisher)」を参照してください。



##  <a name="BKMK_SUPInstallation"></a> ソフトウェアの更新ポイントのインストールの計画  

このセクションには次のサブトピックが含まれます。  
- [ソフトウェアの更新ポイントの要件](#BKMK_SUPSystemRequirements)
- [WSUS インストールの計画](#BKMK_PlanningForWSUS)
- [ファイアウォールの構成](#BKMK_ConfigureFirewalls)  


このセクションでは、ソフトウェアの更新ポイントのインストールに関する計画と準備を適切に行うための手順について説明します。 Configuration Manager でソフトウェアの更新ポイントのサイト システムの役割を作成する前に、考慮すべきいくつかの要件があります。 特定の要件は、Configuration Manager インフラストラクチャに依存します。 HTTPS を使用して通信するようにソフトウェアの更新ポイントを構成する場合、このセクションを確認することが特に重要です。 HTTPS が有効なサーバーを適切に機能させるには追加の手順が必要です。  

###  <a name="BKMK_SUPSystemRequirements"></a> ソフトウェアの更新ポイントの要件  

ソフトウェアの更新ポイントの役割は、WSUS の最小要件を満たし、Configuration Manager サイト システムでサポートされている構成のサイト システムにインストールします。  

-   Windows Server での WSUS サーバーの役割の最小要件について詳しくは、「[Review considerations and system requirements](https://docs.microsoft.com/windows-server/administration/windows-server-update-services/plan/plan-your-wsus-deployment#BKMK_1.1)」(考慮事項とシステム要件を確認する) をご覧ください。  

-   Configuration Manager サイト システムでサポートされる構成の詳細については、「[Site and site system prerequisites](/sccm/core/plan-design/configs/site-and-site-system-prerequisites)」 (サイトおよびサイト システムの前提条件) を参照してください。  


###  <a name="BKMK_PlanningForWSUS"></a> WSUS インストールの計画  

ソフトウェアの更新ポイントの役割のために構成するすべてのサイト システム サーバーに、サポートされているバージョンの WSUS をインストールします。 サイト サーバーにソフトウェアの更新ポイントをインストールしない場合は、サイト サーバーに WSUS 管理コンソールをインストールします。 このコンポーネントにより、サイト サーバーはソフトウェアの更新ポイントで実行されている WSUS と通信できるようになります。  

Windows Server 2012 以降で WSUS を使う場合は、追加のアクセス許可を構成して、Configuration Manager の **WSUS Configuration Manager** コンポーネントが WSUS に接続できるようにします。 このコンポーネントは正常性チェックを定期的に実行します。 必要なアクセス許可を構成するには、次のいずれかのオプションを選択します。  

-   **WSUS 管理者** グループに **SYSTEM** アカウントを追加する  

-   WSUS データベース (SUSDB) のユーザーとして、**NT AUTHORITY\SYSTEM** アカウントを追加します。 少なくとも webService データベース ロールのメンバーシップを構成します。  
  
Windows Server に WSUS をインストールする方法について詳しくは、「[Install the WSUS Server Role](https://docs.microsoft.com/windows-server/administration/windows-server-update-services/deploy/1-install-the-wsus-server-role)」(WSUS サーバーの役割をインストールする) をご覧ください。  

プライマリ サイトに複数のソフトウェアの更新ポイントをインストールする場合、同じ Active Directory フォレストの各ソフトウェアの更新ポイントで、同じ WSUS データベースを使用します。 同じデータベースを共有すると、クライアントが新しいソフトウェアの更新ポイントに切り替えるときのパフォーマンスが向上します。 詳しくは、「[ソフトウェアの更新ポイント用に共有 WSUS データベースを使用する](/sccm/sum/plan-design/software-updates-best-practices#bkmk_shared-susdb)」をご覧ください。  


####  <a name="BKMK_CustomWebSite"></a> WSUS がカスタム Web サイトを使用するように構成する  
WSUS をインストールするときに、既存の既定の IIS Web サイトを使用するか、カスタムの WSUS Web サイトを作成するかを選択できます。 IIS が専用の仮想 Web サイトで WSUS サービスをホストするように、WSUS 用のカスタム Web サイトを作成します。 そうしないと、他の Configuration Manager サイト システムまたはアプリケーションによって使用されている同じ Web サイトが共有されます。 この構成は、特に、ソフトウェアの更新ポイントの役割をサイト サーバーにインストールする場合に必要です。 Windows Server 2012 以降で WSUS を実行する場合、WSUS は既定で HTTP にポート 8530、HTTPS にポート 8531 を使うように構成されます。 サイトにソフトウェアの更新のポイントを作成するときに、これらのポートを指定します。  


####  <a name="BKMK_WSUSInfrastructure"></a> 既存の WSUS インフラストラクチャを使う  
ソフトウェアの更新ポイントとして Configuration Manager をインストールする前に、使用する環境内で既にアクティブだった WSUS サーバーを選択します。 ソフトウェアの更新ポイントが構成されている場合、同期設定を指定します。 Configuration Manager は、ソフトウェアの更新ポイントで実行されている WSUS サーバーに接続し、同じ設定を使用して WSUS を構成します。 

ソフトウェアの更新ポイントとしてサーバーを構成する前に、製品と分類に対するその構成を、Configuration Manager の設定と比較します。 ソフトウェアの更新ポイントとして構成する前に既存の WSUS サーバーを同期し、製品と分類の一覧が異なる場合は、構成済みの設定に関係なく、ソフトウェア更新プログラムのすべてのメタデータが同期されます。 この動作により、サイト データベースに予期しないソフトウェア更新プログラムのメタデータが存在するようになります。 

製品または分類を、直接、WSUS 管理コンソールに追加して、すぐに同期を開始すると同じ動作が実行されます。 既定では、Configuration Manager は 1 時間ごとに WSUS に接続し、Configuration Manager の外部で変更されたすべての設定をリセットします。 同期設定で指定した製品と分類を満たしていないソフトウェア更新プログラムは、期限切れとして設定されます。 そしてサイト データベースから削除されます。  

WSUS サーバーがソフトウェアの更新ポイントとして構成されている場合、スタンドアロンの WSUS サーバーとして使用できなくなります。 Configuration Manager で管理されていない別のスタンドアロンの WSUS サーバーが必要な場合は、別のサーバーで構成します。  

####  <a name="BKMK_WSUSAsReplica"></a> WSUS をレプリカ サーバーとして構成する  
プライマリ サイト サーバーにソフトウェアの更新ポイントの役割を追加するときは、レプリカとして構成されている WSUS サーバーを使用できません。 WSUS サーバーがレプリカとして構成されていると、Configuration Manager で、WSUS サーバーの構成と WSUS の同期が失敗します。 プライマリ サイトにインストールする最初のソフトウェアの更新ポイントは、既定のソフトウェアの更新ポイントになります。 サイトの追加のソフトウェアの更新ポイントは、既定のソフトウェアの更新ポイントのレプリカとして構成されます。  

####  <a name="BKMK_WSUSandSSL"></a> SSL を使うように WSUS を構成するかどうかを決定する  
ソフトウェアの更新ポイントをセキュリティで保護するには、SSL プロトコルを使用します。 WSUS は、SSL を使用して、クライアント コンピューターおよび WSUS サーバーの下流 WSUS サーバーを認証します。 また、WSUS は、ソフトウェア更新プログラムのメタデータの暗号化にも SSL を使用します。 SSL を使用して WSUS を保護する場合は、ソフトウェアの更新ポイントをインストールする前に WSUS サーバーを準備します。 詳しくは、WSUS に関するドキュメントの記事「[Configure SSL on the WSUS server](https://docs.microsoft.com/windows-server/administration/windows-server-update-services/deploy/2-configure-wsus#bkmk_2.5.ConfigSSL)」(WSUS Server をSSL を構成する) をご覧ください。 

ソフトウェアの更新ポイントをインストールして構成する場合は、**WSUS サーバーの SSL 通信を有効にする**ためのオプションを選択します。 それ以外の場合、Configuration Manager は SSL を使用しないように WSUS を構成します。 ソフトウェアの更新ポイントで SSL を有効にするときは、子サイトのソフトウェアの更新ポイントも SSL を使用するように構成します。  


###  <a name="BKMK_ConfigureFirewalls"></a> ファイアウォールの構成  

Configuration Manager の中央管理サイトのソフトウェアの更新ポイントは、ソフトウェアの更新ポイントの WSUS と通信します。 WSUS は同期ソースと通信して、ソフトウェア更新プログラムのメタデータを同期します。 子サイトのソフトウェアの更新ポイントは、親サイトのソフトウェアの更新ポイントと通信します。 プライマリ サイトに複数のソフトウェアの更新ポイントが存在する場合、追加のソフトウェアの更新ポイントは既定のソフトウェアの更新ポイントと通信します。 既定の役割は、サイトにインストールされた最初のソフトウェアの更新ポイントです。  

次のシナリオで WSUS が使用する HTTP または HTTPS トラフィックを許可するように、ファイアウォールを構成することが必要な場合があります。 
- ソフトウェアの更新ポイントとインターネットの間
- ソフトウェアの更新ポイントとそのアップストリーム同期ソースとの間
- 追加のソフトウェアの更新ポイントの間  

Microsoft Update への接続は、ポート 80 を HTTP に、ポート 443 を HTTPS を使用するように常に構成されます。 子サイトのソフトウェアの更新ポイント上の WSUS から親サイトのソフトウェアの更新ポイント上の WSUS への接続には、カスタム ポートを使用します。 セキュリティ ポリシーによって接続が許可されない場合は、同期の手段としてエクスポートとインポートを使用します。 詳細については、この記事の「[同期ソース](#BKMK_SyncSource)」セクションを参照してください。 WSUS で使用されるポートについて詳しくは、[Configuration Manager で WSUS が使用するポート設定を決定する方法](../get-started/install-a-software-update-point.md#wsus-settings)に関するページをご覧ください。  


#### <a name="restrict-access-to-specific-domains"></a>特定のドメインに対するアクセスを制限する  
アクティブなソフトウェアの更新ポイントとインターネットの間のファイアウォールで、これらのポートとプロトコルをすべてのアドレスに対して開放できない場合は、WSUS と自動更新で Microsoft Update と通信できるようにするため、アクセスを次のドメインに限定します。  

-   `http://windowsupdate.microsoft.com`  

-   `http://*.windowsupdate.microsoft.com`  

-   `https://*.windowsupdate.microsoft.com`  

-   `http://*.update.microsoft.com`  

-   `https://*.update.microsoft.com`  

-   `http://*.windowsupdate.com`  

-   `http://download.windowsupdate.com`  

-   `http://download.microsoft.com`  

-   `http://*.download.windowsupdate.com`  

-   `http://test.stats.update.microsoft.com`  

-   `http://ntservicepack.microsoft.com`  

次の場合、2 つのサイト システムの間に位置するファイアウォールに、次のアドレスを追加する必要がある場合があります。 
- 子サイトにソフトウェアの更新ポイントがある場合 
- サイトにリモートのアクティブなインターネット ベースのソフトウェアの更新ポイントがある場合

  **子サイトのソフトウェアの更新ポイント**  

- `http://<FQDN for software update point on child site>`  

- `https://<FQDN for software update point on child site>`  

- `http://<FQDN for software update point on parent site>`  

- `https://<FQDN for software update point on parent site>`  



##  <a name="BKMK_SyncSettings"></a> 同期設定の計画  

このセクションには次のサブトピックが含まれます。  
- [同期ソース](#BKMK_SyncSource)
- [同期スケジュール](#BKMK_SyncSchedule)
- [更新プログラムの分類](#BKMK_UpdateClassifications)
- [製品](#BKMK_UpdateProducts)
- [置き換え規則](#BKMK_SupersedenceRules)
- [言語](#BKMK_UpdateLanguages)  


Configuration Manager でのソフトウェア更新プログラムの同期では、ユーザーが構成した条件に基づいてソフトウェア更新プログラムのメタデータがダウンロードされます。 階層の最上位サイトでは、Microsoft Update からソフトウェア更新プログラムを同期します。 最上位サイトのソフトウェアの更新ポイントを、Configuration Manager 階層内ではなく、既存の WSUS サーバーと同期するように構成できます。 子プライマリ サイトでは、ソフトウェア更新プログラムのメタデータが、中央管理サイトのソフトウェアの更新ポイントと同期されます。 ソフトウェアの更新ポイントをインストールして構成する前に、このセクションを参考にして、同期設定を計画してください。  


###  <a name="BKMK_SyncSource"></a> 同期ソース  

ソフトウェアの更新ポイントの同期ソースの設定は、ソフトウェアの更新ポイントがソフトウェア更新プログラムのメタデータを取得する場所を指定します。 また、同期プロセスが WSUS レポート イベントを生成するかどうかも指定します。  

-   **同期ソース:** 最上位サイトのソフトウェアの更新ポイントでは、既定で、Microsoft Update が同期ソースとして構成されます。 最上位サイトを既存の WSUS サーバーと同期することもできます。 子プライマリ サイトのソフトウェアの更新ポイントは、中央管理サイトのソフトウェアの更新ポイントが同期ソースとして構成されます。  

    -  プライマリ サイトにインストールする最初のソフトウェアの更新ポイントは、既定のソフトウェアの更新ポイントになり、中央管理サイトと同期されます。 プライマリ サイトの追加のソフトウェアの更新ポイントは、プライマリ サイトの既定のソフトウェアの更新ポイントと同期されます。  

    - ソフトウェアの更新ポイントが Microsoft Update またはアップストリームの更新サーバーから切断されるときは、構成された同期ソースと同期しないように同期ソースを構成します。 代わりに、**WSUSUtil** ツールのエクスポートおよびインポート機能を使用してソフトウェア更新プログラムを同期するように構成します。 詳細については、「[切断されているソフトウェアの更新ポイントからのソフトウェア更新プログラムの同期](../get-started/synchronize-software-updates-disconnected.md)」を参照してください。  

-   **WSUS レポート イベント:** クライアント コンピューターの Windows Update エージェントは、WSUS レポート用のイベント メッセージを作成できます。 これらのイベントは、Configuration Manager では使用されません。 したがって、オプション **[WSUS レポート イベントを作成しない]** が既定で選択されます。 これらのイベントが作成されていない場合、クライアントが WSUS サーバーに接続するのは、ソフトウェアの更新プログラムの評価および対応スキャンの間のみです。 Configuration Manager の外部でのレポートにこれらのイベントが必要な場合は、この設定を変更して、WSUS レポート イベントを作成します。  


###  <a name="BKMK_SyncSchedule"></a> 同期スケジュール  

Configuration Manager 階層内の最上位サイトのソフトウェアの更新ポイントでのみ、同期スケジュールを構成します。 同期スケジュールを構成すると、指定した日時に、ソフトウェアの更新ポイントが同期ソースと同期されます。 カスタム スケジュールを使用すると、ソフトウェア更新プログラムの同期を環境に最適化できます。 WSUS サーバー、サイト サーバー、ネットワークで必要なパフォーマンスを検討してください。 たとえば、毎週 1 回午前 2 時 00 分に行います。 あるいは、Configuration Manager コンソールの **[すべてのソフトウェア更新]** または **[ソフトウェア更新プログラム グループ]** ノードから、**[ソフトウェア更新プログラムの同期]** アクションを使用して、最上位サイトでの同期を手動で開始します。  

> [!TIP]  
>  環境に適した時刻を使用して、ソフトウェア更新プログラムの同期をスケジュールします。 一般的なシナリオの 1 つは、毎月第 2 火曜日にリリースされる Microsoft の定期ソフトウェア更新プログラムのすぐ後に実行されるように同期スケジュールを設定することです。 この日は、一般に "*月例パッチ*" と呼ばれます。 Configuration Manager を使用して Endpoint Protection および Windows Defender の定義とエンジンの更新プログラムを配信する場合は、毎日実行するように同期スケジュールを設定することを検討してください。  

ソフトウェアの更新ポイントは、正常に同期された後、同期要求を子サイトに送信します。 プライマリ サイトに追加のソフトウェアの更新ポイントがある場合、同期要求は各ソフトウェアの更新ポイントに送信されます。 このプロセスは階層内のすべてのサイトで繰り返されます。  


###  <a name="BKMK_UpdateClassifications"></a> 更新プログラムの分類  

すべてのソフトウェア更新プログラムは、各種の更新プログラムを整理するための更新プログラムの分類により定義されます。 同期プロセス中に、指定した分類のメタデータがサイトによって同期されます。 

Configuration Manager では、次の更新プログラムの分類の同期がサポートされています。  

-   **重要な更新**:セキュリティに関連しない重要な不具合に対処する、特定の問題を解決するために広範にリリースされる更新プログラムです。  

-   **定義ファイルの更新:** ウイルスまたはその他の定義ファイルの更新プログラムです。  

-   **Feature Pack**:製品リリースに先立って配布され、通常は次回の製品版リリースに含まれる、製品の新機能です。  

-   **セキュリティ更新プログラム:** 製品固有でセキュリティに関係する問題に対して、広範にリリースされた更新プログラムです。  

-   **Service Pack**:OS またはアプリケーションに適用される修正プログラムを累積したセットです。 これらの修正プログラムには、セキュリティの更新プログラム、重要な更新プログラム、ソフトウェア更新プログラムが含まれています。  

-   **ツール**:1 つまたは複数のタスクを完了するためのユーティリティまたは機能です。  

-   **更新プログラムのロールアップ**:容易に展開できるようにパッケージにまとめられた修正プログラムを累積したセットです。 これらの修正プログラムには、セキュリティの更新プログラム、重要な更新プログラム、ソフトウェア更新プログラムが含まれています。 更新プログラムのロールアップは、通常セキュリティまたは製品コンポーネントなど特定の領域に対応します。  

-   **更新プログラム**:現在インストールされているアプリケーションまたはファイルの更新プログラムです。  

-   **アップグレード**:Windows 10 の新しいバージョンへの機能の更新プログラムです。  

更新プログラムの分類設定は、最上位サイトでのみ構成します。 ソフトウェア更新プログラムのメタデータは、最上位サイトからレプリケートされるため、更新プログラムの分類設定は子サイトのソフトウェアの更新ポイントで構成しません。 更新プログラムの分類を選択する場合、選択する分類が多くなるほど、ソフトウェア更新プログラムのメタデータの同期に必要な時間が長くなることに注意してください。  

> [!WARNING]  
>  ベスト プラクティスとして、初めて同期する前にすべての分類を消去します。 初期同期後に、目的の分類を選択し、同期を再実行します。  


###  <a name="BKMK_UpdateProducts"></a> 製品  

各ソフトウェア更新プログラムのメタデータは、更新プログラムが適用される 1 つまたは複数の製品を定義します。 製品は、OS またはアプリケーションの特定のエディションです。 製品の例として、Microsoft Windows 10 があります。 製品ファミリは、個々の製品が派生する基礎となる OS またはアプリケーションです。 製品ファミリの例として Microsoft Windows があり、Windows 10 と Windows Server 2016 はそのメンバーです。 製品ファミリまたは製品ファミリ内の個別製品を選択します。  

ソフトウェア更新プログラムが複数の製品に適用可能な状態で、少なくとも 1 つの製品の同期を選択している場合、選択されていない製品も含めてすべての製品が Configuration Manager コンソールに表示されます。 たとえば、Windows Server 2012 製品のみを選択します。 ソフトウェア更新プログラムが Windows Server 2012 と Windows Server 2012 Datacenter Edition に適用される場合、両方の製品がサイト データベース内にあります。  

最上位サイトでのみ製品設定を構成します。 ソフトウェア更新プログラムのメタデータは、最上位サイトからレプリケートされるため、製品設定は子サイトのソフトウェアの更新ポイントで構成しません。 選択する製品が多いほど、ソフトウェア更新プログラムのメタデータの同期に必要な時間が長くなります。  

> [!IMPORTANT]  
>  Configuration Manager には、ソフトウェアの更新ポイントを初めてインストールするときに選択する製品と製品ファミリの一覧が保存されています。 Configuration Manager のリリース後にリリースされた製品と製品ファミリは、同期を完了するまで選択できない可能性があります。 同期プロセスでは、ユーザーが選択できる製品と製品ファミリの一覧が更新されます。 初めてソフトウェア更新プログラムを同期する前に、すべての製品をクリアしてください。 初期同期後に、目的の製品を選択し、同期を再実行します。  


###  <a name="BKMK_SupersedenceRules"></a> 置き換え規則  

一般的に、別のソフトウェア更新プログラムを置き換えるソフトウェア更新プログラムでは、次の 1 つまたは複数の処理を実行します。  

-   以前にリリースされた 1 つまたは複数の更新プログラムで提供された修正を強化、改善、または更新します。  

-   更新プログラムのインストールが承認された場合にクライアントにインストールされる置き換えの更新ファイル パッケージの効率性を向上させます。 たとえば、置き換えられる更新プログラムには、新しい更新プログラムでサポートされる修正やオペレーティング システムには関係のないファイルが含まれている可能性があります。 それらのファイルは、更新プログラムを置き換えるファイル パッケージには含まれません。  

-   新しいバージョンの製品を更新します。 つまり、古いバージョンまたは構成の製品には適用できなくなったバージョンを更新します。 また、言語サポートの拡張のために変更が加えられた場合に、更新プログラムによって他の更新プログラムが置き換えられることがあります。 たとえば、Microsoft Office 用の比較的新しいバージョンの製品更新プログラムにより、古い OS がサポートされなくなり、代わりに、初期更新プログラム リリースで新しい言語が追加サポートされるようになる場合があります。  

ソフトウェアの更新ポイントのプロパティで、置き換えられるソフトウェア更新プログラムがすぐに期限切れになるように指定します。 この設定により、新しい展開にそれらが含まれることを防ぎます。 また、期限切れのソフトウェア更新プログラムが含まれることを示すように、既存の展開のフラグを設定します。 または、置き換えられるソフトウェア更新プログラムが期限切れになるまでの期間を指定します。 このアクションにより、それらを引き続き展開できます。 

置き換えられるソフトウェア更新プログラムの展開が必要になる場合のシナリオとして、次のものが考えられます。  

-   置き換えるソフトウェア更新プログラムでは、OS の新しいバージョンのみがサポートされます。 一部のクライアント コンピューターでは、以前のバージョンの OS が実行されています。  

-   置き換える方のソフトウェア更新プログラムの方が、置き換えられるソフトウェア更新プログラムより適用性が制限されます。 この動作により、一部のクライアントには不適切になります。  

-   置き換える方のソフトウェア更新プログラムが稼動環境での展開に承認されていない場合。  

    > [!NOTE]  
    > Configuration Manager バージョン 1806 より前のバージョンでは、Configuration Manager で、置き換えられたソフトウェアの更新プログラムが**期限切れ**に設定されたときに、WSUS でその更新プログラムが**拒否済み**に設定されることはありません。 有効期限が切れた更新プログラムを手動でまたはカスタム スクリプトを使用して拒否しない限り、クライアントはその更新プログラムのスキャンを続行します。  Configuration Manager バージョンの 1806 以降では、Configuration Manager により WSUS で置き換えられる更新プログラムも拒否されます。 WSUS クリーンアップ タスクについて詳しくは、「[ソフトウェア更新プログラムのメンテナンス](/sccm/sum/deploy-use/software-updates-maintenance)」をご覧ください。


###  <a name="BKMK_UpdateLanguages"></a> 言語  

ソフトウェアの更新ポイントの言語設定では、次の構成が可能です。 
- 概要の詳細 (ソフトウェア更新プログラムのメタデータ) がソフトウェア更新プログラムに対して同期される言語  
- ソフトウェア更新プログラムに対してダウンロードされるソフトウェア更新ファイルの言語  

#### <a name="software-update-file"></a>ソフトウェア更新ファイル  
ソフトウェアの更新ポイントのプロパティで**ソフトウェア更新ファイル**の言語を構成します。 この設定では、サイトでソフトウェア更新プログラムをダウンロードするときに使用できる既定の言語が提供されます。 ソフトウェア更新プログラムがダウンロードまたは展開されるたびに既定で選択される言語を変更します。 ソフトウェア更新プログラム ファイルが選択した言語で使用できる場合、ダウンロード プロセスで、構成した言語のソフトウェア更新プログラム ファイルが展開パッケージのソース場所にダウンロードされます。 次に、サイト サーバーのコンテンツ ライブラリにコピーされます。 その後、そのパッケージ用に構成されている配布ポイントに配布されます。  

ソフトウェア更新ファイルの言語には、環境で最もよく使用される言語を構成してください。 たとえば、あるサイトのクライアントは、ほとんどの場合、Windows またはアプリケーションに英語と日本語を使用します。 サイトでは他にいくつかの言語が使用されています。 ソフトウェア更新プログラムをダウンロードまたは展開するときは、**[ソフトウェア更新ファイル]** 列で英語と日本語のみを選択します。 これにより、展開およびダウンロードのウィザードの **[言語の選択]** ページで既定の設定を使用できます。 また、これによって、不要な更新プログラム ファイルがダウンロードされなくなります。 Configuration Manager 階層内の各ソフトウェアの更新ポイントで、この設定を構成します。  

#### <a name="summary-details"></a>概要詳細  
同期プロセス中、概要詳細の情報 (ソフトウェア更新プログラムのメタデータ) が、指定された言語のソフトウェアの更新プログラムに対して更新されます。 メタデータは、ソフトウェア更新プログラムに関する次のような情報を提供します。
- 名前
- 説明
- 更新プログラムによってサポートされる製品
- ［更新分類］
- 項目 ID
- ダウンロード URL
- 適用性ルール

概要詳細の設定は、最上位サイトでのみ構成します。 概要情報は、子サイトのソフトウェアの更新ポイントでは構成されません。これは、ファイルベースのレプリケーションを使用して、ソフトウェア更新プログラムのメタデータが中央管理サイトからレプリケートされるためです。 概要詳細の言語を選択するときは、環境内で必要な言語のみを選択します。 選択する言語が多いほど、ソフトウェア更新プログラムのメタデータの同期に必要な時間が長くなります。 Configuration Manager では、Configuration Manager コンソールが実行されている OS のロケールのソフトウェア更新プログラムのメタデータが表示されます。 ソフトウェア更新プログラムのローカライズされたプロパティがこの OS のロケールで使用できない場合、ソフトウェア更新情報が英語で表示されます。  

> [!IMPORTANT]  
>  必要なすべての概要詳細の言語を選択します。 最上位サイトのソフトウェアの更新プログラムが同期ソースと同期すると、選択した概要詳細の言語によって、取得されるソフトウェア更新プログラムのメタデータが決まります。 同期を少なくとも 1 回実行した後に概要詳細の言語を変更すると、ソフトウェア更新プログラムのメタデータは、新しいソフトウェア更新プログラムまたは更新されたソフトウェア更新プログラムにのみ、変更された概要詳細の言語で取得されます。 既に同期されているソフトウェア更新プログラムでは、同期ソースのソフトウェア更新プログラムに変更がない限り、変更された言語の新しいメタデータは更新されません。  



##  <a name="BKMK_MaintenanceWindow"></a> ソフトウェア更新プログラムのメンテナンス期間の計画  

ソフトウェア更新プログラムのインストール専用のメンテナンス期間を追加します。 このアクションにより、一般的なメンテナンス期間と、ソフトウェア更新プログラム用のメンテナンス期間を別に構成できます。 一般的なメンテナンス期間とソフトウェア更新プログラムのメンテナンス期間の両方を構成すると、クライアントは、ソフトウェア更新プログラムのメンテナンス期間中にのみ、ソフトウェア更新プログラムをインストールします。 メンテナンス期間について詳しくは、「[メンテナンス期間を使用する方法](../../core/clients/manage/collections/use-maintenance-windows.md)」を参照してください。  



##  <a name="BKMK_RestartOptions"></a> Windows 10 クライアントにおけるソフトウェア更新プログラムのインストール後の再起動オプション

再起動の必要なソフトウェア更新プログラムが Configuration Manager を使用して展開およびインストールされると、保留中の再起動がクライアントによってスケジュールされて、再起動のダイアログ ボックスが表示されます。

Configuration Manager のソフトウェア更新プログラムに対して保留中の再起動がある場合、Windows 10 コンピューターの Windows 電源オプションでは**更新して再起動**および**更新してシャットダウン**するオプションを使用できます。 これらのオプションのいずれかを使用した場合、コンピューターの再起動後に再起動ダイアログは表示されません。



## <a name="next-steps"></a>次のステップ
ソフトウェアの更新プログラムを計画する場合、「[Prepare for software updates management](../get-started/prepare-for-software-updates-management.md)」 (ソフトウェア更新プログラムの管理の準備) を参照してください。  

サービスとしての Windows の管理について詳しくは、「[サービスとしての Configuration Manager とサービスとしての Windows の基本情報](/sccm/core/understand/configuration-manager-and-windows-as-service)」をご覧ください。
