---
title: "証明書とセキュリティ | Microsoft Docs"
description: "System Center Updates Publisher 用の証明書とセキュリティを管理する"
ms.custom: na
ms.date: 4/29/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: a7f91e63-4750-402e-9970-dd14be7f76a3
caps.latest.revision: "1"
author: Brenduns
ms.author: brenduns
manager: angrobe
robots: NOINDEX, NOFOLLOW
ms.openlocfilehash: c43af95a539a9284e4e49822b284783e02f9fa21
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2017
---
# <a name="manage-certificates-and-security-for-updates-publisher"></a>Updates Publisher 用の証明書とセキュリティを管理する

*適用対象: System Center Configuration Manager (Current Branch)*

次の手順は、更新サーバーに証明書ストアを構成するため、クライアント コンピューターで自己署名証明書を構成するため、そしてコンピューター上の Windows Update エージェントによる発行された更新プログラムのスキャンを許可するようにグループ ポリシーを構成するために役立ちます。

## <a name="configure-the-certificate-store-on-the-update-server"></a>更新サーバーに証明書ストアを構成する
 Updates Publisher は、デジタル証明書を使用して、発行するカタログ内の更新プログラムに署名します。 カタログを更新サーバーに発行するには、その前に、証明書が更新サーバー上の証明書ストアに存在する必要があり、コンピューターが更新サーバーからリモートである場合は、Updates Publisher コンピューターの証明書ストアに存在する必要があります。

次の手順は、更新サーバーの証明書ストアに証明書を追加する複数の方法のうち 1 つです。

### <a name="to-configure-the-certificate-store"></a>証明書ストアを構成するには
1.  Updates Publisher コンピューターと更新サーバーの両方にアクセスできるコンピューターで **[スタート]**、**[ファイル名を指定して実行]** の順にクリックし、テキスト ボックスに「**MMC**」と入力し、**[OK]** をクリックして Microsoft 管理コンソール (MMC) を開きます。

2.  **[ファイル]**、**[スナップインの追加と削除]**、**[追加]**、**[証明書]**、**[追加]** の順にクリックし、**[コンピューター アカウント]** を選択して **[次へ]** をクリックします。

3.  **[別のコンピューター]** を選択し、更新サーバーの名前を入力するか、**[参照]** をクリックして更新サーバーのコンピューターを検索し、**[完了]** をクリックします。**[閉じる]** をクリックしてから **[OK]** をクリックします。

4.  **[証明書 (*更新サーバー名*)**] を展開し、**[WSUS]** を展開してから **[証明書]** をクリックします。

5.  結果ウィンドウで目的の証明書を右クリックして、**[All Tasks]\(すべてのタスク)**、**[エクスポート]** の順にクリックします。

6.  証明書のエクスポート ウィザードで、既定の設定を使用して、ウィザードで指定した場所と名前で、エクスポート ファイルを作成します。 このファイルは、次の手順に進む前に、更新サーバーから利用できる必要があります。

7.  **[信頼された発行元]** を右クリックし、**[All Tasks]\(すべてのタスク)**、**[インポート]** の順にクリックします。 手順 6 でエクスポートされたファイルを使用して証明書のインポート ウィザードを完了します。

8.  **WSUS Publishers Self-signed** などの自己署名証明書を使用する場合は、**[信頼されたルート証明機関]** を右クリックし、**[All Tasks]\(すべてのタスク)**、**[インポート]** の順にクリックします。 手順 6 でエクスポートされたファイルを使用して証明書のインポート ウィザードを完了します。

9.  **[証明書 (*更新のサーバー名*) * *] を右クリックし、**[別のコンピューターに接続]** をクリックしてから Updates Publisher コンピューターのコンピューター名を入力し、**[OK]** をクリックします。

10. Updates Publisher が更新サーバーからリモートの場合は、手順 7 から 9 を繰り返して、Updates Publisher コンピューター上の証明書ストアに証明書をインポートします。



## <a name="configure-a-self-signing-certificate-on-client-computers"></a>クライアント コンピューター上で自己署名証明書を構成する
クライアント コンピューターでは、Windows Update エージェント (WUA) がカタログから更新プログラムをスキャンします。 エージェントでローカル コンピューター上の信頼された発行元ストアでデジタル証明書を見つけられない場合、このプロセスは更新プログラムをインストールできません。 更新カタログ (**WSUS Publishers Self-signed** など) の発行時に自己署名入り証明書が使用された場合、エージェントで証明書の有効性を検証できるように、ローカル コンピューターの [信頼されたルート証明機関] 証明書ストアにも証明書が存在している必要があります。

いくつかある方法のいずれかを使用して、クライアント コンピューターに証明書を構成することができます。グループ ポリシーと**証明書インポート ウィザード**を使用する方法、Certutil ツールとソフトウェアの配布を使用する方法などがあります。

クライアント コンピューターで署名証明書を構成する方法の一例を次に示してあります。

### <a name="to-configure-a-self-signing-certificate-on-client-computers"></a>クライアント コンピューター上で自己署名証明書を構成するには
1.  更新サーバーにアクセスできるコンピューターで **[スタート]**、**[ファイル名を指定して実行]** の順にクリックし、テキスト ボックスに「**MMC**」と入力し、**[OK]** をクリックして Microsoft 管理コンソール (MMC) を開きます。

2.  **[ファイル]**、**[スナップインの追加と削除]**、**[追加]**、**[証明書]**、**[追加]** の順にクリックし、**[コンピューター アカウント]** を選択して **[次へ]** をクリックします。

3.  **[別のコンピューター]** を選択し、更新サーバーの名前を入力するか、**[参照]** をクリックして更新サーバーのコンピューターを検索し、**[完了]** をクリックします。**[閉じる]** をクリックしてから **[OK]** をクリックします。

4.  **[証明書 (*更新サーバー名*)**] を展開し、**[WSUS]** を展開してから **[証明書]** をクリックします。

5.  結果ウィンドウで証明書を右クリックして、**[All Tasks]\(すべてのタスク)**、**[エクスポート]** の順にクリックします。 既定の設定を使用して**証明書のエクスポート ウィザード**を完了し、ウィザードで指定した場所と名前でエクスポート ファイルを作成します。

6.  次の方法のいずれかを使用して、WUA を使用してカタログ内の更新プログラムをスキャンする各クライアント コンピューターに、更新プログラム カタログの署名に使用した証明書を追加します。 次のようにクライアント コンピューターに証明書を追加します。

    -   自己署名証明書の場合: **[信頼されたルート証明機関]** と **[信頼された発行元]** の証明書ストアに証明書を追加します。

    -   証明機関 (CA) 発行の証明書の場合: **[信頼された発行元]** 証明書ストアに証明書を追加します。

    > [!NOTE]
    > また、WUA では、ローカル コンピューターで **[イントラネットの Microsoft 更新サービスの場所からの署名済みコンテンツを許可する]** グループ ポリシー設定が有効になっているかどうかも確認します。 Updates Publisher で作成および発行された更新プログラムをスキャンするには、WUA でこのポリシー設定が有効になっている必要があります。 このグループ ポリシー設定を有効にする方法の詳細については、「クライアント コンピュータ上でのグループ ポリシーの構成方法」 (https://technet.microsoft.com/library/bb530967.aspx(d=robot)) を参照してください。



## <a name="configuring-group-policy-to-allow-wua-on-computers-to-scan-for-published-updates"></a>コンピューター上の WUA で発行済みの更新プログラムをスキャンできるようにグループ ポリシーを構成する
コンピューター上の Windows 更新エージェント (WUA) が Updates Publisher で作成および発行された更新プログラムをスキャンする前に、イントラネットの Microsoft 更新サービスの場所からの署名済みコンテンツを許可するようにグループ ポリシー設定の 1 つを有効にする必要があります。 この設定が有効になっている場合、WUA は、ローカル コンピューターに格納されている、**[信頼される発行元]** の証明書で更新プログラムが署名されていることを条件に、イントラネット上の場所から受信した更新プログラムを受け入れます。 環境内のコンピューターでグループ ポリシーを構成する方法はいくつかあります。

ドメインに含まれていないコンピューターの場合は、イントラネットの Microsoft 更新サービスの場所からの署名済みコンテンツを許可するようにレジストリ キー設定を構成できます。

次の手順では、ドメイン上のコンピューターでグループ ポリシーを構成し、ドメイン上にないコンピューターでレジストリ キー値を構成するために使用する基本的な手順を説明します。

### <a name="to-configure-group-policy-to-allow-wua-to-scan-for-published-updates"></a>WUA で発行済みの更新プログラムをスキャンできるようにグループ ポリシーを構成するには
1.  グループ ポリシーを構成するための適切なセキュリティ権限のあるユーザーでグループ ポリシー オブジェクト エディター Microsoft 管理コンソール (MMC) スナップインを開きます。

2.  **[参照]** をクリックし、OU ドメイン、または目的のクライアント コンピューターに対して、構成されたグループ ポリシーが反映されるサイトにリンクされている GPO ドメインを選択します。 **[OK]**、**[完了]**、**[閉じる]**、**[OK]** の順にクリックします。

3.  コンソール ツリーで選択したポリシー設定を展開し、**[コンピューターの構成]**、**[管理用テンプレート]**、**[Windows コンポーネント]** の順に展開し、**[Windows Update]** をクリックします。

4.  結果ウィンドウで **[イントラネットの Microsoft 更新サービスの場所からの署名済みコンテンツを許可する]** を右クリックし、**[プロパティ]**、**[有効]**、**[OK]** の順にクリックします。
