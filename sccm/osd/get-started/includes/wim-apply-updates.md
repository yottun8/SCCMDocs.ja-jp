---
author: aczechowski
ms.author: aaroncz
ms.prod: configuration-manager
ms.topic: include
ms.date: 11/27/2018
ms.openlocfilehash: c91cf0abb8cb79fe92e34b6b234a4c8264af75ab
ms.sourcegitcommit: 6e42785c8c26e3c75bf59d3df7802194551f58e1
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/28/2018
ms.locfileid: "52456942"
---
##  <a name="BKMK_OSImagesApplyUpdates"></a> ソフトウェア更新プログラムをイメージに適用  

> [!Note]  
> このセクションは、**OS イメージ**と **OS アップグレード パッケージ**の両方に適用されます。 ここでは、Windows イメージ ファイル (WIM) を表すのに一般的な用語 "イメージ" を使用します。 これらの両方のオブジェクトには WIM が存在し、これには Windows インストール ファイルが含まれます。 ソフトウェア更新プログラムは、両方のオブジェクトでこれらのファイルに適用されます。 このプロセスの動作は、両方のオブジェクト間で同じです。  

毎月、イメージに適用できる新しいソフトウェア更新プログラムが発行されます。 ソフトウェア更新プログラムを適用するには、まず次の前提条件が必要となります。 

- ソフトウェア更新プログラムのインフラストラクチャ  
- 正常に同期されたソフトウェア更新プログラム  
- サイト サーバー上のコンテンツ ライブラリにソフトウェア更新プログラムをダウンロード済み  

詳細については、「[ソフトウェアの更新の展開方法](/sccm/sum/deploy-use/deploy-software-updates)」を参照してください。  

適用可能なソフトウェア更新プログラムを、指定したスケジュールでイメージに適用します。 このプロセスは*オフライン サービス*と呼ばれることもあります。 このスケジュールで、Configuration Manager により、選択したソフトウェア更新プログラムがイメージに適用されます。 その後、更新されたイメージを配布ポイントに再配布することもできます。 

サイト データベースには、インポート時点で適用されたソフトウェア更新プログラムなど、イメージに関する情報が保管されます。 最初の追加以降、イメージに適用したソフトウェア更新プログラムもサイト データベースに保管されます。 ソフトウェア更新プログラムを適用するウィザードを起動すると、ウィザードは、サイトでイメージにまだ適用されていない適用可能なソフトウェア更新プログラムのリストを取得します。 Configuration Manager により、サイト サーバー上のコンテンツ ライブラリから選択したソフトウェア更新プログラムがコピーされます。 その後、ソフトウェア更新プログラムがイメージに適用されます。  


### <a name="servicing-process"></a>サービス プロセス  

1.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** ワークスペースに移動し、**[オペレーティング システム]** を展開して、**[オペレーティング システム イメージ]** または **[オペレーティング システム アップグレード パッケージ]** を選択します。  

2.  ソフトウェア更新プログラムを適用するオブジェクトを選択します。  

3.  リボンで **[更新のスケジュール]** を選択して、ウィザードを起動します。  

4.  **[更新プログラムの選択]** ページで、イメージに適用するソフトウェア更新プログラムを選択します。 更新プログラムのリストがウィザードに表示されるまで、多少時間がかかる場合があります。 **[フィルター]** を使用して、メタデータ内の文字列を検索します。 **[システム アーキテクチャ]** ドロップダウン リストを使用して、**[X86]**、**[X64]**、または **[すべて]** でフィルター処理します。 リストで 1 つ、複数、またはすべての更新プログラムを選択できます。 更新プログラムの選択が完了したら、**[次へ]** を選択します。  

5.  **[スケジュールの設定]** ページで、次の設定を指定して、 **[次へ]** をクリックします。  

    a.  **スケジュール**: サイトでソフトウェア更新プログラムをイメージに適用するスケジュールを指定します。  

    b.  **エラー時に続行する**: このオプションを選択すると、エラーが発生した場合でも、イメージにソフトウェア更新プログラムがそのまま適用されます。  

    c.  **イメージを使用して配布ポイントを更新する**: このオプションを選択すると、サイトでソフトウェア更新プログラムが適用された後、配布ポイントのイメージが更新されます。  

6.  [更新のスケジュール] ウィザードを完了します。  

> [!NOTE]  
>  ペイロードのサイズを最小限に抑えるために、OS アップグレード パッケージと OS イメージのサービス提供では古いバージョンが削除されます。  


### <a name="servicing-operations"></a>サービス操作

Configuration Manager コンソールの **[OS イメージ]** ノードまたは **[OS アップグレード パッケージ]** ノードで、ビューに次の列を追加します。
- **スケジュールされた更新日**: このプロパティは、次回の定義済みスケジュールを表示します。  
- **スケジュールされた更新のステータス** : このプロパティは、ステータスを表示します。 たとえば、**[成功]** や **[進行中]** などです。  

特定のイメージ オブジェクトを選択し、詳細ウィンドウの **[更新状態]** タブに切り替えます。 このタブには、イメージの更新プログラムのリストが表示されます。 

特定のイメージ オブジェクトを選択し、リボンで **[プロパティ]** を選択します。 **[インストールされた更新プログラム]** タブには、イメージの更新プログラムのリストが表示されます。 **[サービス]** タブは、現在のサービスのスケジュールと、適用するようスケジュールした更新プログラムの読み取り専用ビューです。 

ステータスが **[進行中]** の場合は、リボンで **[スケジュールされた更新の取り消し]** を選択できます。 このアクションは、アクティブなサービス プロセスをキャンセルします。 

このプロセスをトラブルシューティングするには、サイト サーバー上の **OfflineServicingMgr.log** ファイルと **dism.log** ファイルを確認します。 詳細については、[ログ ファイル](/sccm/core/plan-design/hierarchy/log-files)に関するページを参照してください。


### <a name="bkmk_servicing-drive"></a> オフライン OS イメージ サービス用のドライブを指定する  
<!--1358924-->

バージョン 1810 以降では、OS イメージのオフライン サービス中に Configuration Manager が使用するドライブを指定します。 このプロセスは、一時ファイルで大量のディスク領域を使用する可能性があります。 このオプションにより、使用するドライブを柔軟に選択できます。 

1. Configuration Manager コンソールで、**[管理]** ワークスペースに移動し、**[サイトの構成]** を展開して **[サイト]** ノードを選択します。 リボンで **[サイト コンポーネントの構成]** をクリックし、**[オペレーティング システムの展開]** を選択します。  

2. **[オフライン サービス]** タブで、**[イメージのオフライン サービスで使用するローカル ドライブ]** のオプションを指定します。  

この設定の既定値は **[自動]** です。 この値では、Configuration Manager がインストール対象のドライブを選択します。 

サイト サーバー上に存在しないドライブを選択すると、Configuration Manager は、**[自動]** を選択した場合と同じ動作をします。 

オフライン サービス中、Configuration Manager は一時ファイルをフォルダー `<drive>:\ConfigMgr_OfflineImageServicing` に格納します。 また、このフォルダー内の OS イメージをマウントします。 

