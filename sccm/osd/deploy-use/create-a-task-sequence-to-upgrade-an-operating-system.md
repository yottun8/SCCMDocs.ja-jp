---
title: "オペレーティング システムをアップグレードするタスク シーケンスの作成 | Microsoft Docs"
description: "System Center Configuration Manager のタスク シーケンスで、オペレーティング システムを Windows 7 以降から Windows 10 に自動的にアップグレードできます。"
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
- configmgr-osd
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 7591e386-a9ab-4640-8643-332dce5aa006
caps.latest.revision: 12
author: Dougeby
ms.author: dougeby
manager: angrobe
translationtype: Human Translation
ms.sourcegitcommit: 74341fb60bf9ccbc8822e390bd34f9eda58b4bda
ms.openlocfilehash: 32af7da62bfe767a21a891338bd778ebf45f2685


---
# <a name="create-a-task-sequence-to-upgrade-an-operating-system-in-system-center-configuration-manager"></a>System Center Configuration Manager のオペレーティング システムをアップグレードするタスク シーケンスを作成する

*適用対象: System Center Configuration Manager (Current Branch)*

System Center Configuration Manager でタスク シーケンスを使用して、対象のコンピューターでオペレーティング システムを Windows 7 以降から Windows 10 に自動的にアップグレードします。 セットアップ先のコンピューターにインストールするオペレーティング システム イメージと、他に追加でインストールするコンテンツ (アプリケーションやソフトウェア更新プログラムなど) を参照するタスク シーケンスを作成します。 オペレーティング システムをアップグレードするタスク シーケンスは、「[Windows を最新バージョンにアップグレードする](upgrade-windows-to-the-latest-version.md)」シナリオの一部です。  

##  <a name="a-namebkmkupgradeosa-create-a-task-sequence-to-upgrade-an-operating-system"></a><a name="BKMK_UpgradeOS"></a> オペレーティング システムをアップグレードするタスク シーケンスの作成  
 コンピューター上のオペレーティング システムを Windows 10 にアップグレードするには、タスク シーケンスを作成し、タスク シーケンスの作成ウィザードで **[オペレーティング システムをアップグレード パッケージからアップグレードする]** を選択します。 ウィザードにより、オペレーティング システムのアップグレード、ソフトウェア更新プログラムの適用、アプリケーションのインストールの各手順が追加されます。 タスク シーケンスを作成する前に、以下の点を確認しておく必要があります。  

-   **必須**  

     - Windows 10 [オペレーティング システムのアップグレード パッケージ](../get-started/manage-operating-system-upgrade-packages.md) が Configuration Manager コンソールで使用可能である必要があります。  

-   **必須 (使用する場合)**  

    -   [ソフトウェア更新プログラム](../../sum/get-started/synchronize-software-updates.md)が Configuration Manager コンソールで同期されている必要があります。  

    -   [アプリケーション](../../apps/deploy-use/create-applications.md)が Configuration Manager コンソールに追加されている必要があります。  

#### <a name="to-create-a-task-sequence-that-upgrades-an-operating-system"></a>オペレーティング システムをアップグレードするタスク シーケンスを作成するには  

1.  Configuration Manager コンソールで、[ソフトウェア ライブラリ] ****をクリックします。  

2.  [ **ソフトウェア ライブラリ** ] ワークスペースで [ **オペレーティング システム**] を展開して、[ **タスク シーケンス**] をクリックします。  

3.  [ホーム **** ] タブの [作成 **** ] グループで [タスク シーケンスの作成 **** ] をクリックして、タスク シーケンスの作成ウィザードを起動します。  

4.  **[新しいタスク シーケンスの作成]** ページで、 **[オペレーティング システムをアップグレード パッケージからアップグレードする]**をクリックしてから、 **[次へ]**をクリックします。  

5.  [タスク シーケンス情報 **** ] ページで次の設定を指定し、[次へ ****] をクリックします。  

    -   **タスク シーケンス名**:タスク シーケンスを識別する名前を指定します。  

    -   **説明**: タスク シーケンスによって実行されるタスクの説明を指定します。  

6.  **[Windows オペレーティング システムのアップグレード]** ページで次の設定を指定し、 **[次へ]**をクリックします。  

    -   **[アップグレード パッケージ]**: オペレーティング システムのアップグレードのソース ファイルを含むアップグレード パッケージを指定します。 **[プロパティ]** ウィンドウの情報を参照して、正しいアップグレード パッケージが選択されていることを確認できます。 詳細については、「[オペレーティング システムのアップグレード パッケージの管理](../get-started/manage-operating-system-upgrade-packages.md)」を参照してください。  

    -   **[エディション インデックス]**: 複数のオペレーティング システムのエディション インデックスをパッケージから入手できる場合、希望のエディション インデックスを選択します。 既定では、最初の項目が選択されています。  

    -   **プロダクト キー**: インストールする Windows オペレーティング システムのプロダクト キーを指定します。 エンコードされたボリューム ライセンス キーと標準のプロダクト キーを指定できます。 エンコードされていないプロダクト キーを使用する場合は、5 桁ごとにハイフン (-) で区切る必要があります。 例: *XXXXX-XXXXX-XXXXX-XXXXX-XXXXX* ボリューム ライセンス版のアップグレードの場合は、プロダクト キーは必要ありません。 製品版の Windows のアップグレードの場合のみ、プロダクト キーが必要です。  

7.  [更新プログラムを含める] **** ページで、必要なソフトウェア更新プログラム、すべてのソフトウェア更新プログラム、またはソフトウェア更新プログラムなしを指定してから、[次へ] ****をクリックします。 ソフトウェア更新プログラムをインストールするように指定する場合、Configuration Manager は、セットアップ先のコンピューターがメンバーとなっているコレクション向けのソフトウェア更新プログラムのみをインストールします。  

8.  [アプリケーションのインストール] **** ページで、展開先コンピューターにインストールするアプリケーションを指定してから、[次へ] ****をクリックします。 複数のアプリケーションを指定する場合は、特定のアプリケーションのインストールに失敗したときにタスク シーケンスを続行するかどうかも指定することができます。  

9. ウィザードを完了します。  

## <a name="download-package-content-task-sequence-step"></a>パッケージ コンテンツのダウンロードのタスク シーケンスのステップ  
 以下のシナリオでは、**オペレーティング システムのアップグレード**のステップの前に、[パッケージ コンテンツのダウンロード](../understand/task-sequence-steps.md#BKMK_DownloadPackageContent)のステップを使用できます。  

-   X86 と x64 の両方のプラットフォームで動作する 1 つのアップグレード タスク シーケンスを使用します。 これを行うには、クライアント アーキテクチャを検出して、該当するオペレーティング システム アップグレード パッケージのみをダウンロードする条件を含む **[アップグレードの準備]** グループに、2 つの **[パッケージ コンテンツのダウンロード]** ステップを追加します。 同じ変数を使用するようにそれぞれの **[パッケージ コンテンツのダウンロード]** ステップを構成して、 **[オペレーティング システムのアップグレード]** ステップ上のメディア パスにその変数を使用します。  

-   該当するドライバー パッケージを動的にダウンロードするには、ドライバー パッケージごとに適切なハードウェアの種類を検出する条件を含む 2 つの **[パッケージ コンテンツのダウンロード]** ステップを使用します。 同じ変数を使用するようにそれぞれの **[パッケージ コンテンツのダウンロード]** ステップを構成し、 **[オペレーティング システムのアップグレード]** ステップのドライバー セクションの **[ステージング済みコンテンツ]** 値に変数を使用します。  

   > [!NOTE]
   > 複数のパッケージがある場合は、Configuration Manager によって、数字のサフィックスが変数名に追加されます。 たとえば、%mycontent% という変数をカスタム変数として指定した場合に、この変数名は、参照コンテンツがすべて格納されているルートになります (複数のパッケージを指定できます)。 これは、オペレーティング システムのアップグレードなどのサブシーケンス ステップで変数を参照するときに、数字のサフィックスと共に使用されます。 この例では、%mycontent01% または %mycontent02% のようになります。各変数の数字は、このステップのパッケージの表示順序に対応しています。

## <a name="optional-post-processing-task-sequence-steps"></a>オプションの後処理のタスク シーケンスのステップ  
 タスク シーケンスが作成されたら、互換性の問題があることがわかっているアプリケーションをアンインストールするステップを追加するか、コンピューターが再起動して Windows 10 へのアップグレードが成功した後に実行する後処理操作を追加することができます。 これらの追加ステップを、後処理のタスク シーケンスのグループに追加します。  

> [!NOTE]  
>  このタスク シーケンスは線形ではないため、クライアント コンピューターを正常にアップグレードできるかどうかや、クライアント コンピューターを起動時のオペレーティング システムのバージョンにロールバックする必要があるかどうかに応じて、ステップには条件が課され、それらはタスク シーケンスの結果に影響を与える可能性があります。  

## <a name="optional-rollback-task-sequence-steps"></a>オプションのロールバックのタスク シーケンスのステップ  
 コンピューターの再起動後にアップグレード プロセスで問題が生じると、セットアップはアップグレードを前のオペレーティング システムにロールバックし、タスク シーケンスはロールバック グループのステップを続行します。 タスク シーケンスの作成後、ロールバック グループにオプションのステップを追加することができます。  

## <a name="folder-and-files-removed-after-computer-restart"></a>コンピューターの再起動後に削除されるフォルダーとファイル  
 オペレーティング システムを Windows 10 にアップグレードするタスク シーケンスとタスク シーケンス内の他のすべてのステップが完了すると、後処理およびロールバックのスクリプトはコンピューターを再起動するまで削除されません。  これらのスクリプト ファイルには、機密情報は含めないでください。  



<!--HONumber=Dec16_HO3-->


