---
title: Windows To Go を展開する
titleSuffix: Configuration Manager
description: System Center Configuration Manager で Windows To Go をプロビジョニングして、外部ドライブから起動する Windows To Go ワークスペースを作成する方法について説明します。
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.technology: configmgr-osd
ms.topic: conceptual
ms.assetid: 8eed50f5-80a4-422e-8aa6-a7ccb2171475
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 162fbdeb08e345ecea20a58b3f5a95a8da193898
ms.sourcegitcommit: 48098f9fb2f447672bf36d50c9f58a3d26acb9ed
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/14/2018
ms.locfileid: "53415111"
---
# <a name="deploy-windows-to-go-with-system-center-configuration-manager"></a>System Center Configuration Manager を使用して Windows To Go を展開する

「オブジェクトの*適用対象: System Center Configuration Manager (Current Branch)*

このトピックでは、System Center Configuration Manager で Windows To Go をプロビジョニングする手順について説明します。 Windows To Go は Windows 8 のエンタープライズ機能で、コンピューターに USB 接続された外部ドライブからブート可能な Windows To Go ワークスペースを作成できます。コンピューターは、Windows 7 または Windows 8 の認定要件を満たしている必要がありますが、コンピューターで実行されているオペレーティング システムは問いません。 Windows To Go では、企業のデスクトップ コンピューターとノート パソコンで使用しているものと同じイメージを使用でき、同じ方法で管理できます。  

 Windows To Go の詳細については、「[Windows To Go: 機能の概要](http://go.microsoft.com/fwlink/p/?LinkId=263433)」をご覧ください。  

## <a name="provision-windows-to-go"></a>Windows To Go の準備  
 Windows To Go は、USB 接続の外部ドライブに保存されるオペレーティング システムです。 Windows To Go ドライブは、その他のオペレーティング システムの展開と同じようにプロビジョニングできます。 ただし、Windows To Go はユーザー中心のモバイルに特化したソリューションとして設計されているため、ドライブをプロビジョニングするには、少し異なる方法で行う必要があります。  

 全体として Windows To Go は 2 段階の展開で、Windows To Go デバイスを構成して、オペレーティング システムの展開に必要なコンテンツを事前設定できます。 展開では、ユーザーへの影響は最小限に抑えられ、ユーザーのコンピューターのダウンタイムも短時間で済みます。 コンピューターを事前設定した後で、ユーザーがコンピューターを使用できるようにするために、プロビジョニング プロセスを完了する必要があります。 プロビジョニング プロセスは、現在のオペレーティング システムの展開プロセスと同様です。 コンテンツの事前準備と Windows To Go のプロビジョニングの全般的なワークフローは、次のとおりです。  

1.  [Windows To Go のプロビジョニングの前提条件](#BKMK_Prereqs)  

2.  [事前設定されたメディアの作成](#BKMK_CreatePrestagedMedia)  

3.  [Windows To Go Creator パッケージの作成](#BKMK_CreatePackage)  

4.  [Windows To Go で BitLocker を有効にするタスク シーケンスの更新](#BKMK_UpdateTaskSequence)  

5.  [Windows To Go Creator パッケージとタスク シーケンスの展開](#BKMK_Deployments)  

6.  [ユーザーによる Windows To Go Creator の実行](#BKMK_UserExperience)  

7.  [Configuration Manager による Windows To Go ドライブの構成とステージング](#BKMK_ConfigureStageDrive)  

8.  [ユーザーによる Windows 8 へのログイン](#BKMK_UserLogsIn)  

###  <a name="BKMK_Prereqs"></a> Windows To Go のプロビジョニングの前提条件  
 Windows To Go をプロビジョニングする前に、Configuration Manager で次の手順を完了する必要があります。  

-   **配布ポイントへのブート イメージの配布**  

     事前設定されたメディアを作成する前に、ブート イメージを配布ポイントに配布する必要があります。  

    > [!NOTE]  
    >  ブート イメージは、Configuration Manager 環境の対象コンピューターにオペレーティング システムをインストールするために使用されます。 ブート イメージには、オペレーティング システムをインストールするバージョンの Windows PE、およびその他の必要なデバイス ドライバーが含まれています。 Configuration Manager には、x86 プラットフォームをサポートするブート イメージと x64 プラットフォームをサポートするブート イメージの、2 つのブート イメージが用意されています。 独自のブート イメージを作成することもできます。 詳細については、「[ブート イメージの管理](../get-started/manage-boot-images.md)」をご覧ください。  

-   **配布ポイントへの Windows 8 オペレーティング システム イメージの配布**  

     事前設定されたメディアを作成する前に、Windows 8 オペレーティング システム イメージを配布ポイントに配布する必要があります。  

    > [!NOTE]  
    >  オペレーティング システム イメージは、.WIM 形式のファイルで、コンピューターにオペレーティング システムを正常にインストールして構成するのに必要な参照ファイルおよびフォルダーのコレクションを圧縮したものです。 詳細については、「[オペレーティング システム イメージの管理](../get-started/manage-operating-system-images.md)」をご覧ください。  

-   **Windows 8 を展開するためのタスク シーケンスの作成**  

     事前設定されたメディアを作成するときに参照する、Windows 8 展開用のタスク シーケンスを作成する必要があります。 詳細については、「[タスクを自動化するためのタスク シーケンスの管理](manage-task-sequences-to-automate-tasks.md)」をご覧ください。  

###  <a name="BKMK_CreatePrestagedMedia"></a> 事前設定されたメディアの作成  
 事前設定されたメディアには展開先のコンピューターを起動するのに使用するブート イメージと、展開先のコンピューターに適用されるオペレーティング システム イメージを含んでいます。 事前設定されたメディアを使用してプロビジョニングしたコンピューターは、ブート イメージを使用して起動できます。 その後、コンピューターで既存のオペレーティング システムの展開タスク シーケンスを実行して、オペレーティング システムの展開を完了させることができます。 オペレーティング システムを展開するタスク シーケンスはメディアに含まれていません。  

 事前設定段階で、オペレーティング システム イメージとブート イメージに加えて、アプリケーションやデバイス ドライバーなどのコンテンツを追加できます。 事前にドライブにコンテンツを配置できるため、オペレーティング システムの展開にかかる時間を短縮し、ネットワーク トラフィックを低減できます。  

 事前設定メディアを作成するには、次の手順に従います。  

#### <a name="to-create-prestaged-media"></a>事前設定メディアを作成するには  

1. Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

2. **[ソフトウェア ライブラリ]** ワークスペースで **[オペレーティング システム]** を展開して、**[タスク シーケンス]** をクリックします。  

3. **[ホーム]** タブの **[作成]** グループで **[タスク シーケンス メディアの作成]** をクリックして、タスク シーケンス メディアの作成ウィザードを起動します。  

4. **[メディアの種類の選択]** ページで、次の情報を指定してから、**[次へ]** をクリックします。  

   -   **[事前設定されたメディア]** を選択します。  

   -   ユーザーの操作なしで Windows To Go 展開をブートするには、**[オペレーティング システムの無人展開を許可する]** を選択します。  

       > [!IMPORTANT]  
       >  SMSTSPreferredAdvertID カスタム変数 (この手順の後述の項を参照) を指定して、このオプションを使用する場合、ユーザー操作は必要なく、Windows To Go ドライブを検出すると、コンピューターは自動的に Windows To Go 展開をブートします。 ただし、メディアでパスワード保護が構成されている場合、ユーザーは、パスワードの入力を求められます。 SMSTSPreferredAdvertID 変数を構成せずに **[オペレーティング システムの無人展開を許可する]** 設定を使用すると、タスク シーケンスを展開するときにエラーが発生します。  

5. **[メディアの管理]** ページで、次の情報を指定してから、**[次へ]** をクリックします。  

   -   サイト境界内のクライアントの場所に基づいて、ある管理ポイントから別の管理ポイントにメディアをリダイレクトできるようにする場合は、**[動的メディア]** を選択します。  

   -   指定の管理ポイントにのみメディアを接続する必要がある場合は、**[サイトベースのメディア]** を選択します。  

6. **[メディアのプロパティ]** ページで、次の情報を指定してから、**[次へ]** をクリックします。  

   -   **作成者**: メディアの作成者を指定します。  

   -   **バージョン**: メディアのバージョン番号を指定します。  

   -   **コメント**: メディアの用途に関する一意の説明を指定します。  

   -   **メディア ファイル**:出力ファイルの名前とパスを指定します。 この場所に出力ファイルが書き込まれます。 例: **\\\servername\folder\outputfile.wim**  

7. **[セキュリティ]** ページで、以下の情報を指定してから、**[次へ]** をクリックします。  

   -   メディアが Configuration Manager で管理されていないコンピューターにオペレーティング システムを展開できるようにするには、**[不明なコンピューターのサポートを有効にする]** をオンにします。 これらのコンピューターのレコードは Configuration Manager データベースには存在しません。 不明なコンピューターには次のようなものがあります。  

       -   Configuration Manager クライアントがインストールされていないコンピューター  

       -   Configuration Manager にインポートされていないコンピューター  

       -   Configuration Manager で検出されていないコンピューター  

   -   承認されていないアクセスからメディアを保護するには、**[パスワードでメディアを保護する]** を選択して、強力なパスワードを入力します。 パスワードを指定した場合、ユーザーは、事前設定メディアを使用するにはパスワードを入力する必要があります。  

       > [!IMPORTANT]  
       >  セキュリティ運用方法として、事前設定メディアを保護するために、常にパスワードを指定することをお勧めします。  

       > [!NOTE]  
       >  事前設定されたメディアをパスワードで保護する場合、メディアで **[オペレーティング システムの無人展開を許可する]** 設定が構成されていても、ユーザーは、パスワードの入力を求められます。  

   -   HTTP 接続用には、**[自己署名入りメディア証明書を作成する]** を選択し、証明書の開始日と有効期限を指定します。  

   -   HTTPS 接続用には、**[PKI 証明書のインポート]** を選択し、インポートする証明書とそのパスワードを指定します。  

        ブート イメージで使用される、このクライアント証明書の詳細については、[PKI 証明書の要件](../../core/plan-design/network/pki-certificate-requirements.md)を参照してください。  

   -   **ユーザーとデバイスのアフィニティ**: Configuration Manager でユーザー中心の管理をサポートするため、ユーザーと対象コンピューターをメディアによって関連付ける方法を指定します。 オペレーティング システムの展開でユーザーとデバイスのアフィニティをサポートする方法については、「[展開先のコンピューターにユーザーを関連付ける](../get-started/associate-users-with-a-destination-computer.md)」をご覧ください。  

       -   メディアがユーザーと対象コンピューターを自動的に関連付けるようにするには、**[ユーザーとデバイスのアフィニティを自動的に承認する]** を選択します。 この機能は、オペレーティング システムを展開するタスク シーケンスのアクションに基づきます。 このシナリオでは、タスク シーケンスが、対象コンピューターにオペレーティング システムを展開するときに、指定のユーザーと対象コンピューターの関係を作成します。  

       -   メディアが承認を待ってユーザーと対象コンピューターを関連付けるようにするには、**[ユーザーとデバイスのアフィニティを管理者の承認待ちにする]** を選択します。 この機能は、オペレーティング システムを展開するタスク シーケンスのスコープに基づきます。 このシナリオでは、タスク シーケンスは、指定のユーザーと対象コンピューターの関係を作成しますが、オペレーティング システムを展開する前に管理ユーザーからの承認を待機します。  

       -   メディアがユーザーと対象コンピューターを関連付けないようにするには、**[ユーザーとデバイスのアフィニティを許可しない]** を選択します。 このシナリオでは、タスク シーケンスは、オペレーティング システムを展開するときにユーザーと対象コンピューターを関連付けません。  

8. **[タスク シーケンス]** ページで、前のセクションで作成した Windows 8 タスク シーケンスを指定します。  

9. **[ブート イメージ]** ページで次の情報を指定し、**[次へ]** をクリックします。  

    > [!IMPORTANT]  
    >  配布されているブート イメージのアーキテクチャが、対象コンピューターのアーキテクチャに適切である必要があります。 たとえば、x64 のコンピューターでは、x86 または x64 のブート イメージを起動して実行できます。 ただし、x86 のコンピューターで起動して実行できるのは、x86 ブート イメージのみです。 EFI モードの Windows 8 認定コンピューターでは、x64 ブート イメージを使用する必要があります。  

    -   **ブート イメージ**: 対象コンピューターを起動するブート イメージを指定します。  

    -   **配布ポイント**: ブート イメージをホストする配布ポイントを指定します。 配布ポイントからブート イメージが取得されてメディアに書き込まれます。  

        > [!NOTE]  
        >  管理ユーザーは、配布ポイントのブート イメージ コンテンツの **読み取り** アクセス権を持っている必要があります。 詳細については、「[パッケージ アクセス アカウント](/sccm/core/plan-design/hierarchy/accounts#package-access-account)」をご覧ください。  

    -   このウィザードの **[メディア管理]** ページで **[サイトベースのメディア]** を選択した場合、**[管理ポイント]** ボックスで、プライマリ サイトの管理ポイントを指定します。  

    -   ウィザードの **[メディア管理]** ページで **[動的メディア]** を選択した場合、**[関連付けられている管理ポイント]** ボックスで、使用するプライマリ サイトの管理ポイントと、初期通信での優先順位を指定します。  

10. **[イメージ]** ページで、次の情報を指定してから、**[次へ]** をクリックします。  

    -   **イメージ パッケージ**: Windows 8 オペレーティング システム イメージが格納されたパッケージを指定します。  

    -   **イメージのインデックス**: パッケージに複数のオペレーティング システム イメージが含まれている場合、展開するイメージを指定します。  

    -   **配布ポイント**: オペレーティング システムのブート イメージをホストする配布ポイントを指定します。 ウィザードにより、配布ポイントからオペレーティング システム イメージが取得されてメディアに書き込まれます。  

        > [!NOTE]  
        >  管理ユーザーは、配布ポイントのオペレーティング システム イメージ コンテンツの **読み取り** アクセス権を持っている必要があります。 詳細については、「[パッケージ アクセス アカウント](/sccm/core/plan-design/hierarchy/accounts#package-access-account)」をご覧ください。  

11. **[アプリケーションの選択]** ページで、メディア ファイルに含めるアプリケーション コンテンツを選択して、**[次へ]** をクリックします。  

12. **[パッケージの選択]** ページで、メディア ファイルに含める追加のパッケージ コンテンツを選択して、**[次へ]** をクリックします。  

13. **[ドライバー パッケージの選択]** ページで、メディア ファイルに含めるドライバー パッケージ コンテンツを選択して、**[次へ]** をクリックします。  

14. **[配布ポイント]** ページで、タスク シーケンスに必要なコンテンツがある配布ポイントを 1 つまたは複数選択し、**[次へ]** をクリックします。  

15. **[カスタマイズ]** ページで、次の情報を指定して **[次へ]** をクリックします。  

    - **変数**: オペレーティング システムを展開するためにタスク シーケンスで使用する変数を指定します。 Windows To Go で、自動的に Windows To Go 展開を選択するには、次の形式で SMSTSPreferredAdvertID 変数を使用します。  

       SMSTSPreferredAdvertID = {*DeploymentID*}。DeploymentID は、Windows To Go ドライブのプロビジョニング プロセスを完了するために使用するタスク シーケンスに関連付けられている展開 ID です。  

      > [!TIP]  
      >  無人実行 (この手順の後述の項を参照) を設定したタスク シーケンスを指定して、この変数を使用する場合、ユーザー操作は必要なく、Windows To Go ドライブを検出すると、コンピューターは自動的に Windows To Go 展開をブートします。 ただし、メディアでパスワード保護が構成されている場合、ユーザーは、パスワードの入力を求められます。  

    - **起動前コマンド**: タスク シーケンスを実行する前に実行する起動前コマンドを指定します。 起動前コマンドはスクリプトまたは実行可能ファイルであり、オペレーティング システムをインストールするタスク シーケンスを実行する前に Windows PE でユーザーと対話することができます。 Windows To Go 展開では、次の項目を構成します。  

      - **OSDBitLockerPIN**: Windows To Go の BitLocker では、パスフレーズが必要です。 Windows To Go ドライブの BitLocker パスフレーズを設定するには、起動前コマンドの一部として、 **OSDBitLockerPIN** 変数を設定します。  

        > [!WARNING]  
        >  BitLocker でパスフレーズが有効にされた後、コンピューターで Windows To Go ドライブがブートされるたびに、ユーザーはパスフレーズを入力する必要があります。  

      - **SMSTSUDAUsers**: 対象のコンピューターのプライマリ ユーザーを指定します。 ユーザー名を収集するには、この変数を使用します。ユーザー名は、ユーザーとデバイスの関連付けに使用できます。 詳細については、「[System Center Configuration Manager でユーザーをセットアップ先のコンピューターに関連付ける](../get-started/associate-users-with-a-destination-computer.md)」を参照してください。  

        > [!TIP]  
        >  ユーザー名を取得するには、起動前コマンドの一部として、入力ボックスを作成し、ユーザーにユーザー名の入力を求めて、変数に値を設定します。 たとえば、次の行を起動前コマンドのスクリプト ファイルに追加します。  
        >   
        >  `UserID = inputbox("Enter Username" ,"Enter your username:","",400,0)`  
        >   
        >  `env("SMSTSUDAUsers") = UserID`  

        起動前コマンドとして使用するスクリプト ファイルを作成する方法の詳細については、「[タスク シーケンス メディアの起動前コマンド](../understand/prestart-commands-for-task-sequence-media.md)」をご覧ください。  

16. ウィザードを完了します。  

    > [!NOTE]  
    >  ウィザードで、事前設定されたメディア ファイルを完了するまで、時間がかかることがあります。  

###  <a name="BKMK_CreatePackage"></a> Windows To Go Creator パッケージの作成  
 Windows To Go 展開の一部として、事前設定されたメディア ファイルを展開するパッケージを作成する必要があります。 パッケージには、Windows To Go ドライブを構成し、事前設定されたメディアをドライブに抽出するツールを含めます。 Windows To Go Creator パッケージを作成するには、次の手順に従います。  

#### <a name="to-create-the-windows-to-go-creator-package"></a>Windows To Go Creator パッケージを作成するには  

1. Windows To Go Creator パッケージ ファイルをホストするサーバーで、パッケージ ソース ファイル用のソース フォルダーを作成します。  

   > [!NOTE]  
   >  サイト サーバーのコンピューター アカウントには、ソース フォルダーへの **読み取り** アクセス権が必要です。  

2. 「 [Create prestaged media](#BKMK_CreatePrestagedMedia) 」セクションで作成した、事前設定されたメディア ファイルを、パッケージ ソース フォルダーにコピーします。  

3. Windows To Go Creator (WTGCreator.exe) ツールを、パッケージ ソース フォルダーにコピーします。 Creator ツールは、任意のプライマリ サイト サーバーの <*ConfigMgrInstallationFolder*>\OSD\Tools\WTG\Creator にあります。  

4. パッケージとプログラムの作成ウィザードを使用して、パッケージとプログラムを作成します。  

5. Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

6. **[ソフトウェア ライブラリ]** ワークスペースで **[アプリケーション管理]** を展開して、**[パッケージ]** をクリックします。  

7. **[ホーム]** タブの **[作成]** グループで **[パッケージの作成]** をクリックします。  

8. **[パッケージ]** ページで、パッケージの名前と説明を指定します。 たとえば、パッケージ名に「**Windows To Go**」と入力して、パッケージの説明に「**System Center Configuration Manager を使用して Windows To Go ドライブを構成するパッケージ**」と指定します。  

9. **[このパッケージにソース ファイルを含める]** を選択して、手順 1 で作成したパッケージ ソース フォルダーへのパスを指定し、**[次へ]** をクリックします。  

10. **[プログラムの種類]** ページで、**[標準プログラム]** を選択し、**[次へ]** をクリックします。  

11. **[標準プログラム]** ページで、次の項目を指定します。  

    -   **名前**: プログラムの名前を指定します。 たとえば、プログラム名として「 **Creator** 」と入力します。  

    -   **コマンド ライン**: 「**WTGCreator.exe /wim:PrestageName.wim**」と入力します。ここで、PrestageName は Windows To Go Creator パッケージ用に作成して、パッケージ ソース フォルダーにコピーした、事前設定されたファイルの名前です。  

         任意で、次のオプションを追加できます。  

        -   **enableBootRedirect**: ブートのリダイレクトを使用する Windows To Go 起動オプションを変更するコマンドライン オプションです。 このオプションを使用すると、コンピューターのファームウェアでブート順序を変更したり、起動時にブート オプションの一覧からユーザーが選択したりする必要なく、コンピューターは USB からブートします。 Windows To Go ドライブが検出されると、コンピューターはそのドライブからブートします。  

    -   **Run**:システムとプログラムの既定に基づいてプログラムを実行するには、**[通常]** を指定します。  

    -   **プログラムの実行条件**: ユーザーがログオンしている場合にのみ、プログラムを実行できるようにするかどうかを指定します。  

    -   **実行モード**: プログラムの実行をログオンしているユーザーのアクセス許可で行うのか、管理者ユーザーのアクセス許可で行うのかを指定します。 Windows To Go Creator を実行するには、管理者特権が必要です。  

    -   **[プログラムのインストールの表示および対話をユーザーに許可する]** を選択して、**[次へ]** をクリックします。  

12. [要件] ページで、次の項目を指定します。  

    - **プラットフォームの要件**: プロビジョニングを許可する適用対象の Windows 8 プラットフォームを選択します。  

    - **推定ディスク空き領域**:Windows To Go Creator のパッケージ ソース フォルダーのサイズを指定します。  

    - **許容最長実行時間 (分)**: プログラムがクライアント コンピューターで実行される最長時間を指定します。 既定では、120 分に設定されます。  

      > [!IMPORTANT]  
      >  このプログラムを実行しているコレクションに対してメンテナンス期間を使用している場合は、**[許容最長実行時間]** がスケジュールされたメンテナンス期間より長いと、競合が発生する可能性があります。 最長実行時間が **[不明]** に設定されている場合、プログラムはメンテナンス期間中に起動されますが、メンテナンス期間が終了した後も、完了するか失敗するまで実行し続けます。 利用可能なメンテナンス期間よりも長い ([不明] 以外の) 期間に最長実行時間を設定している場合、プログラムは実行されません。  

      > [!NOTE]  
      >  値が **[不明]** に設定されている場合、Configuration Manager は最長の実行許容時間を 12 時間 (720 分) に設定します。  

      > [!NOTE]  
      >  最長実行時間 (ユーザーが設定したか、既定値として設定されているかどうかにかかわらず) を超えた場合、**[標準プログラム]** ページで **[管理者権限で実行する]** が選択されていて、**[プログラムのインストールの表示および対話をユーザーに許可する]** が選択されていなければ、Configuration Manager はプログラムを停止します。  

      **[次へ]** をクリックして、ウィザードを完了します。  

###  <a name="BKMK_UpdateTaskSequence"></a> Windows To Go で BitLocker を有効にするタスク シーケンスの更新  
 Windows To Go では、TPM を使用せずに、外部ブート可能デバイスで BitLocker を有効にします。 このため、Windows To Go ドライブで BitLocker を構成するには、個別のツールを使用する必要があります。 BitLocker を有効にするには、タスク シーケンスの「 **Windows と ConfigMgr のセットアップ** 」手順の後に、アクションを追加する必要があります。  

> [!NOTE]  
>  Windows To Go の BitLocker では、パスフレーズが必要です。 「 [Create prestaged media](#BKMK_CreatePrestagedMedia) 」手順で、OSDBitLockerPIN 変数を使用して、事前設定コマンドの一部としてパスフレーズを設定します。  

 Windows 8 タスク シーケンスを更新して、Windows To Go で BitLocker を有効にするには、次の手順に従います。  

#### <a name="to-update-the-windows-8-task-sequence-to-enable-bitlocker"></a>Windows 8 タスク シーケンスを更新して BitLocker を有効にするには  

1.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

2.  **[ソフトウェア ライブラリ]** ワークスペースで **[アプリケーション管理]** を展開して、**[パッケージ]** をクリックします。  

3.  **[ホーム]** タブの **[作成]** グループで **[パッケージの作成]** をクリックします。  

4.  **[パッケージ]** ページで、パッケージの名前と説明を指定します。 たとえば、パッケージ名として「 **BitLocker for Windows To Go** 」と入力し、パッケージの説明として **Package to update BitLocker for Windows To Go** を指定します。  

5.  **[このパッケージはソース ファイルを含む]** を選択し、Windows To Go 用 BitLocker ツールの場所を指定してから、**[次へ]** をクリックします。 BitLocker ツールは、任意の Configuration Manager プライマリ サイト サーバーの <*ConfigMgrInstallationFolder*>\OSD\Tools\WTG\BitLocker\ にあります。  

6.  **[プログラムの種類]** ページで、**[プログラムを作成しない]** を選択します。  

7.  **[次へ]** をクリックして、ウィザードを完了します。  

8.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

9. **[ソフトウェア ライブラリ]** ワークスペースで **[オペレーティング システム]** を展開して、**[タスク シーケンス]** をクリックします。  

10. 事前設定メディアで参照する、Windows 8 タスク シーケンスを選択します。  

11. **[ホーム]** タブの **[タスク シーケンス]** グループで、**[編集]** をクリックします。  

12. **[Windows と ConfigMgr のセットアップ]** ステップをクリックし、**[追加]**、**[全般]**、**[コマンドラインの実行]** の順にクリックします。 [Windows と ConfigMgr のセットアップ] ステップの後に、[コマンド ラインの実行] ステップが追加されます。  

13. **[コマンド ラインの実行]** ステップの **[プロパティ]** タブで、次を追加します。  

    1.  **名前**: コマンド ラインの名前を指定します (**Windows To Go 用の BitLocker の有効化**など)。  

    2.  **[コマンド ライン]**: i386\osdbitlocker_wtg.exe /Enable /pwd:< *None&#124;AD*>  

         パラメーター:  

        -   /pwd:<None&#124;AD> - BitLocker パスワードの回復モードを指定します。 このパラメーターは、コマンドラインで /Enable パラメーターを使用するために必要です。  

             BitLocker で保護されているドライブの回復情報を Active Directory ドメイン サービス (AD DS) にバックアップするように BitLocker ドライブ暗号化を構成するには、**[AD]** を選択します。 BitLocker で保護されているドライブの回復パスワードをバックアップすると、ドライブがロックされたときに、管理ユーザーがドライブを回復できます。 そのため、許可されたユーザーが、企業の所有する暗号化されたデータに常にアクセスできます。 **[なし]** を指定すると、ユーザーが回復パスワードまたは回復キーのコピーを保持する必要があります。 ユーザーがこの情報を紛失したり、退職する前にドライブの暗号化解除をしなかった場合、管理ユーザーはドライブに容易にアクセスできなくなります。  

        -   /wait:<TRUE&#124;FALSE> - タスク シーケンスが完了する前に、暗号化が完了するのを待機するかどうかを指定します。  

    3.  **[パッケージ]** を選択してから、この手順の最初に作成したパッケージを指定します。  

    4.  **[オプション]** タブで、次の条件を追加します。  

        -   条件: タスク シーケンス変数  

        -   変数: _SMSTSWTG  

        -   条件: 次の値と等しい  

        -   値: True  

    > [!NOTE]  
    >  新しいコマンド ライン ステップの後に使用する **[BitLocker の有効化]** ステップは、Windows To Go 用の BitLocker を有効にする際には使用しません。 ただし、このステップをタスク シーケンスに保持して、Windows To Go ドライブを使用しない Windows 8 展開に使用することができます。  

###  <a name="BKMK_Deployments"></a> Windows To Go Creator パッケージとタスク シーケンスの展開  
 Windows To Go は、ハイブリッドの展開プロセスです。 そのため、Windows To Go Creator パッケージと Windows 8 タスク シーケンスを展開する必要があります。 展開プロセスを完了するには、次の手順に従います。  

#### <a name="to-deploy-the-windows-to-go-creator-package"></a>Windows To Go Creator パッケージを展開するには  

1.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

2.  **[ソフトウェア ライブラリ]** ワークスペースで **[アプリケーション管理]** を展開して、**[パッケージ]** をクリックします。  

3.  手順「 [Windows To Go Creator パッケージの作成](#BKMK_CreatePackage) 」で作成した Windows To Go パッケージを選択します。  

4.  **[ホーム]** タブの **[展開]** グループで、**[展開]** をクリックします。  

5.  **[全般]** ページで、次の設定を行います。  

    1.  **ソフトウェア**:Windows To Go パッケージを選択していることを確認します。  

    2.  **コレクション**: **[参照]** をクリックして、Windows To Go パッケージを展開するコレクションを選択します。  

    3.  **このコレクションに関連付けられている既定の配布ポイント グループを使用する**: パッケージ コンテンツをコレクションの既定の配布ポイント グループに保存する場合は、このオプションを選択します。 選択したコレクションが配布ポイント グループと関連付けられていない場合は、このオプションは使用できません。  

6.  **[コンテンツ]** ページで **[追加]** をクリックし、このパッケージとプログラムに関連付けられているコンテンツを展開する配布ポイントまたは配布ポイント グループを選択します。  

7.  **[展開設定]** ページで、展開の種類として **[利用可能]** を選択してから、**[次へ]** をクリックします。  

8.  **[スケジュール]** で、このパッケージとプログラムを展開するタイミングまたはクライアント デバイスで利用できるようにするタイミングを構成します。  

     このページのオプションは、展開操作が **[利用可能]** または **[必須]** のどちらに設定されているかによって変わります。  

9. **[スケジュール]** ページで、次の設定を構成してから、**[次へ]** をクリックします。  

    1.  **この展開が使用可能になる日時を指定する**: パッケージとプログラムを対象コンピューターで実行可能にする日付と時刻を指定します。 **[UTC]** を選択すると、この設定により、対象コンピューターのローカル時刻に従って、複数の対象コンピューターで、異なる時刻ではなく同じ時刻にパッケージとプログラムが利用可能になります。  

    2.  **この展開の有効期限を指定する**: 対象コンピューターでパッケージとプログラムを期限切れにする日付と時刻を指定します。 **[UTC]** を選択すると、この設定により、対象コンピューターのローカル時刻に従って、複数の対象コンピューターで、異なる時刻ではなく同じ時刻にタスク シーケンスが期限切れになります。  

10. ウィザードの **[ユーザー側の表示と操作]** ページで、以下の情報を指定します。  

    -   **ソフトウェア インストール**: 構成されたメンテナンス期間外でソフトウェアをインストールできます。  

    -   **システムの再起動 (インストールの完了に必要な場合)**: ソフトウェアのインストールで必要となった場合に、構成されたメンテナンス期間外でデバイスを再起動できます。  

    -   **組み込みデバイス**: 書き込みフィルターが有効になっている Windows Embedded デバイスにパッケージとプログラムを展開する場合、一時的なオーバーレイにパッケージとプログラムをインストールして後で変更をコミットするか、インストールの期限またはメンテナンス期間中に変更をコミットするように指定できます。 インストールの期限またはメンテナンス期間中に変更をコミットする場合は、再起動が必要になります。再起動すると、デバイスに変更が保持されます。  

11. **[配布ポイント]** ページで、次の情報を指定します。  

    -   **展開オプション:** **[配布ポイントからコンテンツをダウンロードしてローカルで実行する]** を指定します。  

    -   **同じサブネットにある他のクライアントとのコンテンツの共有を許可する**: コンテンツを既にダウンロードしてキャッシュしているネットワーク上の他のクライアントから、クライアントがコンテンツをダウンロードできるようにして、ネットワークの負荷を軽減するには、このオプションを選択します。 このオプションは Windows BranchCache を利用し、Windows Vista SP2 以降を実行しているコンピューターで使用できます。  

    -   **すべてのクライアントが代替のコンテンツ ソースの場所を使用する**: 優先配布ポイントでコンテンツを使用できない場合に、クライアントがフォールバックして、優先でない配布ポイントをコンテンツ ソースの場所として使用できるようにするかどうかを指定します。  

12. ウィザードを完了します。  

#### <a name="to-deploy-the-windows-8-task-sequence"></a>Windows 8 タスク シーケンスを展開するには  

1.  Configuration Manager コンソールで、**[ソフトウェア ライブラリ]** をクリックします。  

2.  **[ソフトウェア ライブラリ]** ワークスペースで **[オペレーティング システム]** を展開して、**[タスク シーケンス]** をクリックします。  

3.   [Prerequisites to provision Windows To Go](#BKMK_Prereqs) の手順で作成した Windows 8 のタスク シーケンスを選択します。  

4.  **[ホーム]** タブの **[展開]** グループで、**[展開]** をクリックします。  

5.  **[全般]** ページで、次の設定を行います。  

    1.  **タスク シーケンス**: Windows 8 タスク シーケンスを選択していることを確認します。  

    2.  **コレクション**: **[参照]** をクリックして、ユーザーが Windows To Go をプロビジョニングする可能性があるすべてのデバイスが含まれたコレクションを選択します。  

        > [!IMPORTANT]  
        >  「[事前設定されたメディアの作成](#BKMK_CreatePrestagedMedia)」セクションで作成した事前設定メディアが SMSTSPreferredAdvertID 変数を使用する場合、タスク シーケンスを **[すべてのシステム]** コレクションに展開して、**[コンテンツ]** ページで **[Windows PE のみ (非表示)]** を指定できます。 タスク シーケンスは表示されないため、メディアでのみ使用可能になります。  

    3.  **このコレクションに関連付けられている既定の配布ポイント グループを使用する**: パッケージ コンテンツをコレクションの既定の配布ポイント グループに保存する場合は、このオプションを選択します。 選択したコレクションが配布ポイント グループと関連付けられていない場合は、このオプションは使用できません。  

6.  **[展開設定]** ページで、次の設定を構成してから、**[次へ]** をクリックします。  

    -   **目的**: **[利用可能]** を選択します。 タスク シーケンスをユーザーに展開すると、ユーザーは、公開されているタスク シーケンスをアプリケーション カタログで参照して、必要に応じて要求できます。 タスク シーケンスをデバイスに展開すると、ユーザーは、タスク シーケンスをソフトウェア センターで参照して、必要に応じてインストールできます。  

    -   **利用できるようにする項目**: タスク シーケンスを構成マネージャー クライアント、メディア、または PXE で使用可能にするかどうかを指定します。  

        > [!IMPORTANT]  
        >  自動タスク シーケンスの展開に **[メディアと PXE のみ (非表示)]** 設定を使用します。 Windows To Go デバイスが検出された場合は、ユーザー操作なしに、コンピューターが自動的に起動して Windows To Go を展開するようにするには、**[オペレーティング システムの無人展開を許可する]** を選択して、事前設定メディアの一部として SMSTSPreferredAdvertID 変数を設定します。 これらの事前設定メディアの詳細については、「 [Create prestaged media](#BKMK_CreatePrestagedMedia) 」セクションを参照してください。  

7.  **[スケジュール]** ページで、次の設定を構成してから、**[次へ]** をクリックします。  

    1.  **この展開が使用可能になる日時を指定する**: タスク シーケンスを対象コンピューターで実行可能にする日時を指定します。 **[UTC]** を選択すると、この設定により、対象コンピューターのローカル時刻に従って、複数の対象コンピューターで、異なる時刻ではなく同じ時刻にタスク シーケンスが使用可能になります。  

    2.  **この展開の有効期限を指定する**: タスク シーケンスを対象コンピューターで期限切れにする日時を指定します。 **[UTC]** を選択すると、この設定により、対象コンピューターのローカル時刻に従って、複数の対象コンピューターで、異なる時刻ではなく同じ時刻にタスク シーケンスが期限切れになります。  

8.  **[ユーザー側の表示と操作]** ページで、次の情報を指定します。  

    -   **タスク シーケンスの進行状況の表示**: 構成マネージャー クライアントでタスク シーケンスの進捗状況を表示するかどうかを指定します。  

    -   **ソフトウェア インストール**: スケジュールされている日時以降の構成済みメンテナンス期間外でユーザーがソフトウェアをインストールできるようにするかどうかを指定します。  

    -   **システムの再起動 (インストールの完了に必要な場合)**: ソフトウェアのインストールで必要となった場合に、構成されたメンテナンス期間外でデバイスを再起動できます。  

    -   **組み込みデバイス**: 書き込みフィルターが有効になっている Windows Embedded デバイスにパッケージとプログラムを展開する場合、一時的なオーバーレイにパッケージとプログラムをインストールして後で変更をコミットするか、インストールの期限またはメンテナンス期間中に変更をコミットするように指定できます。 インストールの期限またはメンテナンス期間中に変更をコミットする場合は、再起動が必要になります。再起動すると、デバイスに変更が保持されます。  

    -   **インターネット ベースのクライアント**: インターネット ベースのクライアントでタスク シーケンスを実行できるようにするかどうかを指定します。 オペレーティング システムなどのソフトウェアをインストールする操作は、この設定ではサポートされていません。 このオプションは、標準オペレーティング システムで操作を実行する一般的なスクリプト ベースのタスク シーケンスにのみ使用してください。  

9. **[アラート]** ページで、このタスク シーケンスによる展開に必要なアラート設定を指定して、**[次へ]** をクリックします。  

10. **[配布ポイント]** ページで、次の情報を指定して、**[次へ]** をクリックします。  

    -   **展開オプション**: **[実行中のタスク シーケンスでコンテンツが必要になったときにローカルにダウンロードする]** を選択します。  

    -   **ローカルの配布ポイントを利用できない場合は、リモートの配布ポイントを使用する**:クライアントで低速ネットワーク上または信頼性の低いネットワーク上の配布ポイントを使用してタスク シーケンスに必要なコンテンツをダウンロードするかどうかを指定します。  

    -   **代替のコンテンツ ソースの場所の使用をクライアントに許可する**:
        - *バージョン 1610 より前では*、[代替のコンテンツ ソースの場所の使用を許可する] チェック ボックスをオンにすると、他に利用できる代替ポイントがない場合に、この境界グループ外のクライアントのフォールバックが許可され、配布ポイントをコンテンツ ソースの場所として使用できるようになります。
        - *バージョン 1610 以降*、**[代替のコンテンツ ソースの場所の使用を許可する]** は構成できません。  代わりに、境界グループ間の関係を構成し、有効なコンテンツ ソースの場所を追加の境界グループからクライアントが検索するタイミングを決定するようにします。 

11. ウィザードを完了します。  

###  <a name="BKMK_UserExperience"></a> ユーザーによる Windows To Go Creator の実行  
 Windows To Go パッケージと Windows 8 タスク シーケンスを展開したら、ユーザーが Windows To Go Creator を使用できるようになります。 ユーザーは、ソフトウェア カタログにアクセスするか、Windows To Go Creator がデバイスに展開されている場合はソフトウェア センターにアクセスして、Windows To Go Creator プログラムを実行できます。 Creator パッケージがダウンロードされると、タスク バーに点滅するアイコンが表示されます。 ユーザーがアイコンをクリックすると、ダイアログ ボックスが表示されて、プロビジョニングする Windows To Go ドライブをユーザーが選択できるようになります (/drive コマンド ライン オプションを使用しない場合)。 ドライブが Windows To Go の要件を満たしていない場合や、ドライブにイメージをインストールするのに十分な空きディスク容量がない場合は、エラー メッセージが表示されます。 ユーザーは、確認ページで、適用されるドライブとイメージを確認できます。 Windows To Go ドライブにコンテンツが構成されて事前設定されている間、ダイアログ ボックスに進行状況が表示されます。 事前設定が完了すると、Windows To Go ドライブで起動するために、コンピューターの再起動を求めるメッセージが表示されます。  

> [!NOTE]  
>  「 [Create a Windows To Go Creator package](#BKMK_CreatePackage) 」セクションで、ブートのリダイレクトを Creator プログラムのコマンド ラインの一部として有効にしなかった場合は、システムを再起動するたびに、ユーザーが手動で Windows To Go ドライブで起動することが必要になる可能性があります。  

###  <a name="BKMK_ConfigureStageDrive"></a> Configuration Manager による Windows To Go ドライブの構成とステージング  
 コンピューターを Windows To Go ドライブで再起動すると、ドライブは Windows PE で起動し、管理ポイントに接続してポリシーを取得し、オペレーティング システムの展開を完了します。 Configuration Manager でドライブが構成され、ステージングされます。 Configuration Manager によってドライブがステージングされた後で、ユーザーは、コンピューターを再起動してプロビジョニング処理 (ドメインへの参加やアプリケーションのインストールなど) を終了できます。 この処理は、事前設定メディアの場合と同じです。  

###  <a name="BKMK_UserLogsIn"></a> ユーザーによる Windows 8 へのログイン  
 Configuration Manager でプロビジョニング処理が完了して Windows 8 のロック画面が表示されると、ユーザーはオペレーティング システムにログインできるようになります。  
