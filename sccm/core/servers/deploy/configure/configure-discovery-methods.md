---
title: "探索の構成 | Microsoft Docs"
description: "ネットワーク インフラストラクチャや Active Directory から管理できるリソースを見つけるように Configuration Manager サイトで実行する探索方法を構成します。"
ms.custom: na
ms.date: 7/31/2017
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology: configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 49505eb1-d44d-4121-8712-e0f3d8b15bf5
caps.latest.revision: "5"
author: Brenduns
ms.author: brenduns
manager: angrobe
ms.openlocfilehash: 34a539ceaea6b070f81a28d2c0a9ce388e26cfeb
ms.sourcegitcommit: 51fc48fb023f1e8d995c6c4eacfda7dbec4d0b2f
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2017
---
# <a name="configure-discovery-methods-for-system-center-configuration-manager"></a>System Center Configuration Manager の探索方法を構成する

*適用対象: System Center Configuration Manager (Current Branch)*


ネットワーク インフラストラクチャや Active Directory から管理できるリソースを見つけるように System Center Configuration Manager サイトで実行する探索方法を構成します。 これを行うには、環境の検索に使用する各方法を有効にして構成する必要があります  (探索方法は、有効にするのと同じ手順で無効にすることもできます)。唯一の例外は、定期探索とサーバー検出です。  

-   既定では、Configuration Manager プライマリ サイトをインストールすると、定期探索が有効になり、基本スケジュールで実行するように構成されています。 定期探索によってデバイスの探索データ レコード (DDR) が最新の状態になるため、定期探索は有効のままにすることをお勧めします。 定期探索の詳細については、「[定期探索について](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_aboutHeartbeat)」を参照してください。  

-   サーバー検出はサイト システムとして使用するコンピューターを見つける自動探索方法です。 構成も無効化も実行できません。  

**構成可能な探索方法を有効にするには:**  
 > [!NOTE]  
 > 次の情報は、Azure Active Directory ユーザー探索には適用されません。 Azure Active Directory の場合は、このトピックで後述する「[Azure AD ユーザー探索を構成する](#azureaadisc)」を参照してください。

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  探索を有効にするサイトの探索方法を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択してから、**[全般]** タブで **[&lt;探索方法\>を有効にする]** チェック ボックスをオンにします。  

     このチェック ボックスが既にオンになっている場合、このチェック ボックスをオフにすると探索方法が無効になります。  

4.  **[OK]** をクリックして構成を保存します。  


##  <a name="BKMK_ConfigADForestDisc"></a> Active Directory フォレストの探索の構成  
Active Directory フォレストの探索の構成を完了するには、次の 2 つの場所で設定を構成する必要があります。  

-   **[探索方法]** ノードで、次の操作を行います。

    - 探索方法を有効にします。
    - ポーリングのスケジュールを設定します。
    - 探索対象の Active Directory サイトとサブネットの境界を自動的に作成するかどうかを選択します。  

-   **[Active Directory フォレスト]** ノードで、次の操作を行います。

    - 探索するフォレストを追加します。
    - そのフォレストでの Active Directory サイトとサブネットの探索を有効にします。
    - Configuration Manager サイトがサイト情報をフォレストに発行できるようにする設定を構成します。
    - 各フォレストで Active Directory フォレスト アカウントとして使用するアカウントを割り当てます。  

Active Directory フォレストの探索を有効にし、Active Directory フォレストの探索で使用する個々のフォレストを構成するには、次の手順に従います。  

#### <a name="to-enable-active-directory-forest-discovery"></a>Active Directory フォレストの検索を有効にするには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  探索を構成するサイトの Active Directory フォレストの探索方法を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  **[全般]** タブで、探索を有効にするチェック ボックスをオンにします。 先に探索を構成し、後で探索を有効にすることもできます。  

5.  探索する場所に対してサイト境界を作成するオプションを指定します。  

6.  探索を実行するスケジュールを指定します。  

7.  このサイトの Active Directory フォレストの探索の構成が完了したら、**[OK]** をクリックして構成を保存します。  

#### <a name="to-configure-a-forest-for-active-directory-forest-discovery"></a>Active Directory フォレストの探索のフォレストを構成するには  

1.  **[管理]** ワークスペースで **[Active Directory フォレスト]** を選択します。 Active Directory フォレストの検索を前に実行している場合は、検出されたフォレストが結果ウィンドウに表示されます。 Active Directory フォレストの探索を実行すると、ローカル フォレストと信頼済みフォレストがすべて探索されます。 信頼されていないフォレストだけを手動で追加します。  

    -   既に検出済みのフォレストを構成するには、結果ウィンドウでそのフォレストを選択します。 次に、**[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択してフォレストのプロパティを開きます。 手順 3 に進みます。  

    -   一覧表示されていない新しいフォレストを構成するには、**[ホーム]** タブの **[作成]** グループで、**[フォレストの追加]** を選択して **[フォレストの追加]** ダイアログ ボックスを開きます。 手順 3 に進みます。  

2.  **[全般]** タブで、探索するフォレストの構成を完了し、**[Active Directory フォレスト アカウント]** を指定します。  

    > [!NOTE]  
    >  Active Directory フォレストの探索で、信頼されていないフォレストを検出して、そのフォレストに発行するにはグローバル アカウントが必要です。 サイト サーバーのコンピューター アカウントを使用しない場合は、グローバル アカウントのみ選択できます。  

3.  サイト データをこのフォレストに発行できるようにする場合は、**[発行]** タブで、必要な構成を行います。  

    > [!NOTE]  
    >  サイトをフォレストに発行できるようにする場合は、Configuration Manager 用にそのフォレストの Active Directory スキーマを拡張する必要があります。 Active Directory フォレスト アカウントには、そのフォレストの System コンテナーに対するフル コントロールのアクセス許可が必要です。  

4.  このフォレストを Active Directory フォレストの探索で使用するための構成が完了したら、**[OK]** をクリックして構成を保存します。  

##  <a name="BKMK_ConfigADDiscGeneral"></a> Active Directory のコンピューター、ユーザー、またはグループの探索の構成  
 次のセクションの情報を参照して、コンピューター、ユーザー、またはグループの探索を構成します。 次の探索方法を使用します。  

-   Active Directory グループの探索  

-   Active Directory システムの探索  

-   Active Directory ユーザー検出  

> [!NOTE]  
>  このセクションの情報は、Active Directory フォレストの探索には当てはまりません。  

 これらの各探索方法は相互に独立していますが、同様のオプションを使用します。 これらの構成オプションに関する詳細については、「[Shared options for Group, System, and User discovery](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_shared)」 (グループ、システム、ユーザー探索の共有オプション) を参照してください。  

> [!WARNING]  
>  これらの各探索方法での Active Directory ポーリングで、大量のネットワーク トラフィックが発生する可能性があります。 このネットワーク トラフィックが業務上のネットワークの使用に悪影響を及ぼさない時間帯に各探索が実行されるように、探索のスケジュールを設定する必要があります。  

#### <a name="to-configure-active-directory-group-discovery"></a>Active Directory グループの探索を構成するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  探索を構成するサイトに対して **[Active Directory グループの探索]** 方法を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  **[全般]** タブで、探索を有効にするチェック ボックスをオンにします。 先に探索を構成し、後で探索を有効にすることもできます。  

5.  **[追加]** を選択して検出スコープを構成し、**[グループ]** または **[場所]** のどちらかを選択し、**[グループの追加]** または **[Active Directory の場所を追加]** ダイアログ ボックスで次の構成を完了します。  

    1.  この探索スコープの [名前] を指定します。 ****  

    2.  [ **Active Directory ドメイン** ] または [ **場所** ] を指定して検索します。  

        -   **[グループ]** を選択した場合、探索する 1 つまたは複数の Active Directory グループを指定します。  

        -   **[場所]** を選択した場合、探索する場所として Active Directory コンテナーを指定します。 この場所に対して Active Directory の子コンテナーの再帰検索を有効にすることもできます。  

    3.  この探索スコープを検索するために使用する [Active Directory グループ探索アカウント] を指定します。 ****  

    4.  **[OK]** をクリックして探索スコープの構成を保存します。  

6.  定義する追加の探索スコープごとに、手順 6 を繰り返します。  

7.  [ポーリングのスケジュール] タブで、完全な探索ポーリングのスケジュールと差分探索の両方を構成します。 ****  

8.  必要に応じて、**[オプション]** タブで、古いコンピューターのレコードをフィルター処理して探索から除外するためのオプションや、配布グループのメンバーシップを探索するためのオプションを構成できます。  

    > [!NOTE]  
    >  既定では、Active Directory グループの探索では、セキュリティ グループのメンバーシップのみ探索されます。  

9. このサイトの Active Directory グループの探索の構成が完了したら、**[OK]** をクリックして構成を保存します。  

#### <a name="to-configure-active-directory-system-discovery"></a>Active Directory システムの探索を構成するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  探索を構成するサイトの探索方法を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  **[全般]** タブで、探索を有効にするチェック ボックスをオンにします。 先に探索を構成し、後で探索を有効にすることもできます。  

5.  **[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックし、新しい Active Directory コンテナーを指定します。 **[Active Directory コンテナー]** ダイアログ ボックスで、次の構成を完了します。  

    1.  検索する 1 つまたは複数の場所を指定します。  

    2.  場所ごとに、検索動作を変更するオプションを指定します。  

    3.  場所ごとに、[Active Directory 探索アカウント] として使用するアカウントを指定します。 ****  

        > [!TIP]  
        >  指定する場所ごとに、探索オプションのセットおよび一意の Active Directory 探索アカウントを構成できます。  

    4.  **[OK]** をクリックして Active Directory コンテナーの構成を保存します。  

6.  [ポーリングのスケジュール] タブで、完全な探索ポーリングのスケジュールと差分探索の両方を構成します。 ****  

7.  必要に応じて、[Active Directory の属性] タブで、探索するコンピューターの追加の Active Directory 属性を構成できます。 **** 既定のオブジェクト属性も表示されます。  

8.  必要に応じて、**[オプション]** タブで、探索による古いコンピューターのレコードをフィルタリングして取り除く、つまり除外するように、オプションを構成できます。  

9. このサイトの Active Directory システム探索の構成が終了したら、**[OK]** をクリックして構成を保存します。  

#### <a name="to-configure-active-directory-user-discovery"></a>Active Directory ユーザーの探索を構成するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  探索を構成するサイトの **[Active Directory ユーザーの探索]** 方法を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  **[全般]** タブで、探索を有効にするチェック ボックスをオンにします。 先に探索を構成し、後で探索を有効にすることもできます。  

5.  **[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックし、新しい Active Directory コンテナーを指定します。 **[Active Directory コンテナー]** ダイアログ ボックスで、次の構成を完了します。  

    1.  検索する 1 つまたは複数の場所を指定します。  

    2.  場所ごとに、検索動作を変更するオプションを指定します。  

    3.  場所ごとに、[Active Directory 探索アカウント] として使用するアカウントを指定します。 ****  

        > [!NOTE]  
        >  指定する場所ごとに、探索オプションの一意のセットおよび一意の Active Directory 探索アカウントを構成できます。  

    4.  **[OK]** をクリックして Active Directory コンテナーの構成を保存します。  

6.  [ポーリングのスケジュール] タブで、完全な探索ポーリングのスケジュールと差分探索の両方を構成します。 ****  

7.  必要に応じて、[Active Directory の属性] タブで、探索するコンピューターの追加の Active Directory 属性を構成できます。 **** 既定のオブジェクト属性も表示されます。  

8.  このサイトの Active Directory ユーザー探索の構成が完了したら、**[OK]** をクリックして構成を保存します。  

## <a name="azureaadisc"></a> Azure AD ユーザー探索を構成する
バージョン 1706 以降、Configuration Manager を [Azure サブスクリプションと Azure Active Directory](/sccm/core/servers/deploy/configure/azure-services-wizard) に接続するときに、Azure Active Directory ユーザー探索を構成できるようになりました。

Azure AD ユーザーの探索は、*クラウド管理*の一部として構成されています。 詳細な手順については、トピック「*Configure Azure services for use with Configuration Manager*」(Configuration Manager と共に使用するように Azure サービスを構成する) の「[Create the Azure web app for use with Configuration Manager](/sccm/core/servers/deploy/configure/Azure-services-wizard#webapp)」(Configuration Manager と共に使用するように Azure Web アプリを作成する) を参照してください。




##  <a name="BKMK_ConfigHBDisc"></a> 定期探索の構成  
 既定では、定期探索は、Configuration Manager プライマリ サイトをインストールすると有効になります。 そのため、初期設定の 7 日おきを利用しない場合のみ、管理ポイントにクライアントが定期探索データ レコードを送信する頻度を指定するスケジュールを構成する必要があります。  

> [!NOTE]  
>  同じサイトで、クライアント プッシュ インストールおよび [ **インストール フラグのクリア** ] のサイト メンテナンス タスクの両方が有効な場合、定期探索のスケジュールを、[ **インストール フラグのクリア** ] サイト メンテナンス タスクの [ **クライアント再探索期間** ] より小さく設定します。 サイトのメンテナンス タスクの詳細については、「[System Center Configuration Manager のメンテナンス タスク](../../../../core/servers/manage/maintenance-tasks.md)」を参照してください。  

#### <a name="to-configure-the-heartbeat-discovery-schedule"></a>定期探索スケジュールを構成するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  定期探索を構成するサイトの **[定期探索]** を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  クライアントが定期探索データ レコードを送信する頻度を構成し、**[OK]** をクリックして構成を保存します。  

##  <a name="BKMK_ConfigNetworkDisc"></a> ネットワーク探索の構成  
 ネットワーク探索を構成するときに、次のセクションの情報を参照してください。  

###  <a name="BKMK_AboutConfigNetworkDisc"></a> ネットワーク探索の構成について  
 ネットワーク探索を構成する前に、次のことを把握しておく必要があります。  

-   利用可能なレベルのネットワーク探索  

-   利用できるネットワーク探索オプション  

-   ネットワークにおけるネットワーク探索の制限  

詳細については、「[ネットワーク探索について](../../../../core/servers/deploy/configure/about-discovery-methods.md#bkmk_aboutNetwork)」を参照してください。  

 以下のセクションでは、ネットワーク探索の一般的な構成について説明します。 同じ探索を実行するときに使用するように、これらの構成の 1 つまたは複数を構成できます。 複数の構成を使用する場合、探索結果に影響する可能性がある処理を計画する必要があります。  

 たとえば、特定の SNMP コミュニティ名を使用するすべての簡易ネットワーク管理プロトコル (SNMP) デバイスを探索することが必要な場合があります。 また、同じ探索を実行する際に、特定のサブネットで探索を無効にする場合があります。 探索の実行時に、ネットワーク探索では、無効になっているサブネットで指定のコミュニティ名を持つ SNMP デバイスは探索されません。  

####  <a name="BKMK_DetermineNetTopology"></a> ネットワーク トポロジの確認  
 トポロジのみの探索を使用してネットワークをマップできます。 この種の探索では、存在する可能性があるクライアントは探索されません。 トポロジのみのネットワーク探索では、SNMP が使用されます。  

 ネットワーク トポロジをマップする場合、**[ネットワーク探索のプロパティ]** ダイアログ ボックスの **[SNMP]** タブで、**[最大ホップ数]** を構成する必要があります。 わずか数ホップで、探索の実行時に使用されるネットワーク帯域幅を制御できます。 探索するネットワークが増えるにつれて、ホップ数を増やすと、ネットワーク トポロジをさらに把握できるようになります。  

 ネットワーク トポロジを把握したら、利用可能な構成を使用してネットワーク探索で検索するネットワーク セグメントを制限しながら、存在する可能性があるクライアントおよびそれらのクライアントのオペレーティング システムを検出するように、ネットワーク探索の追加のプロパティを構成できます。  

####  <a name="BKMK_LimitBySubnet"></a> サブネットを使用した検索の制限  
 探索の実行中に特定のサブネットを検索するように、ネットワーク探索を構成できます。 既定では、ネットワーク探索では、探索を実行しているサーバーのサブネットが検索されます。 構成して有効にした追加のサブネットは、SNMP 検索オプションおよび動的ホスト構成プロトコル (DHCP) 検索オプションにのみ適用されます。 ネットワーク探索でドメインを検索する場合、サブネットの構成によって検索が制限されることはありません。  

 [ **ネットワーク探索のプロパティ** ]  ダイアログ ボックスの [ **サブネット** ] タブで、1 つまたは複数のサブネットを指定する場合、[ **有効** ] とマークされているサブネットのみが検索されます。  

 サブネットを無効にすると、そのサブネットは探索から除外されて、次の条件が適用されます。  

-   SNMP ベースのクエリは、そのサブネットで実行されません。  

-   DHCP サーバーは、そのサブネットに配置されたリソースの一覧では応答しません。  

-   ドメイン ベースのクエリで、そのサブネットに配置されたリソースを探索できます。  

####  <a name="BKMK_SearchByDomain"></a> 特定のドメインの検索  
 探索の実行中に特定ドメインまたはドメインのセットを検索するように、ネットワーク探索を構成できます。 既定では、ネットワーク探索では、探索を実行しているサーバーのローカル ドメインが検索されます。  

 [ **ネットワーク探索のプロパティ** ]  ダイアログ ボックスの [ **ドメイン** ] タブで、1 つまたは複数のドメインを指定する場合、[ **有効** ] とマークされているドメインのみが検索されます。  

 ドメインを無効にすると、そのドメインは探索から除外されて、次の条件が適用されます。  

-   ネットワーク探索で、そのドメイン内のドメイン コントローラーは照会されません。  

-   SNMP ベースのクエリは、そのドメイン内のサブネットで引き続き実行できます。  

-   DHCP サーバーは、そのドメイン内に配置されたリソースの一覧で引き続き応答できます。  

####  <a name="BKMK_LimitBySNMPname"></a> SNMP コミュニティ名を使用した検索の制限  
 探索の実行中に特定の SNMP コミュニティまたはコミュニティのセットを検索するように、ネットワーク探索を構成できます。 既定では、コミュニティ名 [public] を使用するように構成されています。 ****  

 ネットワーク探索は、コミュニティ名を使用して、SNMP デバイスになっているルーターへのアクセスを取得します。 ルーターは、最初のルーターにリンクされている他のルーターやサブネットに関する情報をネットワーク探索に提供できます。  

> [!NOTE]  
>  SNMP コミュニティ名は、パスワードのようなものです。 ネットワーク探索では、コミュニティ名を指定された SNMP デバイスからのみ情報を取得できます。 各 SNMP デバイスは独自のコミュニティ名を持つことができますが、多くの場合は複数のデバイスで同じコミュニティ名が共有されます。 また、ほとんどの SNMP デバイスは、既定の **public** というコミュニティ名を使用します。  ただし、セキュリティ上の理由から、デバイスから **public** というコミュニティ名を削除している組織もあります。  

 **[ネットワーク探索のプロパティ]** ダイアログ ボックスの **[SNMP]** タブに複数の SNMP コミュニティが表示される場合、ネットワーク探索は表示されている順序で検索を行います。 さまざまな名前を使ってデバイスへの接続が試みられると、ネットワーク トラフィックが発生します。このようなネットワーク トラフィックを最小限に抑えるため、最も頻繁に使用される名前を一覧の一番上に配置するようにします。  

> [!NOTE]  
>  SNMP コミュニティ名を使用できるだけでなく、特定の SNMP デバイスの IP アドレスまたは解決可能な名前も指定できます。 これは、**［ネットワーク探索のプロパティ］**ダイアログ ボックスの **［SNMP デバイス］**タブで行います。  

####  <a name="BKMK_SearchByDHCP"></a> 特定の DHCP サーバーの検索  
 特定の DHCP サーバーまたは複数のサーバーを使用して探索の実行中に DHCP クライアントを探索するように、ネットワーク探索を構成できます。  

 ネットワーク探索は、[ **ネットワーク探索のプロパティ** ] ダイアログ ボックスの [ **DHCP** ] タブで指定する各 DHCP サーバーを検索します。 探索を実行しているサーバーが DHCP サーバーから IP アドレスをリースしている場合、**[サイト サーバーで使用するように構成されている DHCP サーバーを含める]** チェック ボックスをオンにして、その DHCP サーバーを検索するように探索を構成できます。  

> [!NOTE]  
>  ネットワーク探索時に使用する DHCP サーバーを構成するには、環境で IPv4 をサポートしている必要があります。 ネイティブの IPv6 環境で、ネットワーク探索時に使用する DHCP サーバーを構成することはできません。  

###  <a name="BKMK_HowToConfigNetDisc"></a> ネットワーク探索の構成方法  
 次の手順に従って、まずネットワーク トポロジのみ探索します。次に、1 つまたは複数の使用可能なネットワーク探索オプションを使用して、存在する可能性があるクライアントを探索するようにネットワーク探索を構成します。  

##### <a name="to-determine-your-network-topology"></a>ネットワークのトポロジを決定するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  ネットワーク探索を実行するサイトに対して **[ネットワーク探索]** を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

    -   **[全般]** タブで、**[ネットワーク探索を有効にする]** チェック ボックスをオンにし、**[探索の種類]** オプションから **[トポロジ]** を選択します。  

    -   **[サブネット]** タブで、**[ローカル サブネットを探索]** チェック ボックスをオンにします。  

        > [!TIP]  
        >  ネットワークを構成する特定のサブネットがわかっている場合、**[ローカル サブネットを検索]** チェック ボックスをオフにし、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) を使用して、検索する特定のサブネットを追加できます。 大規模なネットワークの場合、サブネットを一度に 1 つまたは 2 つだけ検索することで、ネットワーク帯域幅の使用を最小限に抑えることができる場合があります。  

    -   **[ドメイン]** タブで、**[ローカル ドメインを検索]** チェック ボックスをオンにします。  

    -   [ **SNMP** ] タブで、[ **最大ホップ数** ] ドロップダウン リストを使用して、ネットワーク探索がトポロジをマップする際に取得可能なルーター ホップ数を指定できます。  

        > [!TIP]  
        >  ネットワーク トポロジの初回マップ時には、ネットワーク帯域幅の使用を最小限に抑えるため、ごくわずかな数のルーター ホップを構成します。  

4.  **[スケジュール]** タブで、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックして、ネットワーク探索の実行スケジュールを設定します。  

    > [!NOTE]  
    >  複数の探索構成を、ネットワーク探索のスケジュールを分けるように割り当てることはできません。 ネットワーク探索の実行時は毎回、現在の探索構成が使用されます。  

5.  **[OK]** をクリックして構成を受け入れます。 ネットワーク探索が、スケジュールされた時刻に実行されます。  

##### <a name="to-configure-network-discovery"></a>ネットワーク探索を構成するには  

1.  Configuration Manager コンソールで **[管理]** > **[階層の構成]** を選択し、**[探索方法]** をクリックします。  

2.  ネットワーク探索を実行するサイトに対して **[ネットワーク探索]** を選択します。  

3.  **[ホーム]** タブの **[プロパティ]** グループで、**[プロパティ]** を選択します。  

4.  **[全般]** タブで、**[ネットワーク探索を有効にする]** チェック ボックスをオンにし、**[探索の種類]** オプションから、実行する探索の種類を選択します。  

5.  サブネットを検索するための探索を構成するには、**[サブネット]** タブをクリックし、次のオプションを 1 つ以上構成します。  

    -   探索を実行するコンピューターのローカルのサブネットで探索を実行するには、**[ローカル サブネットを検索する]** チェック ボックスをオンにします。  

    -   特定のサブネットを検索するには、サブネットが **[検索するサブネット]** に表示され、**[検索]** の値が **[有効]** になっていることを確認します。  

        1.  サブネットが表示されていない場合、**[新規]** アイコン![[新規] アイコン](media/Disc_new_Icon.gif)をクリックします。 **[新しいサブネットの割り当て]** ダイアログ ボックスに、**[サブネット]** と **[マスク]** の情報を入力して、**[OK]** をクリックします。 既定では、新しいサブネットの検索が有効になります。  

        2.  表示されたサブネットの **[検索]** 値を変更するには、サブネットを選択して、**[切り替え]** アイコンをクリックし、**[無効]** と **[有効]** の値を切り替えます。  

6.  ドメインを検索するための探索を構成するには、**[ドメイン]** タブをクリックし、次のオプションを 1 つ以上構成します。  

    -   探索を実行するコンピューターのドメインで探索を実行するには、**[ローカル サブネットを検索する]** チェック ボックスをオンにします。  

    -   特定のドメインを検索するには、ドメインが **[ドメイン]** に表示され、**[検索]** の値が **[有効]** になっていることを確認します。  

        1.  ドメインが表示されていない場合、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックします。 **[ドメインのプロパティ]** ダイアログ ボックスで、**ドメイン**の情報を入力し、**[OK]** をクリックします。 既定では、新しいドメインの検索が有効になります。  

        2.  表示されたドメインの **[検索]** 値を変更するには、ドメインを選択して、**[切り替え]** アイコンをクリックし、**[無効]** と **[有効]** の値を切り替えます。  

7.  SNMP デバイスの特定の SNMP コミュニティ名を検索する探索を構成するには、**[SNMP]** タブをクリックし、次のオプションの 1 つ以上を構成します。  

    -   **[SNMP コミュニティ名]** の一覧に SNMP コミュニティ名を追加するには、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックします。 検索するコミュニティの名前を **［新しい SNMP コミュニティ名］** ダイアログ ボックスで、SNMP コミュニティの**名前**を指定し、**［OK］** をクリックします。  

    -   SNMP コミュニティ名を削除するには、コミュニティ名を選択して、**[削除]** アイコン ![[削除] アイコン](media/Disc_delete_Icon.gif) をクリックします。  

    -   SNMP コミュニティ名の検索順序を調整するには、コミュニティ名を選択して、**[項目を上に移動]** アイコン ![[項目を上に移動] アイコン](media/Disc_moveUp_Icon.gif) または **[項目を下に移動]** アイコン ![[項目を下に移動] アイコン](media/Disc_moveDown_Icon.gif) をクリックします。 探索の実行時に、上から下の順番でコミュニティ名が検索されます。 次の点に配慮してください。

        > [!NOTE]  
        >  ネットワーク探索は、SNMP コミュニティ名を使用して、SNMP デバイスになっているルーターへのアクセスを取得します。 ルーターは、最初のルーターにリンクされている他のルーターやサブネットに関するネットワーク探索を通知できます。  

        -   SNMP コミュニティ名は、パスワードのようなものです。  

        -   ネットワーク探索では、コミュニティ名を指定された SNMP デバイスからのみ情報を取得できます。  

        -   各 SNMP デバイスは独自のコミュニティ名を持つことができますが、多くの場合は複数のデバイスで同じコミュニティ名が共有されます。  

        -   ほとんどの SNMP デバイスは、既定の **Public** というコミュニティ名を使用します。 コミュニティ名がわからない場合は、この名前を使用できます。 ただし、セキュリティ上の理由から、デバイスから "public" というコミュニティ名を削除している組織もあります。 ****  

8.  SNMP 検索で使用するルーター ホップの最大数を構成するには、**[SNMP]** タブを選択し、**[最大ホップ数]** ドロップダウン リストからホップの数を選択します。  

9. SNMP デバイスを構成するのには **[SNMP デバイス]** タブを選択します。 デバイスが表示されていない場合、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックします。 **[新しい SNMP デバイス]** ダイアログ ボックスで、SNMP デバイスの IP アドレスまたはデバイス名を指定し、**[OK]** をクリックします。  

    > [!NOTE]  
    >  デバイス名を指定する場合、Configuration Manager が NetBIOS 名を IP アドレスに解決できる必要があります。  

10. DHCP クライアント用に特定の DHCP サーバーを照会するための探索を構成するには、**[DHCP]** タブを選択し、次のオプションを 1 つ以上構成します。  

    -   探索を実行しているコンピューターで DHCP サーバーを照会するには、**[サイト サーバーの DHCP サーバーを常に使用する]** チェック ボックスをオンにします。  

        > [!NOTE]  
        >  このオプションを使用するには、サーバーが DHCP サーバーから IP アドレスをリースしている必要があります。また、静的 IP アドレスは使用できません。  

    -   特定の DHCP サーバーを照会するには、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックします。 **[新しい DHCP サーバー]** ダイアログ ボックスで DHCP サーバーの IP アドレスまたはサーバー名を指定し、**[OK]** をクリックします。  

        > [!NOTE]  
        >  サーバー名を指定する場合、Configuration Manager が NetBIOS 名を IP アドレスに解決できる必要があります。  

11. 探索の実行スケジュールを構成するには、**[スケジュール]** タブを選択し、**[新規]** アイコン ![[新規] アイコン](media/Disc_new_Icon.gif) をクリックして、ネットワーク探索の実行スケジュールを設定します。  

     複数の定期スケジュールや、繰り返しパターンのない複数のスケジュールなど、複数のスケジュールを構成できます。  

    > [!NOTE]  
    >  複数のスケジュールが **[スケジュール]** タブで同じ時刻に表示される場合、すべてのスケジュールで、スケジュールに示されている時刻で構成されているとおりにネットワーク探索が実行されます。 これは定期スケジュールにも当てはまります。  

12. **[OK]** をクリックして構成を保存します。  

###  <a name="BKMK_HowToVerifyNetDisc"></a> ネットワーク探索の終了を確認する方法  
 ネットワーク検索が完了するのに必要な時間は、さまざまな要因によって異なります。 この要因としては、次のうちのいずれかまたは複数が該当する可能性があります。  

-   ネットワークの規模  

-   ネットワークのトポロジー  

-   ネットワーク上のルーターを検出するように構成されているホップの最大数  

-   実行される探索の種類  

ネットワーク探索では、探索が終了したことを通知するメッセージが作成されません。探索が終了したことを確認するには、次の手順に従います。  

##### <a name="to-verify-that-network-discovery-has-finished"></a>ネットワーク探索の終了を確認するには  

1.  Configuration Manager コンソールで、**[監視]** をクリックします。  

2.  **[監視]** ワークスペースで、**[システムのステータス]** を展開してから、**[ステータス メッセージ クエリ]** を選択します。  

3.  **[すべてのステータス メッセージ]** を選択します。  

4.  **[ホーム]** タブの **[ステータス メッセージ クエリ]** グループで、**[メッセージを表示する]** を選択します。  

5.  **[日時の選択]** ドロップダウン リストを選択し、探索が開始した日時を含む値を選択してから **[OK]** をクリックして、**[Configuration Manager ステータス メッセージ ビューアー]** を開きます。  

    > [!TIP]  
    >  [日時の選択] オプションを使用して、探索を実行した日時を指定することもできます。 **** このオプションは、指定した日にネットワーク探索を実行し、その日のメッセージのみを取得したい場合に便利です。  

6.  ネットワーク探索が終了したことを確認するには、次の情報が含まれたステータス メッセージを検索します。  

    -   メッセージ ID : **502**  

    -   コンポーネント : **SMS_NETWORK_DISCOVERY**  

    -   説明: **このコンポーネントは停止しました。**  

    このステータス メッセージが表示されない場合は、ネットワーク探索は終了していません。  

7.  ネットワーク探索が開始したことを確認するには、次の情報が含まれたステータス メッセージを検索します。  

    -   メッセージ ID : **500**  

    -   コンポーネント : **SMS_NETWORK_DISCOVERY**  

    -   説明: **このコンポーネントが開始しました。**  

    この情報は、ネットワーク探索が開始したことを確認するものです。 この情報が表示されない場合は、ネットワーク探索のスケジュールを変更します。  
