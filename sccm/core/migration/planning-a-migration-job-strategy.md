---
title: 移行ジョブの計画
titleSuffix: Configuration Manager
description: System Center Configuration Manager 環境に移行する特定のデータを構成するには、移行ジョブを使用します。
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.technology: configmgr-other
ms.topic: conceptual
ms.assetid: a70bfbd4-757a-4468-9312-1c3b373ef9fc
author: aczechowski
ms.author: aaroncz
manager: dougeby
ms.openlocfilehash: 0e77225fb378a5851dbba9718dd3810463255cf7
ms.sourcegitcommit: ef3fdf21180e43afd7af6c8264524711435e426e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2019
ms.locfileid: "54898428"
---
# <a name="plan-a-migration-job-strategy-in-system-center-configuration-manager"></a>System Center Configuration Manager での移行ジョブ戦略の計画

「オブジェクトの*適用対象: System Center Configuration Manager (Current Branch)*

System Center Configuration Manager 環境に移行する特定のデータを構成するには、移行ジョブを使用します。 移行ジョブは、移行を計画しているオブジェクトを識別するもので、移行先階層の最上位サイトで実行します。 ソース サイトごとに 1 つまたは複数の移行ジョブを設定できます。 これにより、一度にすべてのオブジェクトを移行したり、各ジョブを使って、データの限定されたサブセットを移行したりできます。  

 移行ジョブは、Configuration Manager でソース階層の 1 つまたは複数のサイトから正常にデータを収集した後に作成できます。 データを収集したソース サイトから任意の順序でデータを移行できます。 Configuration Manager 2007 ソース サイトでは、オブジェクトが作成されたサイトからのみデータを移行できます。 System Center 2012 Configuration Manager 以降を実行するソース サイトでは、移行できるすべてのデータがソース階層の最上位サイトで利用できます。  

 階層間でクライアントを移行する前に、クライアントが使用するオブジェクトが移行されており、それらのオブジェクトが移行先階層で利用できることを確認します。 たとえば、Configuration Manager 2007 SP2 ソース階層から移行する場合は、クライアントが含まれているカスタム コレクションに展開されるコンテンツの開示通知がある可能性があります。 この場合、クライアントを移行する前に、コレクション、公開通知、および関連するコンテンツを移行することをお勧めします。 クライアントの移行前にコンテンツ、コレクション、および開示通知を移行しない場合、このデータを移行先階層のクライアントに関連付けることはできません。 以前に実行した開示通知とコンテンツに関連するデータにクライアントが関連付けられていない場合は、移行先階層でのインストールのためにクライアントにコンテンツを提供できますが、これが不要になります。 データを移行してからクライアントを移行すると、クライアントはこのコンテンツと開示通知に関連付けられて、開示通知が反復的なものでない限り、移行済みの開示通知のこのコンテンツがクライアントに再度提供されることはありません。  

 一部のオブジェクトでは、ソース階層から移行先階層にデータを移行する以外のことも必要になります。 たとえば、クライアントのソフトウェア更新プログラムを移行先階層に正常に移行するには、移行先階層にアクティブなソフトウェアの更新ポイントを展開し、製品のカタログを構成して、ソフトウェアの更新ポイントを Windows Server Update Services (WSUS) と同期する必要があります。  

 移行ジョブを計画するときに、次のセクションを参考にしてください。  

-   [移行ジョブの種類](#Types_of_Migration)  

-   [すべての移行ジョブについての全般的な計画](#About_Migration_Jobs)  

-   [コレクションの移行ジョブの計画](#About_Collection_Migration)  

-   [オブジェクトの移行ジョブの計画](#About_Object_Migration)  

-   [移行済みのオブジェクトの移行ジョブの計画](#About_Object_Migrations)  

##  <a name="Types_of_Migration"></a> 移行ジョブの種類  
 Configuration Manager では、次の種類の移行ジョブをサポートしています。 各ジョブの種類は、そのジョブに含めることができるオブジェクトを定義できるように設計されています。  

 **コレクションの移行** (Configuration Manager 2007 SP2 から移行する場合にのみサポート):選択したコレクションに関連するオブジェクトを移行します。 既定では、コレクションの移行には、コレクションのメンバーに関連付けられているすべてのオブジェクトが含まれます。 コレクションの移行ジョブを使用すると、特定のオブジェクトのインスタンスを除外できます。  

 **オブジェクトの移行**:選択した個々のオブジェクトを移行します。 移行する特定のデータのみを選択します。  

 **移行済みオブジェクトの移行**:以前に移行したオブジェクトが前回の移行後にソース階層で更新されている場合に、オブジェクトを移行します。  

###  <a name="Objects_that_can_migrate"></a> 移行できるオブジェクト  
 特定の種類の移行ジョブで、すべてのオブジェクトを移行できるわけではありません。 次の一覧に、各種類の移行ジョブで移行することができるオブジェクトの種類を示します。  

> [!NOTE]  
>  コレクションの移行ジョブは、Configuration Manager 2007 SP2 ソース階層からオブジェクトを移行する場合のみ使用できます。  

 **各オブジェクトの移行に使用できるジョブの種類**  

-   **開示通知** (サポートされている Configuration Manager 2007 ソース サイトからの移行に使用可能)  

    -   コレクションの移行  


-   **資産インテリジェンス カタログ**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **資産インテリジェンスのハードウェアの要件**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **資産インテリジェンスのソフトウェア一覧**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **境界**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **構成基準**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **構成項目**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **メンテナンス期間**  

    -   コレクションの移行  


-   **オペレーティング システムの展開用ブート イメージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **オペレーティング システムの展開に含めるドライバー パッケージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **オペレーティング システムの展開に含めるドライバー**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **オペレーティング システムの展開用イメージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **オペレーティング システム展開パッケージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **ソフトウェアの配布パッケージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **ソフトウェア使用状況測定規則 (旧称「ソフトウェア メータリング規則」)**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **ソフトウェア更新プログラムの展開パッケージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **ソフトウェア更新プログラムの展開テンプレート**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **ソフトウェア更新プログラムの展開**  

    -   コレクションの移行  


-   **ソフトウェア更新プログラム一覧**  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **タスク シーケンス**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    -   移行済みオブジェクトの移行  

-   **仮想アプリケーション パッケージ**  

    -   コレクションの移行  

    -   オブジェクトの移行  

    > [!IMPORTANT]  
    >  仮想アプリケーション パッケージは、オブジェクトの移行ジョブを使って移行できますが、 **移行済みのオブジェクトの移行**ジョブを使って移行することはできません。 移行するには、移行済みの仮想アプリケーション パッケージを移行先サイトから削除して、仮想アプリケーションを移行するための新しい移行ジョブを作成する必要があります。  

##  <a name="About_Migration_Jobs"></a> すべての移行ジョブについての全般的な計画  
 移行先階層にオブジェクトを移行する移行ジョブを作成するには、移行ジョブの作成ウィザードを使用します。 作成する移行ジョブの種類で、移行できるジョブが決まります。 複数の移行ジョブを作成して使用すると、データの移行を同じソース サイトから行ったり、複数のソース サイトから行ったりできます。 特定の 1 種類の移行ジョブの使用で、別の種類の移行ジョブの使用がブロックされることはありません。  

 移行ジョブが正常に実行されると、そのステータスは **[完了]** と表示されて、再度実行することはできなくなります。 ただし、元のジョブで移行したオブジェクトを移行する、新しい移行ジョブを作成することができます。また、新しい移行ジョブに追加のオブジェクトを含めることもできます。 追加の移行ジョブを作成すると、移行済みのオブジェクトのステータスは **[移行完了]** と表示されます。 これらのオブジェクトを選択して再度移行することはできますが、ソース階層でオブジェクトが更新されていない限り、これらのオブジェクトを再度移行する必要はありません。 最初に移行されてからオブジェクトがソース階層内で更新されている場合は、移行ジョブの種類に **[移行後に変更されたオブジェクト]** を使用すると、そのオブジェクトを識別できます。  

 実行する前は移行ジョブを削除できます。 ただし、移行ジョブが完了した後では、その移行ジョブは Configuration Manager コンソールにそのまま表示されて、削除することはできません。 完了した各移行ジョブやまだ実行していない各移行ジョブは、移行処理を完了して移行データをクリーンアップするまで、Configuration Manager コンソールに引き続き表示されます。  

> [!NOTE]  
>  **[移行データのクリーン アップ]** アクションを使用して移行を完了した後で、同じ階層を現在のソース階層として再構成して、移行済みのオブジェクトの表示を復元できます。  

 Configuration Manager コンソールで、移行ジョブに含まれているオブジェクトを表示するには、移行ジョブを選択して、**[ジョブに含まれているオブジェクト]** タブを選びます。  

 次のセクションの情報を使用して、すべての移行ジョブを計画します。  

### <a name="data-selection"></a>データの選択  
 コレクションの移行ジョブを作成する場合、1 つまたは複数のコレクションを選択する必要があります。 コレクションを選択すると、移行ジョブの作成ウィザードに、選択したコレクションに関連付けられているオブジェクトが表示されます。 既定では、選択したコレクションに関連付けられているすべてのオブジェクトが移行されますが、そのジョブで移行しないようにするオブジェクトはオフにすることができます。 依存するオブジェクトのあるオブジェクトをオフにすると、それらの依存するオブジェクトもオフになります。 オフにしたすべてのオブジェクトが除外リストに追加されます。 除外リストのオブジェクトは、今後の移行ジョブの自動選択から削除されます。 今後作成する移行ジョブで移行に自動選択されるようにする必要があるオブジェクトを削除するには、除外リストを手動で編集する必要があります。  

### <a name="site-ownership-for-migrated-content"></a>移行されるコンテンツのサイト所有権  
 展開のためにコンテンツを移行する場合は、コンテンツ オブジェクトを移行先階層内のサイトに割り当てる必要があります。 このサイトが移行先階層内のコンテンツの所有者になります。 移行先階層の最上位サイトは、コンテンツのメタデータを実際に移行するサイトですが、ネットワーク経由でコンテンツの元のソース ファイルにアクセスするのは、割り当てられているサイトです。  

 移行時に使用されるネットワーク帯域幅を最小化するために、コンテンツの所有権を最も近い利用可能なサイトに移動することを検討してください。 コンテンツに関する情報は System Center Configuration Manager 内でグローバルに共有されるため、すべてのサイトで利用できます。  

 コンテンツに関する情報は、データベース レプリケーションを使用して、移行先階層のすべてのサイトで共有されます。 ただし、プラマリ サイトに割り当てられてから、他のプライマリ サイトの配布ポイントに展開されたコンテンツは、ファイル ベースのレプリケーションを使用して転送されます。 これは、中央管理サイトを経由して、その他の各プライマリ サイトに転送されます。 コンテンツの所有者としてサイトを割り当てる場合、移行の前または移行中に複数のプライマリ サイトへの配布を計画しているパッケージを中央に集めると、帯域幅の狭いネットワークを使用したデータの転送を減らすことができます。  

### <a name="role-based-administration-security-scopes-for-migrated-data"></a>移行されるデータに対する、ロール ベース管理のセキュリティ スコープ  
 移行先階層にデータを移行する場合、1 つまたは複数の役割に基づいた管理のセキュリティ スコープを、データを移行するオブジェクトに割り当てる必要があります。 これにより、適切な管理ユーザーのみが、移行後にこのデータにアクセスすることができます。 指定したセキュリティ スコープは移行ジョブで定義され、そのジョブで移行される各オブジェクトに割り当てられます。 複数のセキュリティ スコープを別々の一連のオブジェクトに適用する必要があり、移行中にこれらのスコープを割り当てる場合は、複数の移行ジョブを使用して別々の一連のオブジェクトを移行する必要があります。  

 移行ジョブを設定する前に、役割に基づいた管理が System Center Configuration Manager で機能するしくみを確認します。 必要に応じて、移行するデータに 1 つまたは複数のセキュリティ スコープを設定して、移行先階層内の移行されたオブジェクトにアクセスできるユーザーを制御します。  

 セキュリティ スコープとロール ベース管理の詳細については、「[System Center Configuration Manager のロール ベース管理の基礎](../../core/understand/fundamentals-of-role-based-administration.md)」をご覧ください。  

### <a name="review-migration-actions"></a>移行アクションの確認  
 移行ジョブを設定すると、移行ジョブの作成ウィザードに、移行を正常に実行するために行う必要がある操作のリスト、および選択したデータの移行中に Configuration Manager で実行される操作のリストが表示されます。 この情報を慎重に確認し、予想される結果を検証します。  

### <a name="schedule-migration-jobs"></a>移行ジョブのスケジュール  
 既定では、移行ジョブは、作成すると直ちに実行されます。 ただし、移行ジョブの作成時に、またはジョブのプロパティを編集して、移行ジョブをいつ実行するのかを指定できます。 次のように実行するように、移行ジョブをスケジュールできます。  

-   ジョブを直ちに実行する  

-   ジョブを特定の開始時刻に実行する  

-   ジョブを実行しない  

### <a name="specify-conflict-resolution-for-migrated-data"></a>移行されるデータの競合の解決を指定する  
 既定では、移行先データベースに以前に移行したデータをスキップまたは上書きするように移行ジョブを構成していない場合、移行ジョブによって移行先データベースのデータは上書きされません。  

##  <a name="About_Collection_Migration "></a> コレクションの移行ジョブの計画  
 コレクションの移行ジョブは、サポートされているバージョンの Configuration Manager 2007 を実行しているソース階層からデータを移行する場合にのみ使用できます。 コレクションによって移行する場合は、1 つまたは複数のコレクションを指定する必要があります。 指定したコレクションごとに、移行ジョブは移行に関連するすべてのオブジェクトを自動的に選択します。 たとえば、特定のユーザーのコレクションを選択すると、コレクションのメンバーが識別され、そのコレクションに関連付けられている展開を移行できます。 必要に応じて、それらのメンバーに関連付けられている他の展開オブジェクトを選択して移行できます。 これらの選択したすべての項目が、移行可能なオブジェクトのリストに追加されます。  

 コレクションを移行すると、System Center Configuration Manager ではコレクション設定 (メンテナンス期間、コレクション変数を含む) も移行しますが、AMT クライアント プロビジョニングのコレクション設定は移行できません。  

 次のセクションの情報を使用して、コレクション ベースの移行ジョブに適用可能な追加の構成を理解してください。  

### <a name="exclude-objects-from-collection-migration-jobs"></a>コレクションの移行ジョブからのオブジェクトの除外  
 コレクションの移行ジョブから特定のオブジェクトを除外できます。 コレクションの移行ジョブから特定のオブジェクトを除外すると、そのオブジェクトは、現在のソース階層内のソース サイトに作成した移行ジョブから除外されたすべてのオブジェクトが含まれた、グローバルな除外リストに追加されます。 除外リストに含まれているオブジェクトは今後のジョブでの移行に引き続き利用できますが、新しいコレクション ベースの移行ジョブを作成したときに、自動的には含められません。  

 除外リストを編集して、以前除外したオブジェクトを削除できます。 除外リストからオブジェクトを削除すると、新しい移行ジョブの作成中に、関連付けられているコレクションが指定されると、自動的に選択されます。  

### <a name="unsupported-collections"></a>サポートされていないコレクション  
 では、既定のユーザー コレクション、デバイス コレクション、Configuration Manager 2007 ソース階層のほとんどのカスタム コレクションを移行できます。 ただし、Configuration Manager では、同じコレクション内にユーザーとデバイスが含まれているコレクションを移行することはできません。  

 次のコレクションは移行できません。  

-   ユーザーとデバイスが含まれているコレクション。  

-   他のリソースの種類のコレクションへの参照が含まれているコレクション。 たとえば、ユーザー ベースのコレクションのサブコレクションまたはリンクを持つデバイス ベースのコレクションです。 この例では、最上位のコレクションのみが移行されます。  

-   不明なコンピューターを含める規則が含まれているコレクション。 コレクションは移行されますが、不明なコンピューターを含める規則は移行されません。  

### <a name="empty-collections"></a>空のコレクション  
 空のコレクションとは、リソースが関連付けられていないコレクションです。 Configuration Manager が空のコレクションを移行する場合は、ユーザーやデバイスが含まれていないフォルダーにコレクションを変換します。 このフォルダーは、空のコレクションという名前で、Configuration Manager コンソールの **[資産とコンプライアンス]** ワークスペースの **[ユーザー コレクション]** ノードまたは **[デバイス コレクション]** ノードの下に作成されます。  

### <a name="linked-collections-and-subcollections"></a>リンクされたコレクションおよびサブコレクション  
 他のコレクションにリンクされているコレクション、またはサブコレクションがあるコレクションを移行する場合、Configuration Manager は、リンクされたコレクションおよびサブコレクションに加えて、**[ユーザー コレクション]** ノードまたは **[デバイス コレクション]** ノードの下にフォルダーを作成します。  

### <a name="collection-dependencies-and-include-objects"></a>コレクションの依存関係および含まれるオブジェクト  
 移行ジョブの作成ウィザードで移行するコレクションを指定すると、依存するコレクションがジョブに含められるように自動的に選択されます。 この動作により、必要なすべてのリソースが移行後に利用可能になることが保証されます。  

 次に例を示します。**Win_7** という名前の、Windows 7 を実行するデバイス用のコレクションを選択します。 このコレクションは、すべてのクライアント オペレーティング システムが含まれている **[All_Clients]** という名前のコレクションに限定されています。 この場合、コレクション **[All_Clients]** が、移行のために自動的に選択されます。  

### <a name="collection-limiting"></a>コレクションの限定  
 System Center Configuration Manager では、コレクションはグローバル データであり、階層内の各サイトで評価されます。 このため、移行後にコレクションのスコープを制限する方法を計画します。 移行されるコレクションに予期しないメンバーが含まれないように、移行中に、移行先階層からのコレクションを識別して、移行するコレクションのスコープを限定できます。  

 たとえば、Configuration Manager 2007 では、コレクションはそれを作成したサイトおよび子サイトで評価されます。 公開通知は、子サイトにのみ展開できます。これにより、その公開通知のスコープがその子サイトに限定されます。 それに対して、System Center Configuration Manager では、各サイトでコレクションが評価された後、関連付けられている公開通知が各サイトについて評価されます。 コレクションの限定を使用すると、別のコレクションに基づいてコレクションのメンバーを絞り込み、予期しないコレクションのメンバーが追加されることを防ぐことできます。  

### <a name="site-code-replacement"></a>サイト コードの置き換え  
 Configuration Manager 2007 サイトを識別する条件が含まれているコレクションを移行する場合は、階層内の特定のサイトを指定する必要があります。 これにより、移行されたコレクションが移行先環境で引き続き動作可能で、スコープが拡大しないことが保証されます。  

### <a name="specify-behavior-for-migrated-advertisements"></a>移行される公開通知の動作の指定  
 既定では、コレクションベースの移行ジョブでは、移行先階層に移行する公開通知が無効になっています。 これには、公開通知に関連するすべてのプログラムが含まれます。 公開通知が含まれるコレクション ベースの移行ジョブを作成すると、移行ジョブの作成ウィザードの **[設定]** ページに **[公開通知が移行された後、Configuration Manager でプログラムを展開可能にする]** オプションが表示されます。 このオプションを選択すると、その公開通知に関連付けられているプログラムが、移行された後に有効になります。 ベスト プラクティスとしては、このオプションを選択しません。 代わりに、プログラムが移行されて、それらを受け取るクライアントを確認できるようになったときにプログラムを有効にします。  

> [!NOTE]  
>  **[公開通知が移行された後、Configuration Manager でプログラムを展開可能にする]** オプションが表示されるのは、コレクション ベースの移行ジョブを作成し、その移行ジョブに公開通知が含まれている場合のみです。  

 移行後にプログラムを有効にするには、プログラムのプロパティの **[詳細設定]** タブで、**[提供先のコンピューターでこのプログラムを無効にする]** をオフにします。  

##  <a name="About_Object_Migration"></a> オブジェクトの移行ジョブの計画  
 コレクションの移行と異なり、移行する各オブジェクトおよびオブジェクト インスタンスを選択する必要があります。 個々のオブジェクト (Configuration Manager 2007 階層の公開通知や System Center 2012 Configuration Manager または System Center Configuration Manager 階層のパブリケーションなど) を選択して、特定の移行ジョブの移行対象オブジェクトのリストに追加できます。 移行リストに追加していないオブジェクトは、オブジェクトの移行ジョブで移行先サイトには移行されません。  

 オブジェクト ベースの移行ジョブには、すべての移行ジョブに適用される構成以外に計画する追加の構成はありません。  

##  <a name="About_Object_Migrations"></a> 移行済みのオブジェクトの移行ジョブの計画  
 移行先階層に既に移行したオブジェクトをソース階層で更新した場合、 **移行後に変更されたオブジェクト** ジョブを使ってそのオブジェクトを再度移行できます。 たとえば、ソース階層内のパッケージのソース ファイルの名前を変更したりソース ファイルを更新したりすると、ソース階層のパッケージのバージョンが上がります。 パッケージのバージョンが上がると、このジョブの種類で、移行するパッケージを識別できるようになります。  

 このジョブの種類はオブジェクトの移行と似ていますが、移行するオブジェクトを選択するときに、以前の移行ジョブで移行した後で更新のあったオブジェクトのみ選択できることが異なります。   

 このジョブの種類を選択すると、移行ジョブの作成ウィザードの **[設定]** ページの競合を解決する動作が、移行済みのオブジェクトを上書きするように構成されます。 この設定は変更できません。  

> [!NOTE]  
>  この移行ジョブでは、ソース階層で自動的に更新されたオブジェクトおよび管理ユーザーが更新したオブジェクトを識別できます。  
