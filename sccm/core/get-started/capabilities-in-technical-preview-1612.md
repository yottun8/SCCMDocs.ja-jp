---
title: Technical Preview 1612 の機能
titleSuffix: Configuration Manager
description: System Center Configuration Manager の Technical Preview バージョン 1612 で使用できる機能について説明します。
ms.date: 01/23/2017
ms.prod: configuration-manager
ms.technology: configmgr-other
ms.topic: conceptual
ms.assetid: bceab2e8-2f05-4a17-9ac8-a7a558670fb7
author: aczechowski
ms.author: aaroncz
manager: dougeby
ROBOTS: NOINDEX
ms.openlocfilehash: 027df6a9a4813e9086dad40ef523e06e3c00b821
ms.sourcegitcommit: ef3fdf21180e43afd7af6c8264524711435e426e
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 01/24/2019
ms.locfileid: "54898069"
---
# <a name="capabilities-in-technical-preview-1612-for-system-center-configuration-manager"></a>System Center Configuration Manager の Technical Preview 1612 の機能

*適用対象:System Center Configuration Manager (Technical Preview)*



この記事では、System Center Configuration Manager の Technical Preview バージョン 1612 で使用できる機能について説明します。 このバージョンをインストールして更新し、新機能を Configuration Manager の Technical Preview サイトに追加できます。 このバージョンの Technical Preview をインストールする前に、説明のトピック「[System Center Configuration Manager の Technical Preview](../../core/get-started/technical-preview.md)」を確認して、Technical Preview の使用に関する一般的な要件と制限、バージョン間の更新方法、および Technical Preview の機能に関するフィードバックを提供する方法について理解してください。    


**このバージョンでお試しいただける新機能を次に示します。**  

## <a name="the-data-warehouse-service-point"></a>データ ウェアハウス サービス ポイント
Technical Preview バージョン 1612 以降、データ ウェアハウス サービス ポイントでは、Configuration Manager 展開の長期的な履歴データを格納およびレポートできるようになりました。 この機能は、Configuration Manager サイト データベースからデータ ウェアハウス データベースへの自動化された同期によって達成されます。 この情報には、レポート サービス ポイントからアクセスできます。

既定では、新しいサイト システムのロールをインストールすると、指定した SQL Server インスタンス上にデータ ウェアハウス データベースが Configuration Manager によって作成されます。 データ ウェアハウスでは、最大 2 TB のデータをサポートし、変更追跡にはタイムスタンプが使用されます。  既定では、サイト データベースから同期されるデータには、グローバル データ、サイト データ、Global_Proxy、クラウド データ、データベース ビュー用のデータ グループがあります。 また、追加のテーブルを含めたり、既定のレプリケーション セットから特定のテーブルを除外したりするために、同期する内容を変更することもできます。
同期される既定のデータには、次の項目に関する情報が含まれます。
- インフラストラクチャの正常性
- セキュリティ
- コンプライアンス
- マルウェア   
- ソフトウェアの展開
- インベントリの詳細 (ただし、インベントリの履歴は同期されない)

データ ウェアハウス データベースのインストールおよび構成に加えて、このデータを簡単に検索およびレポートできるように、いくつかの新しいレポートがインストールされます。

### <a name="data-warehouse-dataflow"></a>データ ウェアハウスのデータフロー   
![Datawarehouse_flow](./media/datawarehouse.png)

| 手順         | 詳細  |
|:------:|-----------|  
| **1**  |  サイト サーバーは、サイト データベースにデータを転送して格納します。  |  
| **2** |   データ ウェアハウス サービス ポイントでは、スケジュールと構成に基づいて、サイト データベースからデータを取得します。  |  
| **3** |  データ ウェアハウス サービス ポイントでは、同期されたデータのコピーをデータ ウェアハウス データベースに転送して保存します。 |  
| **A** |  組み込みのレポート機能を使用して、データに関する要求が作成され、SQL Server Reporting Services を使用してレポート サービス ポイントに渡されます。 |  
| **B** |   レポートの大部分は最新の情報に関するものです、これらの要求は、サイト データベースに対して実行されます。 |  
| **C** | レポートで履歴データを要求する場合は、*カテゴリ*が**データ ウェアハウス**になっているレポートの 1 つで、データ ウェアハウス データベースに対して要求が実行されます。   |  

### <a name="prerequisites-for-the-data-warehouse-service-point-and-database"></a>データ ウェアハウス サービス ポイントとデータベースの前提条件
- 階層には、レポート サービス ポイント サイト システムロールがインストールされている必要があります。
- サイト システムのロールをインストールするコンピューターには、.NET Framework 4.5.2 以降が必要です。
- サイト システムのロールをインストールするコンピューターのコンピューター アカウントには、データ ウェアハウス データベースをホストするコンピューターに対するローカル管理者権限が必要です。
- サイト システムのロールのインストールに使用する管理アカウントは、データ ウェアハウス データベースをホストする SQL Server のインスタンス上の DBO である必要があります。  
- データベースは、以下の条件でサポートされます。
  - SQL Server 2012 以降、Enterprise または Datacenter Edition。
  - 既定のインスタンス、または名前付きインスタンス
  - *SQL Server クラスター*。 この構成は機能しますが、テストは行われておらず、ベスト エフォート形式のサポートとなります。
  - サイト データベースまたはレポート サービス ポイントのデータベースのいずれかと同じ場所に配置されている場合。 ただし、別々のサーバーへのインストールをお勧めします。  
- *レポート サービス ポイントのアカウント*として使用されるアカウントには、データ ウェアハウス データベースへの **db_datareader** アクセス許可が必要です。  
- データベースは、*SQL Server AlwaysOn 可用性グループ*ではサポートされません。

### <a name="install-the-data-warehouse"></a>データ ウェアハウスのインストール
データ ウェアハウス サイト システムのロールは、**サイト システムのロールの追加ウィザード**または**サイト システム サーバーの作成ウィザード**を使用して中央管理サイトまたはプライマリ サイトにインストールします。 詳細については、[サイト システムのロールのインストール](/sccm/core/servers/deploy/configure/install-site-system-roles)に関するページを参照してください。 階層では、このロールの複数のインスタンスがサポートされますが、各サイトではそれぞれ 1 つのインスタンスのみサポートされます。  

ロールをインストールすると、指定した SQL Server のインスタンス上にデータ ウェアハウス データベースが Configuration Manager によって作成されます。 既存のデータベース名を指定した場合 ([データ ウェアハウス データベースを新しい SQL Server に移動する場合と同様に](#move-the-data-warehouse-database))、Configuration Manager では、新しいデータベースは作成されず、代わりに指定したデータベースが使用されます。

#### <a name="configurations-used-during-installation"></a>インストール時に使用する構成
サイト システムのロールのインストールを実行する場合は、以下の情報を使用します。

**[システムのロールの選択]** ページ:  
データ ウェアハウス サービス ポイントを選択およびインストールするためのオプションをウィザードに表示するには、事前にレポート サービス ポイントをインストールしておく必要があります。

**[全般]** ページ:次の全般的な情報が必要です。
- **Configuration Manager データベースの設定**   
  - **サーバー名**: サイト データベースをホストするサーバーの FQDN を指定します。 SQL Server の既定のインスタンスを使用しない場合は、次の形式で FQDN の後にインスタンスを指定する必要があります: ***&lt;Sqlserver_FQDN>\&lt;Instance_name>***
  - **データベース名** - サイト データベースの名前を指定します。
  - **確認** - サイト データベースへの接続が成功したかどうかを確認するには、**[確認]** をクリックします。
</br></br>
- **データ ウェアハウス データベースの設定:**
  - **サーバー名**: データ ウェアハウス サービス ポイントとデータベースをホストするサーバーの FQDN を指定します。 SQL Server の既定のインスタンスを使用しない場合は、次の形式で FQDN の後にインスタンスを指定する必要があります: ***&lt;Sqlserver_FQDN>\&lt;Instance_name>***
  - **データベース名** - データ ウェアハウス データベースの FQDN を指定します。  Configuration Manager はこの名前のデータベースを作成します。 SQL server のインスタンスに既に存在しているデータベース名を指定した場合、Configuration Manager はそのデータベースを使用します。
  - **確認** - サイト データベースへの接続が成功したかどうかを確認するには、**[確認]** をクリックします。

**[同期設定]** ページ:   
- **データの設定:**
  - **同期するレプリケーション グループ** – 同期するデータ グループを選択します。 各種データ グループの詳細については、「[System Center Configuration Manager のサイト間でのデータの転送](/sccm/core/servers/manage/data-transfers-between-sites)」の[データベースのレプリケーション](/sccm/core/servers/manage/data-transfers-between-sites#a-namebkmkdbrepa-database-replication)および**分散ビュー**に関するセクションを参照してください。
  - **同期対象に含めるテーブル** – 同期する追加の各テーブルの名前を指定します。 複数のテーブルは、コンマ (,) で区切ります。 これらのテーブルは、選択したレプリケーション グループだけでなく、サイト データベースからも同期されます。
  - **同期対象から除外するテーブル** - 同期するレプリケーション グループから個々のテーブルの名前を指定します。 指定したテーブルは除外されます。 複数のテーブルは、コンマ (,) で区切ります。
- **同期設定:**
  - **同期の間隔 (分)** - 分単位で値を指定します。 指定の間隔が経過すると、新しい同期が開始されます。 サポートされる間隔の範囲は 60 分 ～ 1,440 分 (24 時間) です。
  - **スケジュール** - 同期を実行する日を指定します。

**レポート ポイント アクセス**:   
データ ウェアハウスの役割をインストールしたら、*レポート サービス ポイントのアカウント*として使用されるアカウントに、データ ウェアハウス データベースへの **db_datareader** アクセス許可があることを確認します。

#### <a name="troubleshoot-installation-and-data-synchronization"></a>インストールおよびデータ同期のトラブルシューティング
データ ウェアハウス サービス ポイントのインストールまたはデータの同期に関する問題を調査するには、次のログを使用します。
- **DWSSMSI.log** と **DWSSSetup.log** - データ ウェアハウス サービス ポイントのインストール時に発生したエラーを調査する場合に使用するログです。
-   **Microsoft.ConfigMgrDataWarehouse.log** - サイト データベースとデータ ウェアハウス データベースの間のデータ同期について調査する場合に使用するログです。

### <a name="reporting"></a>レポート
データ ウェアハウス サイト システムのロールをインストールすると、*カテゴリ*が**データ ウェアハウス**になっているレポート サービス ポイントでは、以下のレポートが利用できるようになります。

|レポート                   | 詳細                                  |
|-------------------------|------------------------------------------|
| **アプリケーションの展開に関するレポート** | 特定のアプリケーションとコンピューターについてアプリケーション展開の詳細を表示します。|
| **エンドポイントの保護とソフトウェア更新プログラムのコンプライアンスに関するレポート**   | ソフトウェアの更新プログラムが欠落しているコンピューターを表示します。|
| **全般的なハードウェアのインベントリ レポート**  | 特定のコンピューターのすべてのハードウェア インベントリを表示します。|
| **全般的なソフトウェアのインベントリ レポート**  | 特定のコンピューターのすべてのソフトウェア インベントリを表示します。|
| **インフラストラクチャの正常性の概要**  |Configuration Manager のインフラストラクチャの正常性の概要を表示します。|
| **検出されたマルウェアの一覧**  |組織内で検出されたマルウェアを表示します。|
| **ソフトウェア配布の概要レポート** | 特定の提供情報を目的とし特定のコンピューターを対象としたソフトウェアの配布の概要。|

### <a name="move-the-data-warehouse-database"></a>データ ウェアハウス データベースの移動
データ ウェアハウス データベースを新しい SQL Server に移動するには、次の手順に従います。

1. 現在のデータベースの構成を確認し、構成の詳細を記録します。  
   - 同期するデータ グループ
   - 同期対象に含めるテーブルまたは除外するテーブル       

   このようなデータ グループとテーブルの再構成は、データベースを新しいサーバーに復元しサイト システムのロールを再インストールしてから行います。  

2. SQL Server Management Studio を使用して、データ ウェアハウス データベースをバックアップします。次に、そのデータベースを、データ ウェアハウスをホストする新しいコンピューター上の SQL Server に復元します。

   新しいサーバーにデータベースを復元したら、新しいデータ ウェアハウス データベースに対するデータベース アクセス許可が、元のデータ ウェアハウス データベースの場合と同じであることを確認します。

3. Configuration Manager コンソールを使用して、データ ウェアハウス サービス ポイント サイト システムのロールを現在のサーバーから削除します。

4. 新しいデータ ウェアハウス サービス ポイントをインストールします。さらに、復元したデータ ウェアハウス データベースをホストする新しい SQL Server およびインスタンスの名前を指定します。

5. サイト システムのロールがインストールされたら、移動は完了です。

次の Configuration Manager ログを調べて、サイト システムのロールが正常に再インストールされたかどうかを確認することができます。  
- **DWSSMSI.log** と **DWSSSetup.log** - データ ウェアハウス サービス ポイントのインストール時に発生したエラーを調査する場合に使用するログです。
-   **Microsoft.ConfigMgrDataWarehouse.log** - サイト データベースとデータ ウェアハウス データベースの間のデータ同期について調査する場合に使用するログです。


## <a name="content-library-cleanup-tool"></a>コンテンツ ライブラリのクリーンアップ ツール
Technical Preview バージョン 1612 以降では、新しいコマンド ライン ツール (**ContentLibraryCleanup.exe**) を使用して、もはやいずれのパッケージまたはアプリケーションにも関連付けられていないコンテンツを配布ポイントから削除できるようになりました (孤立したコンテンツ)。 このツールは、コンテンツ ライブラリのクリーンアップ ツールと呼ばれています。

このツールは、ツールの実行時に指定した配布ポイントにあるコンテンツに影響を及ぼすだけであり、サイト サーバー上のコンテンツ ライブラリからコンテンツを削除することはできません。

Technical Preview 1612 をインストールすると、Technical Preview サイト サーバー上の *%CM_Installation_Path%\cd.latest\SMSSETUP\TOOLS\ContentLibraryCleanup\* フォルダーに **ContentLibraryCleanup.exe** が配置されます。

この Technical Preview でリリースされたツールは、以前の Configuration Manager 製品用にリリースされた旧バージョンの類似ツールに置き換わるものとして作成されました。 このツール バージョンは 2017 年 3 月 1 日を過ぎると機能しなくなります。ただし、このツールが Current Branch の一部として、または実稼働用の定例外リリースとしてリリースされるまで、今後の Technical Preview と一緒に新しいバージョンがリリースされる予定です。

### <a name="requirements"></a>［要件］  
 - このツールは、配布ポイントをホストするコンピューター上で直接実行することも、別のサーバーからリモートで実行することもできます。 ツールは、一度に 1 つの配布ポイントに対してのみ実行できます。
 - ツールを実行するユーザー アカウントは、Configuration Manager 階層の完全な権限を持つ管理者と同じロールベース管理権限を直接有する必要があります。  完全な権限を持つ管理者のアクセス許可がある Windows セキュリティ グループのメンバーとして、ユーザー アカウントにアクセス許可が付与された場合、このツールは機能しません。

### <a name="modes-of-operation"></a>操作モード
このツールは、2 つのモードで実行できます。
1. **What If モード**:   
   **/delete** スイッチが指定されていない場合、ツールは What-if モードで実行され、配布ポイントから削除されるコンテンツを識別するものの、実際にデータを削除しません。

   - ツールがこのモードで実行されると、削除されるコンテンツに関する情報が自動的にツールのログ ファイルに書き込まれます。 ユーザーは、各削除候補について確認を求められません。
   - ログ ファイルは、既定では、ツールを実行したコンピューター上のユーザーの temp フォルダーに書き込まれます。ただし、/log スイッチを使用して、ログ ファイルを別の場所にリダイレクトすることができます。  
   </br>

   このモードでツールを実行し、生成されたログ ファイルを確認してから、/delete スイッチを使用してツールを実行することをお勧めします。  

2. **削除モード**:**/delete** スイッチを使ってツールを実行すると、ツールは削除モードで実行されます。

   - このモードでツールを実行すると、指定した配布ポイントで検出された孤立したコンテンツを、配布ポイントのコンテンツ ライブラリから削除することができます。
   -  各ファイルを削除する前に、ユーザーはファイルを削除するかどうか確認を求められます。  削除する場合は **[Y]** を選択し、削除しない場合は **[N]** を選択します。あるいは、**[すべて削除]** を選択すると、以降のメッセージは省略され、孤立したすべてのコンテンツが削除されます。  
   </br>

   What-If モードでツールを実行し、生成されたログ ファイルを確認してから、/delete スイッチを使用してツールを実行することをお勧めします。  

コンテンツ ライブラリのクリーンアップ ツールをいずれかのモードで実行すると、自動的にログが作成されます。このログには、ツールの実行モード、配布ポイントの名前、日付、および操作時刻を含んだ名前が付けられます。 ツールが終了すると、ログ ファイルが自動的に開きます。 ログ ファイルは、既定では、ツールを実行したコンピューター上のユーザーの **temp** フォルダーに書き込まれます。ただし、コマンド ライン スイッチを使用して、ログ ファイルを別の場所 (ネットワーク共有など) にリダイレクトすることができます。   


### <a name="run-the-tool"></a>ツールを実行します。
ツールを実行するには:
1. 管理コマンド プロンプトで、**ContentLibraryCleanup.exe** を含むフォルダーを開きます。  
2. 次に、必須のコマンド ライン スイッチと、使用する省略可能なスイッチを含めたコマンドラインを入力します。

**既知の問題** パッケージまたは展開が失敗した場合、または進行中の場合、ツールを実行すると、次のようなエラーが返される可能性があります。
-  *System.InvalidOperationException:This content library cannot be cleaned up right now because package <packageID> is not fully installed.* (System.InvalidOperationException: パッケージ <packageID> が完全にインストールされていないため、このコンテンツ ライブラリを今すぐクリーンアップすることはできません。)

**回避策:** ありません。 コンテンツの展開が進行中または失敗した場合、このツールは孤立ファイルを確実に識別することはできません。 したがって、その問題が解決されるまで、ツールではコンテンツのクリーンアップが許可されません。



### <a name="command-line-switches"></a>コマンド ライン スイッチ  
コマンドライン スイッチは、任意の順に使用できます。   

|スイッチ|詳細|
|---------|-------|
|**/delete**  |**省略可能** </br> 配布ポイントからコンテンツを削除する場合は、このスイッチを使用します。 コンテンツが削除される前に確認を求めるメッセージが表示されます。 </br></br> このスイッチが使用されていない場合、ツールはどのコンテンツが削除対象かについて結果をログに記録しますが、配布ポイントからコンテンツを削除しません。 </br></br> 例:***ContentLibraryCleanup.exe /dp server1.contoso.com /delete*** |
| **/q**       |**省略可能** </br> すべてのプロンプト (コンテンツを削除する場合のプロンプトなど) を非表示にする Quiet モードでツールを実行すると、ログ ファイルは自動的に開きません。 </br></br> 例:***ContentLibraryCleanup.exe /q /dp server1.contoso.com*** |
| **/dp &lt;配布ポイント FQDN>**  | **必須** </br> クリーニングする配布ポイントの完全修飾ドメイン名 (FQDN) を指定します。 </br></br> 例:***ContentLibraryCleanup.exe /dp server1.contoso.com***|
| **/ps &lt;プライマリ サイト FQDN>**       | プライマリ サイトで配布ポイントからコンテンツをクリーニングする場合は**省略可能**。</br>セカンダリ サイトで配布ポイントからコンテンツをクリーニングする場合は**必須**。 </br></br> 配布ポイントが属するプライマリ サイトの FQDN を指定します。あるいは、配布ポイントがセカンダリ サイトにある場合は親であるプライマリ サイトの FQDN を指定します。 </br></br> 例:***ContentLibraryCleanup.exe /dp server1.contoso.com /ps siteserver1.contoso.com*** |
| **/sc &lt;プライマリ サイト コード>**  | プライマリ サイトで配布ポイントからコンテンツをクリーニングする場合は**省略可能**。</br>セカンダリ サイトで配布ポイントからコンテンツをクリーニングする場合は**必須**。 </br></br> 配布ポイントが属するプライマリ サイトのサイト コードを指定します。あるいは、配布ポイントがセカンダリ サイトにある場合は親であるプライマリ サイトのサイト コードを指定します。</br></br> 例:***ContentLibraryCleanup.exe /dp server1.contoso.com /sc ABC*** |
| **/log <log file directory>**       |**省略可能** </br> ログ ファイルを配置するディレクトリを指定します。 ローカル ドライブを指定したり、ネットワーク共有上の場所を指定したりできます。</br></br> このスイッチを使用しない場合、ログ ファイルはユーザーの temp フォルダーに自動的に配置します。</br></br> ローカル ドライブの例:***ContentLibraryCleanup.exe /dp server1.contoso.com /log C:\Users\Administrator\Desktop*** </br></br>ネットワーク共有の例:***ContentLibraryCleanup.exe /dp server1.contoso.com /log \\&lt;share>\&lt;folder>***|


## <a name="improvements-for-in-console-search"></a>コンソール内検索の機能強化
User Voice に寄せられたご意見ご感想を基に、コンソール内検索に対して次の機能強化を行いました。
 - **オブジェクトのパス:**  
  多くのオブジェクトが**オブジェクトのパス**という名前の新しい列をサポートするようになりました。  検索時に、この列を表示結果に含めると、各オブジェクトへのパスを表示できます。 たとえば、[アプリケーション] ノードでアプリの検索を実行し、さらにサブノードも検索する場合、結果ウィンドウの*オブジェクトのパス*列には、返された各オブジェクトへのパスが表示されます。   

- **検索テキストの保持**  
  検索テキスト ボックスにテキストを入力した後で、検索対象をサブノードから現在のノードに切り替えた場合 (逆の場合も)、入力したテキストは保持されるようになったため、新しい検索でテキストを再入力せずにそのまま使用できます。

- **サブノードを検索するかどうかの選択の保持**  
 *現在のノード*または*すべてのサブノード*を検索するために選択するオプションは、作業するノードを変更しても保持されるようになりました。   この新しい動作により、コンソール内を移動するたびに、オプションを再設定する必要がなくなりました。  既定では、コンソールを開くと、オプションは現在のノードのみを検索する設定となります。

## <a name="prevent-installation-of-an-application-if-a-specified-program-is-running"></a>指定したプログラムが実行されている場合に、アプリケーションのインストールを阻止する
特定の実行可能ファイル (拡張子 .exe を持つ) の一覧を展開の種類プロパティで構成し、それらのファイルが実行されている場合に、アプリケーションのインストールがブロックされるようにすることができるようになりました。 インストールが試行された後、インストールをブロックしているプロセスを終了するように求めるダイアログ ボックスがユーザーに表示されます。

### <a name="try-it-out"></a>試してみましょう
実行可能ファイルの一覧を構成するには
1.  任意の展開の種類のプロパティ ページで、「**Installer Handling**」 (インストーラー処理) タブをクリックします。
2.  **[追加]** をクリックして、他の実行可能ファイルのいずれかを一覧に追加します (たとえば**Edge.exe**)。
3.  **OK** をクリックして、[展開の種類プロパティ] ダイアログ ボックスを閉じます。

これで、このアプリケーションをユーザーまたはデバイスに展開する場合、追加した実行可能ファイルのいずれかが実行されていると、エンド ユーザーにはソフトウェア センターのダイアログ ボックスが表示され、アプリケーションが実行されているためにインストールが失敗したことが通知されます。

## <a name="new-windows-hello-for-business-notification-for-end-users"></a>エンド ユーザーを対象とした新しい Windows Hello for Business 通知

新しい Windows 10 通知は、Windows Hello for Business のセットアップ (たとえば、PIN の設定) を完了するには追加の操作が必要である旨をエンドユーザーに通知します。

## <a name="windows-store-for-business-support-in-configuration-manager"></a>Configuration Manager でのビジネス向け Windows ストアのサポート

展開の目的が **[利用可能]** のオンラインでライセンスされたアプリを、ビジネス向け Windows ストアから、Configuration Manager クライアントを実行している PC に展開できるようになりました。
詳細については、「[System Center Configuration Manager によるビジネス向け Windows ストアからのアプリの管理](https://docs.microsoft.com/sccm/apps/deploy-use/manage-apps-from-the-windows-store-for-business)」をご覧ください。

この機能は、現時点では、Windows 10 RS2 プレビュー ビルドを実行しているコンピューターでのみサポートされています。

## <a name="return-to-previous-page-when-a-task-sequence-fails"></a>タスク シーケンスが失敗した場合に前のページに戻る
タスク シーケンスを実行し、エラー害が発生した場合に、前のページに戻ることができるようになりました。 これより前のリリースでは、エラーが発生すると、タスク シーケンスを再起動する必要があります。 たとえば、次のシナリオでは **[前へ]** ボタンを使用できます。

- Windows PE でコンピューターを起動する場合、タスク シーケンスが使用できるようになる前に、タスク シーケンス ブートス トラップ ダイアログ ボックスが表示される場合があります。 このシナリオで [次へ] をクリックすると、タスク シーケンスの最終ページが表示され、使用できるタスク シーケンスがないことを示すメッセージが示されます。 ここで、**[前へ]** をクリックすれば、使用できるタスク シーケンスをもう一度検索することができます。 タスク シーケンスが使用可能になるまで、このプロセスを繰り返すことができます。
- タスク シーケンスを実行しても、依存するコンテンツ パッケージが配布ポイントでまだ使用できない場合、タスク シーケンスは失敗します。 存在しないコンテンツを配布するか (そのコンテンツがまだ配布されていない場合)、またはコンテンツが配布ポイントで使用できるようになるまで待機してから、**[前へ]** をクリックしてコンテンツでタスク シーケンスを検索します。

## <a name="express-installation-files-support-for-windows-10-updates"></a>Windows 10 更新プログラムに対する高速インストール ファイルのサポート
Configuration Manager での Windows 10 更新プログラムに対する高速インストール ファイルのサポートを追加しました。 サポートされているバージョンの Windows 10 を使用する場合、当月の Windows 10 累積的な更新プログラムと、前月の更新プログラムとの差分のみをダウンロードする Configuration Manager 設定を使用できるようになりました。 現在、Configuration Manager Current Branch では、完全な Windows 10 累積的な更新プログラム (以前の月の更新プログラムをすべて含む) が毎月ダウンロードされています。 高速インストール ファイルを使用すると、クライアント上でのダウンロード量を少なくし、インストールに要する時間を短縮できます。

> [!IMPORTANT]
> 高速インストール ファイルの使用をサポートする設定は Configuration Manager で使用できますが、この機能は 2017 年 1 月 10 日リリースの更新プログラム (月例パッチ) に含まれる Windows Update エージェントの更新プログラムが適用された Windows 10 バージョン 1607 でのみサポートされます。 これらの更新プログラムの詳細については、「[サポート技術情報 3213986](https://support.microsoft.com/help/4009938/january-10-2017-kb3213986-os-build-14393-693)」を参照してください。 2017 年 2 月 14 日にリリースされる次の更新プログラムで、高速インストール ファイルを利用できるようになります。 この更新プログラムが適用されていない Windows 10 バージョン 1607 および以前のバージョンでは、高速インストール ファイルをサポートしていません。


### <a name="to-enable-the-download-of-express-installation-files-for-windows-10-updates-on-the-server"></a>Windows 10 更新プログラム用の高速インストール ファイルの、サーバー上へのダウンロードを有効にするには
Windows 10 高速インストール ファイルのメタデータの同期を開始するには、ソフトウェアの更新ポイントのプロパティで同期を有効にする必要があります。
1.  Configuration Manager コンソールで、**[管理]** > **[サイトの構成]** > **[サイト]** に移動します。
2.  中央管理サイトまたはスタンドアロン プライマリ サイトを選択します。
3.  **[ホーム]** タブの **[設定]** グループで **[サイト コンポーネントの構成]** をクリックし、**[ソフトウェアの更新ポイント]** を選択します。 **[更新ファイル]** タブで **[Windows 10 のすべての承認済み更新プログラムの全部のファイルと高速インストール ファイルをダウンロードする]** を選択します。

### <a name="to-enable-support-for-clients-to-download-and-install-express-installation-files"></a>クライアントが高速インストール ファイルをダウンロードしてインストールするためのサポートを有効にするには
クライアント上で高速インストール ファイルのサポートを有効にするには、クライアント設定の [ソフトウェア更新プログラム] セクションでクライアントでの高速インストール ファイルを有効にする必要があります。 これにより、指定したポートへの高速インストール ファイルのダウンロード要求をリッスンする新しい HTTP リスナーが作成されます。 クライアント上でこの機能を有効にするようにクライアント設定を展開すると、当月の Windows 10 累積的な更新プログラムと、前月の更新プログラムとの間の差分のダウンロードが試みられます (クライアントでは、高速インストール ファイルをサポートする Windows 10 のバージョンが実行されている必要があります)。
1.  ソフトウェアの更新ポイント コンポーネントのプロパティで高速インストール ファイルのサポートを有効にします(前の手順を参照)。
2.  Configuration Manager コンソールで、**[管理]** > **[クライアント設定]** の順に移動します。
3.  適切なクライアント設定を選択し、**[ホーム]** タブで **[プロパティ]** をクリックします。
4.  **[ソフトウェア更新プログラム]** ページを選択し、**[Express の更新プログラムのクライアントでのインストールを有効にする]** 設定で **[はい]** を構成し、**[Express の更新プログラムのコンテンツをダウンロードするために使用するポート]** 設定で HTTP リスナーが使用するポートを構成します。


## <a name="odata-endpoint-data-access"></a>OData エンドポイントのデータ アクセス

 Configuration Manager では、Configuration Manager データにアクセスするための RESTful OData エンドポイントを提供することになりました。 このエンドポイントは、Odata バージョン 4 と互換性があります。これにより Excel や Power BI などのツールは、単一のエンドポイントを介して Configuration Manager データに容易にアクセスすることができます。 Technical Preview 1612 では、Configuration Manager のオブジェクトへの読み取りアクセスのみをサポートします。  

[Configuration Manager の WMI プロバイダー](/sccm/develop/reference/configuration-manager-reference)で現在使用可能なデータは、新しい OData RESTful エンドポイントを使用してアクセスすることもできるようになりました。 OData エンドポイントによって公開されたエンティティ セットを使用すると、WMI プロバイダーを使用してクエリを実行する場合と同じデータを列挙できます。

### <a name="try-it-out"></a>試してみましょう

OData エンドポイントを使用するには、事前にサイトに対してそれを有効にしておく必要があります。

1.  **[管理]** > **[サイトの構成]** > **[サイト]** の順に移動します。
2.  プライマリ サイトを選択し、**[プロパティ]** をクリックします。
3.  プライマリ サイトのプロパティ シートの [全般] タブをクリックし、**[このサイトですべてのプロバイダーの REST エンドポイントを有効にする]** をクリックし、**[OK]** をクリックします。

お気に入りの OData クエリ ビューアーで、Configuration Manager 内の各種オブジェクトを返す次の例と同様のクエリを実行してみてください。

| 目的 | OData クエリ |
|---|---|
| すべてのコレクションを取得する | `http://localhost/CMRestProvider/Collection` |
| 1 つのコレクションを取得する | `http://localhost/CMRestProvider/Collection('SMS00001')`
| コレクション内の上位 100 個のデバイスを取得する | `http://localhost/CMRestProvider/Collection('SMS00001')/Device?$top=100` |
| コレクション内のリソース ID を持つデバイスを取得する | `http://localhost/CMRestProvider/Collection('SMS00001')/Device(16777573)` |
| コレクション内のデバイスのオペレーティング システムを取得する | `http://localhost/CMRestProvider/Collection('SMS00001')/Device(16777573)/OPERATING_SYSTEM` |
| コレクション内のユーザーを取得する | `http://localhost/CMRestProvider/Collection('SMS00001')/User` |

> [!NOTE]
> 表に示したクエリの例では、URL 内でホスト名として *localhost* を使用しています。これらの例は、SMS プロバイダーを実行しているコンピューター上で使用することができます。 別のコンピューターからクエリを実行する場合は、localhost を SMS プロバイダーがインストールされているサーバーの FQDN に置き換えます。

## <a name="azure-active-directory-onboarding"></a>Azure Active Directory のオンボーディング

Azure Active Directory (AD) のオンボーディングでは、Configuration Manager と他のクラウド サービスで使用する Azure Active Directory との間に接続を作成します。 現時点では、この機能を使用して、クラウド管理ゲートウェイで必要な接続を作成することができます。

Azure 管理者資格情報が必要となるので、このタスクは Azure 管理で実行します。

#### <a name="to-create-the-connection"></a>接続を作成するには:

2. **[管理]** ワークスペースで、**[クラウド サービス]** > **[Azure Active Directory]** > **[Azure Active Directory の追加]** の順に選択します。
2. **[サインイン]** を選択して、Azure AD との接続を作成します。

#### <a name="configuration-manager-client-requirements"></a>Configuration Manager クライアントの要件

クラウド管理ゲートウェイでユーザー ポリシーの作成を有効にするには、いくつかの要件があります。

- Azure AD のオンボーディング プロセスが完了している必要があります。クライアントを最初に企業ネットワークに接続して接続情報を取得する必要があります。
- クライアントは、ドメイン参加済み (Active Directory に登録済み) であると共に、クラウド ドメイン参加済み (Azure AD に登録済み) である必要もあります。
- [Active Directory User Discovery](/sccm/core/servers/deploy/configure/about-discovery-methods#active-directory-user-discovery#active-directory-user-discovery) を実行する必要があります。
- インターネット経由のユーザー ポリシー要求を許可するように Configuration Manager クライアントを変更し、変更をクライアントに展開する必要があります。 クライアントに対するこの変更は*クライアント デバイス上で*行われるので、ユーザー ポリシーに必要な構成の変更が完了していなくても、クラウド管理ゲートウェイを介して展開することができます。
- 管理ポイントは、HTTPS を使用してネットワーク上のトークンをセキュリティで保護するように構成する必要があります。管理ポイントには、.Net 4.5 がインストールされている必要があります。

このような構成変更を行うと、ユーザー ポリシーを作成し、さらにそのポリシーをテストするためにクライアントをインターネットに移動することができます。 クラウド管理ゲートウェイ経由のユーザー ポリシー要求は、Azure AD のトークン ベースの認証で認証されます。

## <a name="change-to-configuring-multi-factor-authentication-for-device-enrollment"></a>デバイス登録のための多要素認証の構成の変更

Azure Portal でデバイス登録のための多要素認証 (MFA) を設定できるようになったので、Configuration Manager コンソールでは MFA オプションが削除されました。 登録用の MFA を設定する方法の詳細については、[こちらの Microsoft Intune に関するトピック](https://docs.microsoft.com/en-us/intune/deploy-use/multi-factor-authentication-azure-active-directory)を参照してください。
