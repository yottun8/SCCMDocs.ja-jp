---
title: "コレクションの作成 | Microsoft Docs"
description: "System Center Configuration Manager でユーザーとデバイスのグループをより簡単に管理するコレクションを作成します。"
ms.custom: na
ms.date: 10/06/2016
ms.prod: configuration-manager
ms.reviewer: na
ms.suite: na
ms.technology:
- configmgr-other
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 1401a35e-4312-4d3b-8ceb-0abbb10d4f05
caps.latest.revision: 6
caps.handback.revision: 0
author: nbigman
ms.author: nbigman
manager: angrobe
translationtype: Human Translation
ms.sourcegitcommit: fc392e4440e84614f92218e9c7a09ec1c2c64f53
ms.openlocfilehash: 5ade6d22e1f04c1528f319e2c2a4b576ac290bd6


---
# <a name="how-to-create-collections-in-system-center-configuration-manager"></a>System Center Configuration Manager でコレクションを作成する方法

*適用対象: System Center Configuration Manager (Current Branch)*

System Center Configuration Manager でユーザーとデバイスの論理グループを表すコレクションを作成します。 コレクションにより、コンプライアンス設定の展開やソフトウェア更新プログラムのインストール、またはアプリケーションの管理といった数多くタスクが効率的に実行できます。 クライアント設定のグループを管理したり、役割ベースの管理を行ってリソースを管理者ユーザーのみアクセス可能に指定したりといったことに、コレクションを使用することもできます。 Configuration Manager には、組み込みコレクションが複数含まれます。 詳細については、「[Introduction to collections in System Center Configuration Manager](../../../../core/clients/manage/collections/introduction-to-collections.md)」(System Center Configuration Manager でのコレクションの概要) をご覧ください。  

> [!NOTE]  
>  1 つのコレクションにはユーザーまたはデバイスを含めることができますが、両方を混ぜることはできません。  

 次の表は、Configuration Manager でのコレクションのメンバーを構成するために使用する規則の一覧を示しています。  

|メンバーシップ規則の種類|説明|  
|--------------------------|----------------------|  
|ダイレクト規則|ダイレクト規則では、コレクションへメンバーとして追加するユーザーまたはコンピューターを選択できます。 この規則では、どのリソースがコレクションのメンバーかを直接制御することができます。 このメンバーシップはリソースが Configuration Manager から削除されない限り、変更されることはありません。 リソースをダイレクト規則コレクションに追加するには、そのリソースが Configuration Manager で既に検出されているか、ユーザーがそのリソースをインポートしておく必要があります。 ダイレクﾄ規則のコレクションには、変更を加える必要がある分、クエリ規則のコレクションよりも高い管理オーバーヘッドがあります。|  
|クエリ規則|クエリ規則は、Configuration Manager がスケジュールに従って実行するクエリに基づいて、コレクションのメンバーシップを動的に更新します。 たとえば、Active Directory ドメイン サービスの人事ユニットのメンバーであるユーザーのコレクションを作成することができます。 ダイレクト規則のコレクションとは異なり、人事ユニットに新しいユーザーが追加されたり、人事部からユーザー削除されたりすると、このコレクションのメンバーシップは自動的に更新されます。<br /><br /> コレクションを構築するのに使用できるクエリの例については、「[System Center Configuration Manager でクエリを作成する方法](../../../../core/servers/manage/create-queries.md)」を参照してください。|  
|[コレクションを含める] 規則|[コレクションを含める] の規則を使用すると、Configuration Manager における他のコレクションのメンバーを含めることができます。該当するコレクションのメンバーシップに変更があった場合は、現在のコレクションのメンバーシップはスケジュールで更新されます。<br /><br /> 複数の [コレクションを含める] 規則をコレクションに追加できます。<br />              **例:** 2 つの [コレクションを含める] 規則が含まれるコレクションを作成できます。 最初の [コレクションを含める] 規則はラップトップのコレクションを、2 番目の [コレクションを含める] 規則はデスクトップのコレクションを対象にしています。 新しいコレクションには、ラップトップ コレクションとデスクトップ コレクションのすべてのメンバーが含まれます。|  
|[コレクションを除外する] 規則|[コレクションを除外する] 規則を使用すると、Configuration Manager における他のコレクションのメンバーを除外することができます。 除外されるコレクションのメンバーシップに変更があった場合は、現在のコレクションのメンバーシップはスケジュールで更新されます。<br /><br /> 複数の [コレクションを除外する] 規則をコレクションに追加できます。 コレクションに "コレクションを含める" と "コレクションを除外する" の両方の規則を適用していると、競合が発生し、"除外する" の規則が "含める" の規則に優先されます。<br />              **例:** [コレクションを含める] 規則と [コレクションを除外する] 規則が 1 つずつ含まれるコレクションを作成します。 [コレクションを含める] 規則の対象は Dell デスクトップのコレクションです。 [コレクションを除外する] 規則の対象は、RAM が 4 GB 未満のコンピューターのコレクションです。 新しいコレクションには、RAM が 4 GB 以上の Dell デスクトップが含まれます。|  

 Configuration Manager でコレクションを作成する際は、次の手順を参考にします。 Configuration Manager サイトに作成されたコレクションをインポートすることもできます。 コレクションのエクスポート方法については、「[System Center Configuration Manager でコレクションを管理する方法](../../../../core/clients/manage/collections/manage-collections.md)」を参照してください。  

 Linux および UNIX を実行しているコンピューターのコレクションの作成については、「[System Center Configuration Manager で Linux および UNIX サーバーのクライアントを管理する方法](../../../../core/clients/manage/manage-clients-for-linux-and-unix-servers.md)」を参照してください。  

##  <a name="a-namebkmk1a-to-create-a-device-collection"></a><a name="BKMK_1"></a> デバイス コレクションを作成するには  

1.  Configuration Manager コンソールで、[ **資産とコンプライアンス**] をクリックします。  

2.  [ **資産とコンプライアンス** ] ワークスペースで [ **デバイス コレクション**] をクリックします。  

3.  [ホーム] **** タブの [作成] **** グループで [デバイス コレクションの作成] ****をクリックします。  

4.  デバイス コレクションの作成ウィザード **** の [全般] ****ページで、次の情報を指定します。  

    -   **名前**: コレクション固有の名前を指定します。  

    -   **コメント**: コレクションの説明を指定します。  

    -   **限定コレクション**: **[参照]** をクリックして、限定コレクションを選択します。 作成しているコレクションが限定コレクションのメンバーのみを含むようになります。  

5.  デバイス コレクションの作成ウィザード **** の [メンバーシップ規則] ****ページで、次の情報を指定します。  

    -   [規則の追加] **** 一覧で、このコレクションで使用するメンバーシップ規則の種類を選択します。 1 つのコレクションにつき複数の規則を構成することができます。  

         各メンバーシップの規則の種類を構成するには、次の手順に従います。  

        ##### <a name="to-configure-a-direct-rule"></a>ダイレクト規則を構成するには  

        1.  ダイレクト メンバーシップの規則の作成ウィザード **** の [リソースの検索] ****ページで、次の情報を指定します。  

            -   **リソース クラス**: 一覧で、検索してコレクションに追加するリソースの種類を選択します。 [システム リソース] **** から選択してクライアント コンピューターが返すインベントリ データを検索、または[不明なコンピューター] **** を選択して不明なコンピューターが返す値から選択します。  

            -   **属性名**: 一覧で、検索する選択したリソース クラスに関連する属性を選択します。 たとえば、NetBIOS 名でコンピューターを選択する場合は、[リソース クラス] **** の一覧で [システム リソース] **** を、 [属性名] **** の一覧で [NetBIOS 名] **** を選択します。  

            -   **不使用とマークされているリソースを除外する**: クライアント コンピューターが不使用とマークされている場合は、検索結果にその値を含めません。  

            -   **Configuration Manager クライアントがインストールされていないリソースを除外する**: 検索結果に Configuration Manager クライアントがインストールされていないリソースが含まれている場合は、検索結果にこの値は表示されません。  

            -   **値** : 選択した属性名を検索するための値を入力します。 ワイルドカードとしてパーセント ( **%** ) を使用できます。 たとえば、"M" で始まる NetBIOS 名のコンピューターを検索する場合は「**M%**」と入力します。  

        2.  ダイレクト メンバーシップの規則の作成ウィザード **** の [リソースの選択] ****ページで、コレクションに追加するリソースを [リソース] **** 一覧から選択し、[次へ] ****をクリックします。  

        3.  ダイレクト メンバーシップの規則の作成ウィザード ****を完了します。  

        ##### <a name="to-configure-a-query-rule"></a>クエリ規則を構成するには  

        1.  [クエリ規則のプロパティ] **** ダイアログ ボックスで、次の情報を入力します。  

            -   **名前**: クエリ規則固有の名前を指定します。  

            -   **クエリ ステートメントのインポート**: コレクションのクエリ規則として使用する Configuration Manager クエリを選択できる [**クエリの参照**] ダイアログ ボックスを開きます。 これらのクエリを作成する方法についての詳細と例については、「[System Center Configuration Manager でクエリを作成する方法](../../../../core/servers/manage/create-queries.md)」を参照してください。  

            -   **リソース クラス** : 一覧で、検索してコレクションに追加するリソースの種類を選択します。 [システム リソース] **** から値を選択してクライアント コンピューターが返すインベントリ データを検索、または[不明なコンピューター] **** を選択して不明なコンピューターが返す値から選択します。  

            -   **クエリ ステートメントの編集**: コレクションのクエリ規則として使用するクエリを編集できる [**クエリ ステートメントのプロパティ**] ダイアログ ボックスを開きます。 クエリに関する詳細については、「[System Center Configuration Manager のクエリのテクニカル リファレンス](../../../../core/servers/manage/queries-technical-reference.md)」を参照してください。  

        2.  [OK] **** をクリックして [クエリ規則のプロパティ] **** ダイアログ ボックスを閉じ、クエリ メンバーシップの規則を保存します。  

        ##### <a name="to-configure-an-include-collection-rule"></a>[コレクションを含める] 規則を構成するには  

        1.  [コレクションの選択] **** ダイアログ ボックスで、新しいコレクションに含めるコレクションを選択します。  

        2.  [OK] **** をクリックして [コレクションの選択] **** ダイアログ ボックスを閉じ、メンバーシップに "含める" の規則を保存します。  

        ##### <a name="to-configure-an-exclude-collection-rule"></a>[コレクションを除外する] 規則を構成するには  

        1.  [コレクションの選択] **** ダイアログ ボックスで、新しいコレクションから除外するコレクションを選択します。  

        2.  [OK] **** をクリックして [コレクションの選択] **** ダイアログ ボックスを閉じ、メンバーシップに "除外する" の規則を保存します。  

    -   **このコレクションで増分更新を使用する**: 新しいリソースまたは前回のコレクション評価から変更されたリソースを定期的にスキャンし、コレクションのフル評価とは独立して、それらのリソースに関してのみコレクションのメンバーシップを更新するには、このオプションをオンにします。 増分更新は 10 分間隔で行われます。  

        > [!IMPORTANT]  
        >  次のクラスを使用しているクエリ規則で構成されたコレクションは、増分更新をサポートしません。  
        >   
        >  -   SMS_G_System_CollectedFile  
        > -   SMS_G_System_LastSoftwareScan  
        > -   SMS_G_System_AppClientState  
        > -   SMS_G_System_DCMDeploymentState  
        > -   SMS_G_System_DCMDeploymentErrorAssetDetails  
        > -   SMS_G_System_DCMDeploymentCompliantAssetDetails  
        > -   SMS_G_System_DCMDeploymentNonCompliantAssetDetails  
        > -   SMS_G_User_DCMDeploymentCompliantAssetDetails (ユーザーのコレクションのみ)  
        > -   SMS_G_User_DCMDeploymentNonCompliantAssetDetails (ユーザーのコレクションのみ)  
        > -   SMS_G_System_SoftwareUsageData  
        > -   SMS_G_System_CI_ComplianceState  
        > -   SMS_G_System_EndpointProtectionStatus  
        > -   SMS_GH_System_*  
        > -   SMS_GEH_System_*  

    -   **このコレクションの完全な更新をスケジュールする**: コレクションのメンバーシップのフル評価を定期的にスケジュールするには、このオプションをオンにします。  

6.  新しいコレクションを作成するウィザードを完了します。 新しいコレクションは、[資産とコンプライアンス] **** ワークスペースの [デバイス コレクション] **** ノードに表示されます。  

> [!NOTE]  
>  コレクション メンバーを表示するには、Configuration Manager コンソールを更新または再読み込みする必要があります。 ただし、メンバーは、スケジュールされた最初の更新が行われるか、コレクションに対して **[メンバーシップの更新]** を手動で選択するまでコレクションに表示されません。 Configuration Manager データベースの収集ルールの複雑さとエントリの数によっては、コレクションの更新が完了するまでに数分かかる場合があります。  

##  <a name="a-namebkmk2a-to-create-a-user-collection"></a><a name="BKMK_2"></a> ユーザー コレクションを作成するには  

1.  Configuration Manager コンソールで、[ **資産とコンプライアンス**] をクリックします。  

2.  [資産とコンプライアンス] **** ワークスペースで [ユーザー コレクション] ****をクリックします。  

3.  [ホーム] **** タブの [作成] **** グループで [ユーザー コレクションの作成] ****をクリックします。  

4.  ユーザー コレクションの作成ウィザード **** の [全般] ****ページで、次の情報を指定します。  

    -   **名前**: コレクション固有の名前を指定します。  

    -   **コメント**: コレクションの説明を指定します。  

    -   **限定コレクション**: **[参照]** をクリックして、限定コレクションを選択します。 作成しているコレクションが限定コレクションのメンバーのみを含むようになります。  

5.  ユーザー コレクションの作成ウィザード **** の [メンバーシップ規則] ****ページで、次の情報を指定します。  

    -   [規則の追加] **** 一覧で、このコレクションで使用するメンバーシップ規則の種類を選択します。 1 つのコレクションにつき複数の規則を構成することができます。  

         各メンバーシップの規則の種類を構成するには、次の手順に従います。  

        ##### <a name="to-configure-a-direct-rule"></a>ダイレクト規則を構成するには  

        1.  ダイレクト メンバーシップの規則の作成ウィザード **** の [リソースの検索] ****ページで、次の情報を指定します。  

            -   **リソース クラス**: 一覧で、検索してコレクションに追加するリソースの種類を選択します。 Configuration Manager によって収集されるユーザー情報を検索する場合は [**ユーザー リソース**] から、Configuration Manager によって収集されたユーザー グループ情報を検索する場合は [**ユーザー グループ リソース**] から選択します。  

            -   **属性名**: 一覧で、検索する選択したリソース クラスに関連する属性を選択します。 たとえば、組織単位 (OU) 名でユーザーを選択する場合は、 **[リソース クラス]** の一覧で **[ユーザー リソース]** を、 **[属性名]** の一覧で **[ユーザー OU 名]** を選択します。  

            -   **値** : 選択した属性名を検索するための値を入力します。 ワイルドカードとしてパーセント ( **%** ) を使用できます。 たとえば、Contoso OU 内のユーザーを検索する必要がある場合は、このフィールドに「 **Contoso** 」と入力します。  

        2.  ダイレクト メンバーシップの規則の作成ウィザード **** の [リソースの選択] ****ページで、コレクションに追加するリソースを [リソース] **** 一覧から選択し、[次へ] ****をクリックします。  

        3.  ダイレクト メンバーシップの規則の作成ウィザード ****を完了します。  

        ##### <a name="to-configure-a-query-rule"></a>クエリ規則を構成するには  

        1.  [クエリ規則のプロパティ] **** ダイアログ ボックスで、次の情報を入力します。  

            -   **名前**: クエリ規則固有の名前を指定します。  

            -   **クエリ ステートメントのインポート**: コレクションのクエリ規則として使用する Configuration Manager クエリを選択できる [**クエリの参照**] ダイアログ ボックスを開きます。 クエリに関する詳細については、「[System Center Configuration Manager のクエリのテクニカル リファレンス](../../../../core/servers/manage/queries-technical-reference.md)」を参照してください。  

            -   **リソース クラス**: 一覧で、検索してコレクションに追加するリソースの種類を選択します。 Configuration Manager によって収集されるユーザー情報を検索する場合は [**ユーザー リソース**] から、Configuration Manager によって収集されたユーザー グループ情報を検索する場合は [**ユーザー グループ リソース**] から選択します。  

            -   **クエリ ステートメントの編集**: コレクションのクエリ規則として使用するクエリを編集できる [**クエリ ステートメントのプロパティ**] ダイアログ ボックスを開きます。 クエリに関する詳細については、「[System Center Configuration Manager のクエリのテクニカル リファレンス](../../../../core/servers/manage/queries-technical-reference.md)」を参照してください。  

        2.  [OK] **** をクリックして [クエリ規則のプロパティ] **** ダイアログ ボックスを閉じ、クエリ メンバーシップの規則を保存します。  

        ##### <a name="to-configure-an-include-collection-rule"></a>[コレクションを含める] 規則を構成するには  

        1.  [コレクションの選択] **** ダイアログ ボックスで、新しいコレクションに含めるコレクションを選択します。  

        2.  [OK] **** をクリックして [コレクションの選択] **** ダイアログ ボックスを閉じ、メンバーシップに "含める" の規則を保存します。  

        ##### <a name="to-configure-an-exclude-collection-rule"></a>[コレクションを除外する] 規則を構成するには  

        1.  [コレクションの選択] **** ダイアログ ボックスで、新しいコレクションから除外するコレクションを選択します。  

        2.  [OK] **** をクリックして [コレクションの選択] **** ダイアログ ボックスを閉じ、メンバーシップに "除外する" の規則を保存します。  

    -   **このコレクションで増分更新を使用する**: 新しいリソースまたは前回のコレクション評価から変更されたリソースを定期的にスキャンし、コレクションのフル評価とは独立して、それらのリソースに関してのみコレクションのメンバーシップを更新するには、このオプションをオンにします。 増分更新は 10 分間隔で行われます。  

        > [!IMPORTANT]  
        >  次のクラスを使用しているクエリ規則で構成されたコレクションは、増分更新をサポートしません。  
        >   
        >  -   SMS_G_System_CollectedFile  
        > -   SMS_G_System_LastSoftwareScan  
        > -   SMS_G_System_AppClientState  
        > -   SMS_G_System_DCMDeploymentState  
        > -   SMS_G_System_DCMDeploymentErrorAssetDetails  
        > -   SMS_G_System_DCMDeploymentCompliantAssetDetails  
        > -   SMS_G_System_DCMDeploymentNonCompliantAssetDetails  
        > -   SMS_G_User_DCMDeploymentCompliantAssetDetails (ユーザーのコレクションのみ)  
        > -   SMS_G_User_DCMDeploymentNonCompliantAssetDetails (ユーザーのコレクションのみ)  
        > -   SMS_G_System_SoftwareUsageData  
        > -   SMS_G_System_CI_ComplianceState  
        > -   SMS_G_System_EndpointProtectionStatus  
        > -   SMS_GH_System_*  
        > -   SMS_GEH_System_*  

    -   **このコレクションの完全な更新をスケジュールする**: コレクションのメンバーシップのフル評価を定期的にスケジュールするには、このオプションをオンにします。  

6.  新しいコレクションを作成するウィザードを完了します。 新しいコレクションは、[資産とコンプライアンス] **** ワークスペースの [ユーザー コレクション] **** ノードに表示されます。  

> [!NOTE]  
>  コレクション メンバーを表示するには、Configuration Manager コンソールを更新または再読み込みする必要があります。 ただし、メンバーは、スケジュールされた最初の更新が行われるか、コレクションに対して **[メンバーシップの更新]** を手動で選択するまでコレクションに表示されません。 Configuration Manager データベースの収集ルールの複雑さとエントリの数によっては、コレクションの更新が完了するまでに数分かかる場合があります。  

##  <a name="a-namebkmk3a-to-import-a-collection"></a><a name="BKMK_3"></a> コレクションをインポートするには  

1.  Configuration Manager コンソールで、[ **資産とコンプライアンス**] をクリックします。  

2.  [資産とコンプライアンス] **** ワークスペースで [ユーザー コレクション] **** または [デバイス コレクション] ****をクリックします。  

3.  [ホーム] **** タブの [作成] **** グループで [コレクションのインポート] ****をクリックします。  

4.  コレクションのインポート ウィザード **** の [全般] ****ページで [次へ] ****をクリックします。  

5.  [MOF ファイル名] **** ページで、[参照] **** をクリックしてインポートするコレクション情報を含む MOF ファイルを参照します。  

    > [!NOTE]  
    >  インポートするファイルは、同じバージョンの Configuration Manager が動作するサイトからエクスポートされたものである必要があります。 コレクションのエクスポートの詳細については、「[System Center Configuration Manager でコレクションを管理する方法](../../../../core/clients/manage/collections/manage-collections.md)」を参照してください。  

6.  コレクションをインポートするウィザードを完了します。 新しいコレクションは、 **[資産とコンプライアンス]** ワークスペースの **[ユーザー コレクション]** または **[デバイス コレクション]** ノードに表示されます。  

> [!NOTE]  
>  新しくインポートされたコレクションのコレクション メンバーを表示するには、Configuration Manager コンソールを更新または再読み込みする必要があります。  



<!--HONumber=Dec16_HO3-->


